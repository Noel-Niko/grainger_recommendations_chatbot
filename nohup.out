nohup: uvicorn: No such file or directory
nohup: streamlit: No such file or directory
nohup: uvicorn: No such file or directory
nohup: streamlit: No such file or directory

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-14 17:50:15,027 - INFO - Found credentials in environment variables.
2024-07-14 17:50:15,349 - INFO - Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-14 17:50:15,596 - INFO - Initializing Titan Embeddings Model...
2024-07-14 17:50:15,596 - INFO - Titan Embeddings Model initialized.
2024-07-14 17:50:15,597 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-14 17:50:15,809 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-14 17:50:15,810 - ERROR - Error loading serialized_documents_file at /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-14 17:50:15,810 - INFO - Generating new df
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-14 17:50:16,142 - INFO - Structured documents created:
2024-07-14 17:50:16,142 - INFO - Document 1 of 3993:
2024-07-14 17:50:16,142 - INFO - 52WX73 Handheld Tape Dispenser: Light, For 3 in Max Tape Wd, For 3 in Tape Core Dia, Pistol APPROVED VENDOR <p>Handheld packaging tape dispensers hold a roll of self-adhesive packaging tape and have a
2024-07-14 17:50:16,142 - INFO - Document 2 of 3993:
2024-07-14 17:50:16,142 - INFO - 8ZF81 Humidity Sponge Indicator: 3 in Wd, 3 in Lg, 476 cu in Area Protected, Bag, 40 Bags per Pack, 40 PK CONTROL COMPANY <p>Tyvek-brand desiccant bags are tear-proof and dust-free and meet FDA specif
2024-07-14 17:50:16,142 - INFO - Document 3 of 3993:
2024-07-14 17:50:16,142 - INFO - 8X316 TIMBERLAND PRO Work Boot: W, 11 1/2, 6 in Work Boot Footwear, Men's, Wheat, 1 PR TIMBERLAND PRO 
2024-07-14 17:50:16,142 - INFO - Document 4 of 3993:
2024-07-14 17:50:16,142 - INFO - 31XL69 TPI CORP. Electric Wall & Ceiling Unit Heater: 208/240V AC, 1-phase, 11 in x 10-5/8 in x 9-5/8 in TPI CORP. <p>Standard suspended electric wall and ceiling unit heaters hang from a bracket or t
2024-07-14 17:50:16,142 - INFO - Document 5 of 3993:
2024-07-14 17:50:16,142 - INFO - 6FHC0 Traffic Cone: Day or Low Speed Roadway (40 MPH or Less), Non-Reflective, Black Base, 28 in Cone Ht APPROVED VENDOR <p>These traffic cones meet federal MUTCD (Manual on Uniform Traffic Control De
2024-07-14 17:50:16,152 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-14 17:50:16,153 - INFO - Creating FAISS vector store from structured documents...
2024-07-14 17:50:16.296 Port 8505 is already in use
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-14 17:50:16,759 - INFO - Found credentials in environment variables.
2024-07-14 17:50:16,998 - INFO - Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-14 17:50:17,138 - INFO - Initializing Titan Embeddings Model...
2024-07-14 17:50:17,138 - INFO - Titan Embeddings Model initialized.
2024-07-14 17:50:17,138 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-14 17:50:17,229 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-14 17:50:17,229 - INFO - Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
2024-07-14 17:50:17,236 - INFO - Documents file loaded successfully!
2024-07-14 17:50:17,236 - INFO - Structured documents created:
2024-07-14 17:50:17,236 - INFO - Document 1 of 3993:
2024-07-14 17:50:17,236 - INFO - 52WX73 Handheld Tape Dispenser: Light, For 3 in Max Tape Wd, For 3 in Tape Core Dia, Pistol APPROVED VENDOR <p>Handheld packaging tape dispensers hold a roll of self-adhesive packaging tape and have a
2024-07-14 17:50:17,237 - INFO - Document 2 of 3993:
2024-07-14 17:50:17,237 - INFO - 8ZF81 Humidity Sponge Indicator: 3 in Wd, 3 in Lg, 476 cu in Area Protected, Bag, 40 Bags per Pack, 40 PK CONTROL COMPANY <p>Tyvek-brand desiccant bags are tear-proof and dust-free and meet FDA specif
2024-07-14 17:50:17,237 - INFO - Document 3 of 3993:
2024-07-14 17:50:17,237 - INFO - 8X316 TIMBERLAND PRO Work Boot: W, 11 1/2, 6 in Work Boot Footwear, Men's, Wheat, 1 PR TIMBERLAND PRO 
2024-07-14 17:50:17,237 - INFO - Document 4 of 3993:
2024-07-14 17:50:17,237 - INFO - 31XL69 TPI CORP. Electric Wall & Ceiling Unit Heater: 208/240V AC, 1-phase, 11 in x 10-5/8 in x 9-5/8 in TPI CORP. <p>Standard suspended electric wall and ceiling unit heaters hang from a bracket or t
2024-07-14 17:50:17,237 - INFO - Document 5 of 3993:
2024-07-14 17:50:17,237 - INFO - 6FHC0 Traffic Cone: Day or Low Speed Roadway (40 MPH or Less), Non-Reflective, Black Base, 28 in Cone Ht APPROVED VENDOR <p>These traffic cones meet federal MUTCD (Manual on Uniform Traffic Control De
2024-07-14 17:50:17,246 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-14 17:50:17,246 - INFO - Creating FAISS vector store from structured documents...
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:Attempt 3 failed: [Errno 61] Connection refused
ERROR:root:Attempt 4 failed: [Errno 61] Connection refused
ERROR:root:Attempt 5 failed: [Errno 61] Connection refused
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
2024-07-14 17:58:08,979 - INFO - Loading faiss with AVX2 support.
2024-07-14 17:58:09,029 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-14 17:58:09,381 - INFO - FAISS vector store created.
2024-07-14 17:58:09,381 - INFO - Serializing FAISS vector store to /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-14 17:58:09,458 - INFO - FAISS vector store serialized to pickle file.
2024-07-14 17:58:09,461 - INFO - Initializing ChromeDriver...
2024-07-14 17:58:09,461 - INFO - ====== WebDriver manager ======
2024-07-14 17:58:09,799 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-14 17:58:09,848 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-14 17:58:09,886 - INFO - Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126/chromedriver-mac-x64/chromedriver] found in cache
2024-07-14 17:58:10,885 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [15725]
INFO:     Waiting for application startup.
2024-07-14 17:58:10,909 - INFO - Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2024-07-14 17:58:15,259 - INFO - Loading faiss with AVX2 support.
2024-07-14 17:58:15,281 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-14 17:58:15,631 - INFO - FAISS vector store created.
2024-07-14 17:58:15,631 - INFO - Serializing FAISS vector store to /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-14 17:58:15,696 - INFO - FAISS vector store serialized to pickle file.
2024-07-14 17:58:15,699 - INFO - Initializing ChromeDriver...
2024-07-14 17:58:15,699 - INFO - ====== WebDriver manager ======
2024-07-14 17:58:15,994 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-14 17:58:16,044 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-14 17:58:16,082 - INFO - Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126/chromedriver-mac-x64/chromedriver] found in cache
2024-07-14 17:58:17,024 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [15756]
INFO:     Waiting for application startup.
2024-07-14 17:58:17,045 - INFO - Startup complete.
INFO:     Application startup complete.
ERROR:    [Errno 48] error while attempting to bind on address ('0.0.0.0', 8000): address already in use
INFO:     Waiting for application shutdown.
2024-07-14 17:58:17,113 - INFO - Shutdown complete.
INFO:     Application shutdown complete.
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-14 17:58:37,071 - INFO - Found credentials in environment variables.
2024-07-14 17:58:37,324 - INFO - Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-14 17:58:37,462 - INFO - Initializing Titan Embeddings Model...
2024-07-14 17:58:37,463 - INFO - Titan Embeddings Model initialized.
2024-07-14 17:58:37,463 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-14 17:58:37,551 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-14 17:58:37,551 - INFO - Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
2024-07-14 17:58:37,558 - INFO - Documents file loaded successfully!
2024-07-14 17:58:37,558 - INFO - Structured documents created:
2024-07-14 17:58:37,558 - INFO - Document 1 of 3993:
2024-07-14 17:58:37,558 - INFO - 52WX73 Handheld Tape Dispenser: Light, For 3 in Max Tape Wd, For 3 in Tape Core Dia, Pistol APPROVED VENDOR <p>Handheld packaging tape dispensers hold a roll of self-adhesive packaging tape and have a
2024-07-14 17:58:37,558 - INFO - Document 2 of 3993:
2024-07-14 17:58:37,558 - INFO - 8ZF81 Humidity Sponge Indicator: 3 in Wd, 3 in Lg, 476 cu in Area Protected, Bag, 40 Bags per Pack, 40 PK CONTROL COMPANY <p>Tyvek-brand desiccant bags are tear-proof and dust-free and meet FDA specif
2024-07-14 17:58:37,558 - INFO - Document 3 of 3993:
2024-07-14 17:58:37,558 - INFO - 8X316 TIMBERLAND PRO Work Boot: W, 11 1/2, 6 in Work Boot Footwear, Men's, Wheat, 1 PR TIMBERLAND PRO 
2024-07-14 17:58:37,558 - INFO - Document 4 of 3993:
2024-07-14 17:58:37,558 - INFO - 31XL69 TPI CORP. Electric Wall & Ceiling Unit Heater: 208/240V AC, 1-phase, 11 in x 10-5/8 in x 9-5/8 in TPI CORP. <p>Standard suspended electric wall and ceiling unit heaters hang from a bracket or t
2024-07-14 17:58:37,558 - INFO - Document 5 of 3993:
2024-07-14 17:58:37,558 - INFO - 6FHC0 Traffic Cone: Day or Low Speed Roadway (40 MPH or Less), Non-Reflective, Black Base, 28 in Cone Ht APPROVED VENDOR <p>These traffic cones meet federal MUTCD (Manual on Uniform Traffic Control De
2024-07-14 17:58:37,567 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-14 17:58:37,568 - INFO - Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
2024-07-14 17:58:37,630 - INFO - Loading faiss with AVX2 support.
2024-07-14 17:58:37,657 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-14 17:58:37,723 - INFO - FAISS vector store loaded from pickle file.
2024-07-14 17:58:37,726 - INFO - Initializing ChromeDriver...
2024-07-14 17:58:37,726 - INFO - ====== WebDriver manager ======
2024-07-14 17:58:37,983 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-14 17:58:38,034 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-14 17:58:38,074 - INFO - Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126/chromedriver-mac-x64/chromedriver] found in cache
2024-07-14 17:58:39,032 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [15941]
INFO:     Waiting for application startup.
2024-07-14 17:58:39,054 - INFO - Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

2024-07-14 17:58:46,542 - INFO -  fast_api_main/ Adding new session ID 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46 to session_store
2024-07-14 17:58:46,542 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 17:58:46,542 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: []
2024-07-14 17:58:46,542 - INFO - fast_api_main/ Processing question: hammer
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-14 17:58:47,443 - INFO - chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-14 17:58:56,822 - INFO - chat_processor/ chat_procesing: message: Here are the hammers available from the catalog:
- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand
- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  
- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand 
- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand
2024-07-14 17:58:56,822 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC15'}, {'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC19'}, {'product': 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO', 'code': '53CT46'}]}
2024-07-14 17:58:56,822 - INFO - fast_api_main/ Message: Here are the hammers available from the catalog:
- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand
- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  
- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand 
- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand
2024-07-14 17:58:56,822 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC15'}, {'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC19'}, {'product': 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO', 'code': '53CT46'}]}
2024-07-14 17:58:56,822 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-14 17:58:56,822 - INFO - fast_api_main/ Time to get attributes: 0.9016039371490479
2024-07-14 17:58:56,822 - INFO - fast_api_main/ Updated chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 17:58:56,822 - INFO - fast_api_main/ Processed question: hammer with message: Here are the hammers available from the catalog:
- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand
- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  
- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand 
- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand
2024-07-14 17:58:56,822 - INFO - fast_api_main/ Products retrieved: [{'product': 'Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC15'}, {'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC19'}, {'product': 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO', 'code': '53CT46'}]
Invalid JSON: 

Time for extract_customer_attributes: 0.9005529880523682
Time for split_process_and_message_from_response: 0.00019288063049316406
INFO:     127.0.0.1:55332 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-14 17:58:56,850 - INFO - fast_api_main/ Fetching images for products: ['Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD, 45RC15', 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD, 45RC16', 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC17', 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC18', 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD, 45RC19', 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO, 53CT46']
2024-07-14 17:58:56,850 - INFO - grainger_image_util item.part[-1]: 45RC15 item.part[0]: Hammer: Fiberglass
2024-07-14 17:58:56,853 - INFO - grainger_image_util item.part[-1]: 45RC16 item.part[0]: Hammer: Fiberglass
2024-07-14 17:58:56,855 - INFO - grainger_image_util item.part[-1]: 45RC17 item.part[0]: Hammer: Fiberglass
2024-07-14 17:58:56,857 - INFO - grainger_image_util item.part[-1]: 45RC18 item.part[0]: Hammer: Fiberglass
2024-07-14 17:58:56,858 - INFO - grainger_image_util item.part[-1]: 45RC19 item.part[0]: Hammer: Fiberglass
2024-07-14 17:58:56,859 - INFO - grainger_image_util item.part[-1]: 53CT46 item.part[0]: Hammer: Fiberglass
2024-07-14 17:58:57,753 - INFO - fast_api_main/ Total time to fetch images: 0.008231878280639648 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC15 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC16 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC17 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC18 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC19 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/53CT48-A0075-1_v1?$lgmain$ for 53CT46 in 0.00 seconds
INFO:     127.0.0.1:55347 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-14 17:58:58,366 - INFO - fast_api_main/ Starting reviews at 1720994338.366456
INFO:     ('127.0.0.1', 55358) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-14 17:58:58,368 - INFO - fast_api_main/ Sending review at 1720994338.36829
2024-07-14 17:58:58,368 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC17
2024-07-14 17:58:58,369 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC18
2024-07-14 17:58:58,370 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO, 53CT46
2024-07-14 17:58:58,371 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD, 45RC16
2024-07-14 17:58:58,373 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD, 45RC19
2024-07-14 17:58:58,374 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD, 45RC15
INFO:     127.0.0.1:55440 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55441 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
2024-07-14 17:59:26,461 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 17:59:43,971 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 17:59:44,058 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 17:59:44,330 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 17:59:44,349 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 17:59:44,358 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 17:59:44,476 - ERROR - fast_api_main/ Error navigating to reviews for Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD, 45RC15: Message: 
Stacktrace:
0   chromedriver                        0x000000010cc990e8 chromedriver + 5169384
1   chromedriver                        0x000000010cc90fba chromedriver + 5136314
2   chromedriver                        0x000000010c80d36c chromedriver + 402284
3   chromedriver                        0x000000010c85a740 chromedriver + 718656
4   chromedriver                        0x000000010c85aa01 chromedriver + 719361
5   chromedriver                        0x000000010c89fbc4 chromedriver + 1002436
6   chromedriver                        0x000000010c87dadd chromedriver + 862941
7   chromedriver                        0x000000010c89cf57 chromedriver + 991063
8   chromedriver                        0x000000010c87d853 chromedriver + 862291
9   chromedriver                        0x000000010c84d5c6 chromedriver + 665030
10  chromedriver                        0x000000010c84de4e chromedriver + 667214
11  chromedriver                        0x000000010cc5bd00 chromedriver + 4918528
12  chromedriver                        0x000000010cc60cfd chromedriver + 4939005
13  chromedriver                        0x000000010cc613d5 chromedriver + 4940757
14  chromedriver                        0x000000010cc3cde4 chromedriver + 4791780
15  chromedriver                        0x000000010cc616c9 chromedriver + 4941513
16  chromedriver                        0x000000010cc2e5b4 chromedriver + 4732340
17  chromedriver                        0x000000010cc81898 chromedriver + 5073048
18  chromedriver                        0x000000010cc81a57 chromedriver + 5073495
19  chromedriver                        0x000000010cc90b6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-14 17:59:44,476 - INFO - fast_api_main/ Sending review at 1720994384.4766989
2024-07-14 17:59:45,517 - INFO - fast_api_main/ Reviews for product 45RC17: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Buy to resale good product please put me in sweepstakes', 'I have used for years in my shop they work great    Looked everywhere nobody seems to carry them anymore just happened to look online and you had them so I bought two of them Thanks for having them', "not much to say, it's a metal brush.  works fine.", 'Just as expected and great price. Nice stiff bristles.']}
2024-07-14 17:59:46,012 - INFO - fast_api_main/ Reviews for product 53CT46: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Buy to resale good product please put me in sweepstakes', 'I have used for years in my shop they work great    Looked everywhere nobody seems to carry them anymore just happened to look online and you had them so I bought two of them Thanks for having them', "not much to say, it's a metal brush.  works fine.", 'Just as expected and great price. Nice stiff bristles.']}
2024-07-14 17:59:46,254 - INFO - fast_api_main/ Reviews for product 45RC18: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Buy to resale good product please put me in sweepstakes', 'I have used for years in my shop they work great    Looked everywhere nobody seems to carry them anymore just happened to look online and you had them so I bought two of them Thanks for having them', "not much to say, it's a metal brush.  works fine.", 'Just as expected and great price. Nice stiff bristles.']}
2024-07-14 17:59:46,464 - INFO - fast_api_main/ Reviews for product 45RC16: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Buy to resale good product please put me in sweepstakes', 'I have used for years in my shop they work great    Looked everywhere nobody seems to carry them anymore just happened to look online and you had them so I bought two of them Thanks for having them', "not much to say, it's a metal brush.  works fine.", 'Just as expected and great price. Nice stiff bristles.']}
2024-07-14 17:59:46,465 - INFO - fast_api_main/ Sending review at 1720994386.4653702
2024-07-14 17:59:46,666 - INFO - fast_api_main/ Reviews for product 45RC19: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Buy to resale good product please put me in sweepstakes', 'I have used for years in my shop they work great    Looked everywhere nobody seems to carry them anymore just happened to look online and you had them so I bought two of them Thanks for having them', "not much to say, it's a metal brush.  works fine.", 'Just as expected and great price. Nice stiff bristles.']}
2024-07-14 17:59:46,667 - INFO - fast_api_main/ Sending review at 1720994386.66702
2024-07-14 17:59:46,667 - INFO - fast_api_main/ Sending review at 1720994386.667291
2024-07-14 17:59:46,667 - INFO - fast_api_main/ Sending review at 1720994386.667526
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-14 17:59:46,721 - INFO - WebSocket disconnected
2024-07-14 17:59:46,722 - WARNING - WebSocket already closed
INFO:     connection closed
INFO:     127.0.0.1:55488 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55489 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55538 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55539 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55580 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55581 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55614 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55615 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55648 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55649 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55683 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55684 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55717 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55718 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55751 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55752 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55783 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55784 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55816 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55817 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55849 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55850 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55882 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55883 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
2024-07-14 18:11:33,713 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 18:11:33,714 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 18:11:33,714 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 18:11:34,791 - INFO - chat_processor/ Chat History passed to processor: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 18:11:44,470 - INFO - chat_processor/ chat_procesing: message: Here are the hammers available from the catalog:
- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand
- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  
- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand 
- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand
2024-07-14 18:11:44,470 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC15'}, {'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC19'}, {'product': 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO', 'code': '53CT46'}]}
2024-07-14 18:11:44,470 - INFO - fast_api_main/ Message: Here are the hammers available from the catalog:
- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand
- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  
- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand 
- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand
2024-07-14 18:11:44,470 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC15'}, {'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC19'}, {'product': 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO', 'code': '53CT46'}]}
2024-07-14 18:11:44,470 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-14 18:11:44,470 - INFO - fast_api_main/ Time to get attributes: 1.077049970626831
2024-07-14 18:11:44,471 - INFO - fast_api_main/ Updated chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 18:11:44,471 - INFO - fast_api_main/ Processed question: hammer with message: Here are the hammers available from the catalog:
- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand
- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  
- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand
- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand 
- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand
2024-07-14 18:11:44,471 - INFO - fast_api_main/ Products retrieved: [{'product': 'Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC15'}, {'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC19'}, {'product': 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO', 'code': '53CT46'}]
Invalid JSON: 

Time for extract_customer_attributes: 1.0572419166564941
Time for split_process_and_message_from_response: 0.0011489391326904297
INFO:     127.0.0.1:55898 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-14 18:11:44,563 - INFO - fast_api_main/ Fetching images for products: ['Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD, 45RC15', 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD, 45RC16', 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC17', 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC18', 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD, 45RC19', 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO, 53CT46']
2024-07-14 18:11:44,575 - INFO - grainger_image_util item.part[-1]: 45RC15 item.part[0]: Hammer: Fiberglass
2024-07-14 18:11:44,628 - INFO - grainger_image_util item.part[-1]: 45RC16 item.part[0]: Hammer: Fiberglass
2024-07-14 18:11:44,631 - INFO - grainger_image_util item.part[-1]: 45RC17 item.part[0]: Hammer: Fiberglass
2024-07-14 18:11:44,632 - INFO - grainger_image_util item.part[-1]: 45RC18 item.part[0]: Hammer: Fiberglass
2024-07-14 18:11:44,633 - INFO - grainger_image_util item.part[-1]: 45RC19 item.part[0]: Hammer: Fiberglass
2024-07-14 18:11:44,634 - INFO - grainger_image_util item.part[-1]: 53CT46 item.part[0]: Hammer: Fiberglass
2024-07-14 18:11:44,900 - INFO - fast_api_main/ Total time to fetch images: 0.03196525573730469 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC15 in 0.03 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC16 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC17 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC18 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC19 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/53CT48-A0075-1_v1?$lgmain$ for 53CT46 in 0.00 seconds
INFO:     127.0.0.1:55905 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-14 18:11:45,432 - INFO - fast_api_main/ Starting reviews at 1720995105.43261
INFO:     ('127.0.0.1', 55912) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-14 18:11:45,437 - INFO - fast_api_main/ Sending review at 1720995105.437024
2024-07-14 18:11:45,437 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD, 45RC19
2024-07-14 18:11:45,446 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD, 45RC16
2024-07-14 18:11:45,446 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO, 53CT46
2024-07-14 18:11:45,446 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD, 45RC15
2024-07-14 18:11:45,446 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC17
2024-07-14 18:11:45,446 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC18
2024-07-14 18:11:45,466 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 18:11:45,466 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 18:11:45,467 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 18:11:45,467 - ERROR - fast_api_main/ Error navigating to reviews for Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD, 45RC19: Message: disconnected: not connected to DevTools
  (failed to check if window was closed: disconnected: not connected to DevTools)
  (Session info: chrome-headless-shell=126.0.6478.127)
Stacktrace:
0   chromedriver                        0x000000010cc990e8 chromedriver + 5169384
1   chromedriver                        0x000000010cc90fba chromedriver + 5136314
2   chromedriver                        0x000000010c80d36c chromedriver + 402284
3   chromedriver                        0x000000010c7f2d26 chromedriver + 294182
4   chromedriver                        0x000000010c7f2c13 chromedriver + 293907
5   chromedriver                        0x000000010c80f782 chromedriver + 411522
6   chromedriver                        0x000000010c89c92b chromedriver + 989483
7   chromedriver                        0x000000010c87d853 chromedriver + 862291
8   chromedriver                        0x000000010c84d5c6 chromedriver + 665030
9   chromedriver                        0x000000010c84de4e chromedriver + 667214
10  chromedriver                        0x000000010cc5bd00 chromedriver + 4918528
11  chromedriver                        0x000000010cc60cfd chromedriver + 4939005
12  chromedriver                        0x000000010cc613d5 chromedriver + 4940757
13  chromedriver                        0x000000010cc3cde4 chromedriver + 4791780
14  chromedriver                        0x000000010cc616c9 chromedriver + 4941513
15  chromedriver                        0x000000010cc2e5b4 chromedriver + 4732340
16  chromedriver                        0x000000010cc81898 chromedriver + 5073048
17  chromedriver                        0x000000010cc81a57 chromedriver + 5073495
18  chromedriver                        0x000000010cc90b6e chromedriver + 5135214
19  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
20  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-14 18:11:45,467 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 18:11:45,467 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-14 18:11:45,468 - ERROR - fast_api_main/ Error navigating to reviews for Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC17: Message: disconnected: not connected to DevTools
  (failed to check if window was closed: disconnected: not connected to DevTools)
  (Session info: chrome-headless-shell=126.0.6478.127)
Stacktrace:
0   chromedriver                        0x000000010cc990e8 chromedriver + 5169384
1   chromedriver                        0x000000010cc90fba chromedriver + 5136314
2   chromedriver                        0x000000010c80d36c chromedriver + 402284
3   chromedriver                        0x000000010c7f2d26 chromedriver + 294182
4   chromedriver                        0x000000010c7f2c13 chromedriver + 293907
5   chromedriver                        0x000000010c80f782 chromedriver + 411522
6   chromedriver                        0x000000010c89c92b chromedriver + 989483
7   chromedriver                        0x000000010c87d853 chromedriver + 862291
8   chromedriver                        0x000000010c84d5c6 chromedriver + 665030
9   chromedriver                        0x000000010c84de4e chromedriver + 667214
10  chromedriver                        0x000000010cc5bd00 chromedriver + 4918528
11  chromedriver                        0x000000010cc60cfd chromedriver + 4939005
12  chromedriver                        0x000000010cc613d5 chromedriver + 4940757
13  chromedriver                        0x000000010cc3cde4 chromedriver + 4791780
14  chromedriver                        0x000000010cc616c9 chromedriver + 4941513
15  chromedriver                        0x000000010cc2e5b4 chromedriver + 4732340
16  chromedriver                        0x000000010cc81898 chromedriver + 5073048
17  chromedriver                        0x000000010cc81a57 chromedriver + 5073495
18  chromedriver                        0x000000010cc90b6e chromedriver + 5135214
19  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
20  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-14 18:11:45,468 - ERROR - fast_api_main/ Error navigating to reviews for Hammer: Fiberglass, Steel, 8 oz Head Wt, 7/8 in Face Dia, 11 in Overall Lg, Textured Grip WESTWARD, 45RC15: Message: disconnected: not connected to DevTools
  (failed to check if window was closed: disconnected: not connected to DevTools)
  (Session info: chrome-headless-shell=126.0.6478.127)
Stacktrace:
0   chromedriver                        0x000000010cc990e8 chromedriver + 5169384
1   chromedriver                        0x000000010cc90fba chromedriver + 5136314
2   chromedriver                        0x000000010c80d36c chromedriver + 402284
3   chromedriver                        0x000000010c7f2d26 chromedriver + 294182
4   chromedriver                        0x000000010c7f2c13 chromedriver + 293907
5   chromedriver                        0x000000010c80f782 chromedriver + 411522
6   chromedriver                        0x000000010c89c92b chromedriver + 989483
7   chromedriver                        0x000000010c87d853 chromedriver + 862291
8   chromedriver                        0x000000010c84d5c6 chromedriver + 665030
9   chromedriver                        0x000000010c84de4e chromedriver + 667214
10  chromedriver                        0x000000010cc5bd00 chromedriver + 4918528
11  chromedriver                        0x000000010cc60cfd chromedriver + 4939005
12  chromedriver                        0x000000010cc613d5 chromedriver + 4940757
13  chromedriver                        0x000000010cc3cde4 chromedriver + 4791780
14  chromedriver                        0x000000010cc616c9 chromedriver + 4941513
15  chromedriver                        0x000000010cc2e5b4 chromedriver + 4732340
16  chromedriver                        0x000000010cc81898 chromedriver + 5073048
17  chromedriver                        0x000000010cc81a57 chromedriver + 5073495
18  chromedriver                        0x000000010cc90b6e chromedriver + 5135214
19  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
20  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-14 18:11:45,469 - ERROR - fast_api_main/ Error navigating to reviews for Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD, 45RC16: Message: disconnected: not connected to DevTools
  (failed to check if window was closed: disconnected: not connected to DevTools)
  (Session info: chrome-headless-shell=126.0.6478.127)
Stacktrace:
0   chromedriver                        0x000000010cc990e8 chromedriver + 5169384
1   chromedriver                        0x000000010cc90fba chromedriver + 5136314
2   chromedriver                        0x000000010c80d36c chromedriver + 402284
3   chromedriver                        0x000000010c7f2d26 chromedriver + 294182
4   chromedriver                        0x000000010c7f2c13 chromedriver + 293907
5   chromedriver                        0x000000010c80f782 chromedriver + 411522
6   chromedriver                        0x000000010c89c92b chromedriver + 989483
7   chromedriver                        0x000000010c87d853 chromedriver + 862291
8   chromedriver                        0x000000010c84d5c6 chromedriver + 665030
9   chromedriver                        0x000000010c84de4e chromedriver + 667214
10  chromedriver                        0x000000010cc5bd00 chromedriver + 4918528
11  chromedriver                        0x000000010cc60cfd chromedriver + 4939005
12  chromedriver                        0x000000010cc613d5 chromedriver + 4940757
13  chromedriver                        0x000000010cc3cde4 chromedriver + 4791780
14  chromedriver                        0x000000010cc616c9 chromedriver + 4941513
15  chromedriver                        0x000000010cc2e5b4 chromedriver + 4732340
16  chromedriver                        0x000000010cc81898 chromedriver + 5073048
17  chromedriver                        0x000000010cc81a57 chromedriver + 5073495
18  chromedriver                        0x000000010cc90b6e chromedriver + 5135214
19  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
20  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-14 18:11:45,469 - INFO - fast_api_main/ Sending review at 1720995105.469095
2024-07-14 18:11:45,469 - ERROR - fast_api_main/ Error navigating to reviews for Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO, 53CT46: Message: disconnected: not connected to DevTools
  (failed to check if window was closed: disconnected: not connected to DevTools)
  (Session info: chrome-headless-shell=126.0.6478.127)
Stacktrace:
0   chromedriver                        0x000000010cc990e8 chromedriver + 5169384
1   chromedriver                        0x000000010cc90fba chromedriver + 5136314
2   chromedriver                        0x000000010c80d36c chromedriver + 402284
3   chromedriver                        0x000000010c7f2d26 chromedriver + 294182
4   chromedriver                        0x000000010c7f2c13 chromedriver + 293907
5   chromedriver                        0x000000010c80f782 chromedriver + 411522
6   chromedriver                        0x000000010c89c92b chromedriver + 989483
7   chromedriver                        0x000000010c87d853 chromedriver + 862291
8   chromedriver                        0x000000010c84d5c6 chromedriver + 665030
9   chromedriver                        0x000000010c84de4e chromedriver + 667214
10  chromedriver                        0x000000010cc5bd00 chromedriver + 4918528
11  chromedriver                        0x000000010cc60cfd chromedriver + 4939005
12  chromedriver                        0x000000010cc613d5 chromedriver + 4940757
13  chromedriver                        0x000000010cc3cde4 chromedriver + 4791780
14  chromedriver                        0x000000010cc616c9 chromedriver + 4941513
15  chromedriver                        0x000000010cc2e5b4 chromedriver + 4732340
16  chromedriver                        0x000000010cc81898 chromedriver + 5073048
17  chromedriver                        0x000000010cc81a57 chromedriver + 5073495
18  chromedriver                        0x000000010cc90b6e chromedriver + 5135214
19  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
20  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-14 18:11:45,469 - ERROR - fast_api_main/ Error navigating to reviews for Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC18: Message: disconnected: not connected to DevTools
  (failed to check if window was closed: disconnected: not connected to DevTools)
  (Session info: chrome-headless-shell=126.0.6478.127)
Stacktrace:
0   chromedriver                        0x000000010cc990e8 chromedriver + 5169384
1   chromedriver                        0x000000010cc90fba chromedriver + 5136314
2   chromedriver                        0x000000010c80d36c chromedriver + 402284
3   chromedriver                        0x000000010c7f2d26 chromedriver + 294182
4   chromedriver                        0x000000010c7f2c13 chromedriver + 293907
5   chromedriver                        0x000000010c80f782 chromedriver + 411522
6   chromedriver                        0x000000010c89c92b chromedriver + 989483
7   chromedriver                        0x000000010c87d853 chromedriver + 862291
8   chromedriver                        0x000000010c84d5c6 chromedriver + 665030
9   chromedriver                        0x000000010c84de4e chromedriver + 667214
10  chromedriver                        0x000000010cc5bd00 chromedriver + 4918528
11  chromedriver                        0x000000010cc60cfd chromedriver + 4939005
12  chromedriver                        0x000000010cc613d5 chromedriver + 4940757
13  chromedriver                        0x000000010cc3cde4 chromedriver + 4791780
14  chromedriver                        0x000000010cc616c9 chromedriver + 4941513
15  chromedriver                        0x000000010cc2e5b4 chromedriver + 4732340
16  chromedriver                        0x000000010cc81898 chromedriver + 5073048
17  chromedriver                        0x000000010cc81a57 chromedriver + 5073495
18  chromedriver                        0x000000010cc90b6e chromedriver + 5135214
19  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
20  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-14 18:11:45,469 - INFO - fast_api_main/ Sending review at 1720995105.469294
2024-07-14 18:11:45,469 - INFO - fast_api_main/ Sending review at 1720995105.4693298
2024-07-14 18:11:45,469 - INFO - fast_api_main/ Sending review at 1720995105.4693608
2024-07-14 18:11:45,469 - INFO - fast_api_main/ Sending review at 1720995105.469454
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-14 18:11:45,473 - INFO - WebSocket disconnected
2024-07-14 18:11:45,473 - WARNING - WebSocket already closed
INFO:     connection closed
INFO:     127.0.0.1:55942 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55943 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56017 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56018 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56066 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56067 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56147 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56148 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56258 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56259 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56305 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56306 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56338 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56339 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56371 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56372 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56405 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56406 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56438 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56439 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56470 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56471 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56505 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56506 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56544 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56545 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56578 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56579 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56611 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56612 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56652 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56653 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56686 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56686 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
2024-07-14 19:34:01,583 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 19:34:01,586 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 19:34:01,587 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 19:36:02,718 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 19:36:02,763 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 19:36:02,763 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 19:36:02,764 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 121.13047099113464
INFO:     127.0.0.1:56691 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 19:36:07,889 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 19:36:07,889 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 19:36:07,890 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 19:36:07,948 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 19:36:07,954 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 19:36:07,954 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 19:36:07,960 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.058356285095214844
INFO:     127.0.0.1:56712 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 19:38:33,898 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 19:38:33,899 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 19:38:33,899 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 19:38:33,982 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 19:38:33,984 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 19:38:33,984 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 19:38:33,986 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.08272409439086914
INFO:     127.0.0.1:56715 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 3 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 19:38:39,033 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 19:38:39,034 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 19:38:39,034 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 19:38:39,257 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 19:38:39,273 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 19:38:39,273 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 19:38:39,275 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.22358393669128418
INFO:     127.0.0.1:56729 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 4 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 19:38:44,304 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 19:38:44,304 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 19:38:44,304 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 19:38:44,390 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 19:38:44,391 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 19:38:44,391 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 19:38:44,392 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.0854499340057373
INFO:     127.0.0.1:56734 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 5 failed: 500 - {"detail":"Internal Server Error"}
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
INFO:     127.0.0.1:56761 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56762 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56809 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56810 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56849 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56850 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56919 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56920 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56962 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56963 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57002 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57003 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57044 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57045 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57105 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57106 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57146 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57147 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57181 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57182 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57218 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57219 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57256 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57257 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57298 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57299 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57338 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57339 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57384 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57385 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57430 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57431 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57464 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57465 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57501 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57502 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57535 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57536 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57569 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57570 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57602 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57603 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57638 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57639 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57670 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57671 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57705 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57706 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57740 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57741 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57784 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57785 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57817 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57818 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57850 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57851 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57884 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57885 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57919 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57920 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57952 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57953 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57986 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57987 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58019 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58020 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58049 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58050 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58083 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58084 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58118 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58119 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58153 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58154 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58186 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58187 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58224 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58225 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58256 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58257 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58289 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58290 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58321 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58322 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58357 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58358 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58389 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58390 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58423 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58424 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58461 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58462 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58491 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58492 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58526 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58527 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58561 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58562 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58613 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58614 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58657 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58658 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58692 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58693 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58727 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58728 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58761 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58762 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58798 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58799 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58837 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58838 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58890 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58891 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58930 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58931 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58979 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58980 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59014 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59015 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59047 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59048 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59081 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59082 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59120 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59121 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59154 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59155 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59191 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59192 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59227 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59228 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59281 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59282 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59330 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59331 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59366 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59367 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59400 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59401 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59434 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59435 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59470 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59471 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59503 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59504 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59538 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59539 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59582 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59583 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59615 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59616 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59649 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59650 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59681 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59682 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59722 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59723 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59757 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59758 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59789 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59790 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59820 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59821 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59855 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59856 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59888 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59889 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59924 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59925 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59957 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59958 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59992 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59993 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60025 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60026 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60060 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60061 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60094 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60095 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60128 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60129 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60163 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60164 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60195 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60196 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60229 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60230 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60264 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60265 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60296 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60297 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60329 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60330 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60365 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60366 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60398 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60399 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60435 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60436 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60467 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60468 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60498 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60499 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60534 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60535 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60569 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60570 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60607 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60608 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60639 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60640 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60674 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60675 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60709 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60710 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60743 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60744 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60776 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60777 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60811 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60812 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60844 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60845 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60878 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60879 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60912 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60913 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60944 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60945 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60980 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60981 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61014 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61015 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61048 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61049 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61084 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61085 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61116 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61117 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61151 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61152 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61196 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61197 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61228 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61229 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61266 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61267 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61297 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61298 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61332 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61333 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61364 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61365 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61399 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61400 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61434 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61435 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61469 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61470 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61512 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61513 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61546 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61547 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61580 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61581 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61619 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61620 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61652 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61653 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61686 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61687 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61718 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61719 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61750 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61751 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61784 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61785 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61817 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61818 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61849 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61850 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61887 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61888 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61918 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61919 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61951 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61952 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61984 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:61985 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62022 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62023 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62055 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62056 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62089 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62090 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62128 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62129 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62159 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62160 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62191 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62192 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62222 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62223 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62257 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62258 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62291 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62292 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62322 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62323 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62357 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62358 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62389 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62390 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62421 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62422 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62454 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62455 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62488 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62489 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62521 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62522 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62554 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62555 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62587 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62588 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62621 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62622 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62653 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62654 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62686 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62687 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62721 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62722 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62753 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62754 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62788 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62789 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62820 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62821 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62865 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62866 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62926 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62927 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62969 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:62970 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63009 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63010 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63062 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63063 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63099 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63100 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63134 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63135 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63177 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63178 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63214 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63215 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63257 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63258 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63296 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63297 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63334 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63335 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63373 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63374 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63418 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63419 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63464 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63465 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63509 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63510 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63549 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63550 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63594 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63595 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63635 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63636 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63668 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63669 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63712 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63713 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63760 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63761 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63807 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63808 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63850 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63851 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63889 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63890 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63925 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63926 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63965 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:63966 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64032 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64033 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64071 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64072 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64105 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64106 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64145 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64146 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64180 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64181 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64223 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64224 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64269 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64270 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64309 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64310 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64353 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64354 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64392 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64393 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64426 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64427 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64516 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64517 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64547 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64548 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64596 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64597 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64654 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64655 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64685 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64686 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64717 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64718 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64750 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64751 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64782 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64783 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64821 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64822 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64861 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64862 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64893 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64894 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64950 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64951 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64984 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:64985 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65025 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65026 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65068 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65069 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65101 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65102 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65135 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65136 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65167 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65168 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65227 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65228 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65261 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65262 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65322 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65323 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65363 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65364 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65440 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65441 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65484 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65485 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65530 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:65531 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49197 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49198 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49241 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49242 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
2024-07-14 23:37:36,507 - INFO -  fast_api_main/ Adding new session ID 24c0bfd5-f01c-4cd7-8988-048e59b6691c to session_store
2024-07-14 23:37:36,512 - INFO - fast_api_main/ Received question: hammer with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-14 23:37:36,515 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-14 23:37:36,516 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:37:37,119 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:37:37,124 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:37:37,124 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:37:37,125 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.5983941555023193
INFO:     127.0.0.1:49281 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:37:42,154 - INFO - fast_api_main/ Received question: hammer with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-14 23:37:42,154 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-14 23:37:42,154 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:37:42,203 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:37:42,205 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:37:42,205 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:37:42,208 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04839682579040527
INFO:     127.0.0.1:49287 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:37:47,287 - INFO - fast_api_main/ Received question: hammer with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-14 23:37:47,287 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-14 23:37:47,287 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:37:47,331 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:37:47,332 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:37:47,333 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:37:47,337 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.043884992599487305
INFO:     127.0.0.1:49292 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 3 failed: 500 - {"detail":"Internal Server Error"}
INFO:     127.0.0.1:49296 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49297 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
2024-07-14 23:37:52,382 - INFO - fast_api_main/ Received question: hammer with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-14 23:37:52,382 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-14 23:37:52,383 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:37:52,437 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:37:52,443 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:37:52,443 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:37:52,448 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.053671836853027344
INFO:     127.0.0.1:49298 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 4 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:37:57,478 - INFO - fast_api_main/ Received question: hammer with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-14 23:37:57,478 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-14 23:37:57,478 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:37:57,521 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:37:57,524 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:37:57,524 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:37:57,528 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04288196563720703
INFO:     127.0.0.1:49301 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 5 failed: 500 - {"detail":"Internal Server Error"}
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
INFO:     127.0.0.1:49338 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49339 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
2024-07-14 23:39:23,044 - INFO - fast_api_main/ Received question: hammer with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-14 23:39:23,046 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-14 23:39:23,046 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:39:23,166 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:23,222 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:39:23,224 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:23,228 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.11830902099609375
INFO:     127.0.0.1:49360 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-14 23:39:23,234 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 23:39:23,235 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 23:39:23,235 - INFO - fast_api_main/ Processing question: hammer
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:39:23,283 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:23,288 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:39:23,288 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:23,292 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.047605037689208984
INFO:     127.0.0.1:49361 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:39:28,291 - INFO - fast_api_main/ Received question: hammer with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-14 23:39:28,291 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-14 23:39:28,291 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:39:28,345 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:28,351 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:39:28,352 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:28,357 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.054364919662475586
INFO:     127.0.0.1:49364 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:39:28,365 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 23:39:28,365 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 23:39:28,366 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:39:28,409 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:28,411 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:39:28,412 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:28,413 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04365110397338867
INFO:     127.0.0.1:49365 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:39:33,483 - INFO - fast_api_main/ Received question: hammer with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-14 23:39:33,485 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-14 23:39:33,486 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:39:33,564 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:33,567 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:39:33,568 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:33,569 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.07771682739257812
INFO:     127.0.0.1:49372 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-14 23:39:33,571 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 23:39:33,571 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 23:39:33,571 - INFO - fast_api_main/ Processing question: hammer
ERROR:root:Attempt 3 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:39:33,616 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:33,618 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:39:33,618 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:33,619 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04408001899719238
INFO:     127.0.0.1:49373 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 3 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:39:38,608 - INFO - fast_api_main/ Received question: hammer with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-14 23:39:38,608 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-14 23:39:38,608 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:39:38,653 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:38,655 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:39:38,655 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:38,656 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04503488540649414
INFO:     127.0.0.1:49376 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 4 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:39:38,658 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 23:39:38,658 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 23:39:38,658 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:39:38,701 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:38,703 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:39:38,703 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:39:38,707 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04223799705505371
INFO:     127.0.0.1:49377 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 4 failed: 500 - {"detail":"Internal Server Error"}
2024-07-14 23:44:58,741 - INFO - fast_api_main/ Received question: hammer with session_id: 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46
2024-07-14 23:44:58,741 - INFO - fast_api_main/ Current chat history for session_id 0b0c62e0-a2fa-41fb-9bf2-56ed85ee2c46: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 45RC15: 8 oz Head Weight, 7/8 in Face Diameter, 11 in Overall Length, WESTWARD Brand\n- 45RC16: 16 oz Head Weight, 1 1/8 in Face Diameter, 13 in Overall Length, WESTWARD Brand  \n- 45RC17: 24 oz Head Weight, 1 3/8 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC18: 32 oz Head Weight, 1 1/2 in Face Diameter, 15 in Overall Length, WESTWARD Brand\n- 45RC19: 40 oz Head Weight, 1 5/8 in Face Diameter, 16 in Overall Length, WESTWARD Brand \n- 53CT46: 12 oz Head Weight, 1 in Face Diameter, 12 in Overall Length, PROTO Brand. CUSTOMER ATTRIBUTES: {}']
2024-07-14 23:44:58,742 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:44:58,800 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:44:58,808 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:44:58,809 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:44:58,816 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.05848097801208496
INFO:     127.0.0.1:49383 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-14 23:44:58,819 - INFO - fast_api_main/ Received question: hammer with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-14 23:44:58,820 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-14 23:44:58,821 - INFO - fast_api_main/ Processing question: hammer
2024-07-14 23:44:58,878 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:44:58,883 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-14 23:44:58,885 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-14 23:44:58,891 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.056491851806640625
INFO:     127.0.0.1:49384 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 5 failed: 500 - {"detail":"Internal Server Error"}
ERROR:root:Attempt 5 failed: 500 - {"detail":"Internal Server Error"}
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
INFO:     127.0.0.1:49393 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49394 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49433 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49434 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49474 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49475 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49519 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49520 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49561 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49562 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49609 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49610 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49654 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49655 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49702 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49703 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49742 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49743 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49786 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49787 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49829 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49830 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49868 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49869 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49905 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49906 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49941 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49942 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49984 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49985 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50027 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50028 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50078 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50079 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
2024-07-15 08:57:01,995 - INFO - fast_api_main/ Received question: hammer  with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-15 08:57:01,996 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-15 08:57:01,996 - INFO - fast_api_main/ Processing question: hammer 
2024-07-15 08:57:20,430 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 08:57:20,436 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 08:57:20,436 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 08:57:20,438 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 18.4336998462677
INFO:     127.0.0.1:50097 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 08:57:25,461 - INFO - fast_api_main/ Received question: hammer  with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-15 08:57:25,461 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-15 08:57:25,461 - INFO - fast_api_main/ Processing question: hammer 
2024-07-15 08:57:25,502 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 08:57:25,504 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 08:57:25,504 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 08:57:25,505 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04079580307006836
INFO:     127.0.0.1:50119 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 08:57:30,523 - INFO - fast_api_main/ Received question: hammer  with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-15 08:57:30,523 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-15 08:57:30,523 - INFO - fast_api_main/ Processing question: hammer 
2024-07-15 08:57:30,565 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 08:57:30,566 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 08:57:30,567 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 08:57:30,567 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.042177677154541016
INFO:     127.0.0.1:50414 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 3 failed: 500 - {"detail":"Internal Server Error"}
INFO:     127.0.0.1:50415 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50416 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
2024-07-15 08:57:35,590 - INFO - fast_api_main/ Received question: hammer  with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-15 08:57:35,591 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-15 08:57:35,591 - INFO - fast_api_main/ Processing question: hammer 
2024-07-15 08:57:35,647 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 08:57:35,649 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 08:57:35,649 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 08:57:35,650 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.055528879165649414
INFO:     127.0.0.1:50419 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 4 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 08:57:40,669 - INFO - fast_api_main/ Received question: hammer  with session_id: 24c0bfd5-f01c-4cd7-8988-048e59b6691c
2024-07-15 08:57:40,669 - INFO - fast_api_main/ Current chat history for session_id 24c0bfd5-f01c-4cd7-8988-048e59b6691c: []
2024-07-15 08:57:40,669 - INFO - fast_api_main/ Processing question: hammer 
2024-07-15 08:57:40,711 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 08:57:40,713 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 08:57:40,713 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 08:57:40,714 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04196524620056152
INFO:     127.0.0.1:50423 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 5 failed: 500 - {"detail":"Internal Server Error"}
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
INFO:     127.0.0.1:50453 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50454 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50488 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50489 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50519 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50520 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50552 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50553 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50583 - "GET /_stcore/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50584 - "GET /_stcore/host-config HTTP/1.1" 404 Not Found
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-15 10:38:59,856 - INFO - Found credentials in environment variables.
2024-07-15 10:39:00,240 - INFO - Initializing Bedrock clients...
2024-07-15 10:39:00.403 Port 8505 is already in use
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-15 10:39:00,462 - INFO - Initializing Titan Embeddings Model...
2024-07-15 10:39:00,462 - INFO - Titan Embeddings Model initialized.
2024-07-15 10:39:00,462 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-15 10:39:00,657 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 10:39:00,657 - ERROR - Error loading serialized_documents_file at /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 10:39:00,657 - INFO - Generating new df
2024-07-15 10:39:01,879 - INFO - Structured documents created:
2024-07-15 10:39:01,879 - INFO - Document 1 of 11424:
2024-07-15 10:39:01,879 - INFO - 3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy OHAUS <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspend
2024-07-15 10:39:01,879 - INFO - Document 2 of 11424:
2024-07-15 10:39:01,879 - INFO - 3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black GEORGIA-PACIFIC <p>Motion-activated paper towel dispensers offer hands-free dispensing to help im
2024-07-15 10:39:01,879 - INFO - Document 3 of 11424:
2024-07-15 10:39:01,879 - INFO - 5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK TOUGH GUY <p>Compostable trash bags collect compostable waste for use in commercial composting f
2024-07-15 10:39:01,879 - INFO - Document 4 of 11424:
2024-07-15 10:39:01,879 - INFO - 14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow PELICAN <p>These safety-rated flashlights set their head in line with their body for a tradi
2024-07-15 10:39:01,879 - INFO - Document 5 of 11424:
2024-07-15 10:39:01,879 - INFO - 4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK TOUGH GUY <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightwei
2024-07-15 10:39:01,925 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 10:39:01,926 - INFO - Creating FAISS vector store from structured documents...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-15 10:39:47,551 - INFO - Found credentials in environment variables.
2024-07-15 10:39:48,042 - INFO - Initializing Bedrock clients...
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-15 10:39:48,327 - INFO - Initializing Titan Embeddings Model...
2024-07-15 10:39:48,327 - INFO - Titan Embeddings Model initialized.
2024-07-15 10:39:48,327 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-15 10:39:48,545 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 10:39:48,546 - INFO - Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
2024-07-15 10:39:48,632 - INFO - Documents file loaded successfully!
2024-07-15 10:39:48,633 - INFO - Structured documents created:
2024-07-15 10:39:48,633 - INFO - Document 1 of 11424:
2024-07-15 10:39:48,633 - INFO - 3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy OHAUS <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspend
2024-07-15 10:39:48,633 - INFO - Document 2 of 11424:
2024-07-15 10:39:48,633 - INFO - 3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black GEORGIA-PACIFIC <p>Motion-activated paper towel dispensers offer hands-free dispensing to help im
2024-07-15 10:39:48,633 - INFO - Document 3 of 11424:
2024-07-15 10:39:48,633 - INFO - 5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK TOUGH GUY <p>Compostable trash bags collect compostable waste for use in commercial composting f
2024-07-15 10:39:48,633 - INFO - Document 4 of 11424:
2024-07-15 10:39:48,633 - INFO - 14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow PELICAN <p>These safety-rated flashlights set their head in line with their body for a tradi
2024-07-15 10:39:48,633 - INFO - Document 5 of 11424:
2024-07-15 10:39:48,634 - INFO - 4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK TOUGH GUY <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightwei
2024-07-15 10:39:48,684 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 10:39:48,684 - INFO - Creating FAISS vector store from structured documents...
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:Attempt 3 failed: [Errno 61] Connection refused
ERROR:root:Attempt 4 failed: [Errno 61] Connection refused
ERROR:root:Attempt 5 failed: [Errno 61] Connection refused
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-15 10:50:30,852 - INFO - Found credentials in environment variables.
2024-07-15 10:50:31,242 - INFO - Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-15 10:50:31,375 - INFO - Initializing Titan Embeddings Model...
2024-07-15 10:50:31,375 - INFO - Titan Embeddings Model initialized.
2024-07-15 10:50:31,375 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-15 10:50:31,468 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 10:50:31,468 - INFO - Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
2024-07-15 10:50:31,488 - INFO - Documents file loaded successfully!
2024-07-15 10:50:31,488 - INFO - Structured documents created:
2024-07-15 10:50:31,488 - INFO - Document 1 of 11424:
2024-07-15 10:50:31,488 - INFO - 3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy OHAUS <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspend
2024-07-15 10:50:31,488 - INFO - Document 2 of 11424:
2024-07-15 10:50:31,488 - INFO - 3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black GEORGIA-PACIFIC <p>Motion-activated paper towel dispensers offer hands-free dispensing to help im
2024-07-15 10:50:31,488 - INFO - Document 3 of 11424:
2024-07-15 10:50:31,488 - INFO - 5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK TOUGH GUY <p>Compostable trash bags collect compostable waste for use in commercial composting f
2024-07-15 10:50:31,488 - INFO - Document 4 of 11424:
2024-07-15 10:50:31,488 - INFO - 14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow PELICAN <p>These safety-rated flashlights set their head in line with their body for a tradi
2024-07-15 10:50:31,488 - INFO - Document 5 of 11424:
2024-07-15 10:50:31,488 - INFO - 4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK TOUGH GUY <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightwei
2024-07-15 10:50:31,513 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 10:50:31,513 - INFO - Creating FAISS vector store from structured documents...

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:Attempt 3 failed: [Errno 61] Connection refused
ERROR:root:Attempt 4 failed: [Errno 61] Connection refused
ERROR:root:Attempt 5 failed: [Errno 61] Connection refused
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:Attempt 3 failed: [Errno 61] Connection refused
ERROR:root:Attempt 4 failed: [Errno 61] Connection refused
ERROR:root:Attempt 5 failed: [Errno 61] Connection refused
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_community/embeddings/bedrock.py", line 135, in _embedding_func
    response = self.client.invoke_model(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.errorfactory.ModelTimeoutException: An error occurred (ModelTimeoutException) when calling the InvokeModel operation: Model has timed out in processing the request. Try your request again. RequestID: c1dda60e-faba-4198-9aa3-1b9ab539ab9a

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/bin/uvicorn", line 11, in <module>
    sys.exit(main())
             ^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 410, in main
    run(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 577, in run
    server.run()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1517, in uvloop.loop.Loop.run_until_complete
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 55, in <module>
    resource_manager = ResourceManager()
                       ^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 37, in __init__
    self.bedrock_embeddings, self.vectorstore_faiss_doc, self.df, self.llm = initialize_embeddings_and_faiss()
                                                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/document.py", line 127, in initialize_embeddings_and_faiss
    vectorstore_faiss_doc = FAISS.from_documents(documents, bedrock_embeddings)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/vectorstores.py", line 635, in from_documents
    return cls.from_texts(texts, embedding, metadatas=metadatas, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 930, in from_texts
    embeddings = embedding.embed_documents(texts)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_community/embeddings/bedrock.py", line 169, in embed_documents
    response = self._embedding_func(text)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_community/embeddings/bedrock.py", line 150, in _embedding_func
    raise ValueError(f"Error raised by inference endpoint: {e}")
ValueError: Error raised by inference endpoint: An error occurred (ModelTimeoutException) when calling the InvokeModel operation: Model has timed out in processing the request. Try your request again. RequestID: c1dda60e-faba-4198-9aa3-1b9ab539ab9a
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-15 10:59:42,550 - INFO - Found credentials in environment variables.
2024-07-15 10:59:42,886 - INFO - Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-15 10:59:43,023 - INFO - Initializing Titan Embeddings Model...
2024-07-15 10:59:43,023 - INFO - Titan Embeddings Model initialized.
2024-07-15 10:59:43,023 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-15 10:59:43,228 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 10:59:43,228 - INFO - Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
2024-07-15 10:59:43,250 - INFO - Documents file loaded successfully!
2024-07-15 10:59:43,250 - INFO - Structured documents created:
2024-07-15 10:59:43,250 - INFO - Document 1 of 11424:
2024-07-15 10:59:43,250 - INFO - 3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy OHAUS <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspend
2024-07-15 10:59:43,250 - INFO - Document 2 of 11424:
2024-07-15 10:59:43,250 - INFO - 3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black GEORGIA-PACIFIC <p>Motion-activated paper towel dispensers offer hands-free dispensing to help im
2024-07-15 10:59:43,250 - INFO - Document 3 of 11424:
2024-07-15 10:59:43,250 - INFO - 5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK TOUGH GUY <p>Compostable trash bags collect compostable waste for use in commercial composting f
2024-07-15 10:59:43,250 - INFO - Document 4 of 11424:
2024-07-15 10:59:43,250 - INFO - 14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow PELICAN <p>These safety-rated flashlights set their head in line with their body for a tradi
2024-07-15 10:59:43,250 - INFO - Document 5 of 11424:
2024-07-15 10:59:43,250 - INFO - 4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK TOUGH GUY <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightwei
2024-07-15 10:59:43,276 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 10:59:43,276 - INFO - Creating FAISS vector store from structured documents...

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:Attempt 3 failed: [Errno 61] Connection refused
ERROR:root:Attempt 3 failed: [Errno 61] Connection refused
ERROR:root:Attempt 4 failed: [Errno 61] Connection refused
ERROR:root:Attempt 4 failed: [Errno 61] Connection refused
ERROR:root:Attempt 5 failed: [Errno 61] Connection refused
ERROR:root:Attempt 5 failed: [Errno 61] Connection refused
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
2024-07-15 11:01:18,494 - INFO - Loading faiss with AVX2 support.
2024-07-15 11:01:18,514 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-15 11:01:19,687 - INFO - FAISS vector store created.
2024-07-15 11:01:19,687 - INFO - Serializing FAISS vector store to /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 11:01:19,884 - INFO - FAISS vector store serialized to pickle file.
2024-07-15 11:01:19,890 - INFO - Initializing ChromeDriver...
2024-07-15 11:01:19,890 - INFO - ====== WebDriver manager ======
2024-07-15 11:01:20,252 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 11:01:21,445 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 11:01:21,507 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 11:01:21,601 - INFO - WebDriver version 126.0.6478.126 selected
2024-07-15 11:01:21,602 - INFO - Modern chrome version https://storage.googleapis.com/chrome-for-testing-public/126.0.6478.126/mac-x64/chromedriver-mac-x64.zip
2024-07-15 11:01:21,602 - INFO - About to download new driver from https://storage.googleapis.com/chrome-for-testing-public/126.0.6478.126/mac-x64/chromedriver-mac-x64.zip
2024-07-15 11:01:21,782 - INFO - Driver downloading response is 200
2024-07-15 11:01:22,184 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 11:01:22,347 - INFO - Driver has been saved in cache [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126]
2024-07-15 11:01:23,087 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [21770]
INFO:     Waiting for application startup.
2024-07-15 11:01:23,107 - INFO - Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2024-07-15 11:05:48,290 - INFO -  fast_api_main/ Adding new session ID eaf83617-99cb-4722-9fa0-d8fab286fdef to session_store
2024-07-15 11:05:48,290 - INFO - fast_api_main/ Received question: hammer with session_id: eaf83617-99cb-4722-9fa0-d8fab286fdef
2024-07-15 11:05:48,290 - INFO - fast_api_main/ Current chat history for session_id eaf83617-99cb-4722-9fa0-d8fab286fdef: []
2024-07-15 11:05:48,290 - INFO - fast_api_main/ Processing question: hammer
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 11:05:49,096 - INFO - chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 11:05:59,389 - INFO - chat_processor/ chat_procesing: message: Here are the hammers available from the catalog:
- 53CT46: Hammer with 12 oz head weight, 1 in face diameter, 12 in overall length, and textured grip from PROTO  
- 45RC16: Hammer with 16 oz head weight, 1 1/8 in face diameter, 13 in overall length, and textured grip from WESTWARD
- 53CT50: Hammer with 24 oz head weight, 1 3/8 in face diameter, 14 in overall length, and textured grip from PROTO
- 45RC17: Hammer with 24 oz head weight, 1 3/8 in face diameter, 15 in overall length, and textured grip from WESTWARD  
- 45RC18: Hammer with 32 oz head weight, 1 1/2 in face diameter, 15 in overall length, and textured grip from WESTWARD
- 45RC19: Hammer with 40 oz head weight, 1 5/8 in face diameter, 16 in overall length, and textured grip from WESTWARD
2024-07-15 11:05:59,389 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO', 'code': '53CT46'}, {'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 14 in Overall Lg, Textured Grip PROTO', 'code': '53CT50'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC19'}]}
2024-07-15 11:05:59,389 - INFO - fast_api_main/ Message: Here are the hammers available from the catalog:
- 53CT46: Hammer with 12 oz head weight, 1 in face diameter, 12 in overall length, and textured grip from PROTO  
- 45RC16: Hammer with 16 oz head weight, 1 1/8 in face diameter, 13 in overall length, and textured grip from WESTWARD
- 53CT50: Hammer with 24 oz head weight, 1 3/8 in face diameter, 14 in overall length, and textured grip from PROTO
- 45RC17: Hammer with 24 oz head weight, 1 3/8 in face diameter, 15 in overall length, and textured grip from WESTWARD  
- 45RC18: Hammer with 32 oz head weight, 1 1/2 in face diameter, 15 in overall length, and textured grip from WESTWARD
- 45RC19: Hammer with 40 oz head weight, 1 5/8 in face diameter, 16 in overall length, and textured grip from WESTWARD
2024-07-15 11:05:59,389 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO', 'code': '53CT46'}, {'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 14 in Overall Lg, Textured Grip PROTO', 'code': '53CT50'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC19'}]}
2024-07-15 11:05:59,389 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-15 11:05:59,389 - INFO - fast_api_main/ Time to get attributes: 0.8060848712921143
2024-07-15 11:05:59,389 - INFO - fast_api_main/ Updated chat history for session_id eaf83617-99cb-4722-9fa0-d8fab286fdef: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 53CT46: Hammer with 12 oz head weight, 1 in face diameter, 12 in overall length, and textured grip from PROTO  \n- 45RC16: Hammer with 16 oz head weight, 1 1/8 in face diameter, 13 in overall length, and textured grip from WESTWARD\n- 53CT50: Hammer with 24 oz head weight, 1 3/8 in face diameter, 14 in overall length, and textured grip from PROTO\n- 45RC17: Hammer with 24 oz head weight, 1 3/8 in face diameter, 15 in overall length, and textured grip from WESTWARD  \n- 45RC18: Hammer with 32 oz head weight, 1 1/2 in face diameter, 15 in overall length, and textured grip from WESTWARD\n- 45RC19: Hammer with 40 oz head weight, 1 5/8 in face diameter, 16 in overall length, and textured grip from WESTWARD. CUSTOMER ATTRIBUTES: {}']
2024-07-15 11:05:59,389 - INFO - fast_api_main/ Processed question: hammer with message: Here are the hammers available from the catalog:
- 53CT46: Hammer with 12 oz head weight, 1 in face diameter, 12 in overall length, and textured grip from PROTO  
- 45RC16: Hammer with 16 oz head weight, 1 1/8 in face diameter, 13 in overall length, and textured grip from WESTWARD
- 53CT50: Hammer with 24 oz head weight, 1 3/8 in face diameter, 14 in overall length, and textured grip from PROTO
- 45RC17: Hammer with 24 oz head weight, 1 3/8 in face diameter, 15 in overall length, and textured grip from WESTWARD  
- 45RC18: Hammer with 32 oz head weight, 1 1/2 in face diameter, 15 in overall length, and textured grip from WESTWARD
- 45RC19: Hammer with 40 oz head weight, 1 5/8 in face diameter, 16 in overall length, and textured grip from WESTWARD
2024-07-15 11:05:59,389 - INFO - fast_api_main/ Products retrieved: [{'product': 'Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO', 'code': '53CT46'}, {'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 14 in Overall Lg, Textured Grip PROTO', 'code': '53CT50'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD', 'code': '45RC19'}]
Invalid JSON: 

Time for extract_customer_attributes: 0.8048617839813232
Time for split_process_and_message_from_response: 0.00013899803161621094
INFO:     127.0.0.1:55000 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 11:05:59,417 - INFO - fast_api_main/ Fetching images for products: ['Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO, 53CT46', 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD, 45RC16', 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 14 in Overall Lg, Textured Grip PROTO, 53CT50', 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC17', 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC18', 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD, 45RC19']
2024-07-15 11:05:59,417 - INFO - grainger_image_util item.part[-1]: 53CT46 item.part[0]: Hammer: Fiberglass
2024-07-15 11:05:59,420 - INFO - grainger_image_util item.part[-1]: 45RC16 item.part[0]: Hammer: Fiberglass
2024-07-15 11:05:59,422 - INFO - grainger_image_util item.part[-1]: 53CT50 item.part[0]: Hammer: Fiberglass
2024-07-15 11:05:59,423 - INFO - grainger_image_util item.part[-1]: 45RC17 item.part[0]: Hammer: Fiberglass
2024-07-15 11:05:59,425 - INFO - grainger_image_util item.part[-1]: 45RC18 item.part[0]: Hammer: Fiberglass
2024-07-15 11:05:59,427 - INFO - grainger_image_util item.part[-1]: 45RC19 item.part[0]: Hammer: Fiberglass
2024-07-15 11:06:00,091 - INFO - fast_api_main/ Total time to fetch images: 0.008638143539428711 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/53CT48-A0075-1_v1?$lgmain$ for 53CT46 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC16 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/53CT48-A0075-1_v1?$lgmain$ for 53CT50 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC17 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC18 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC19 in 0.00 seconds
INFO:     127.0.0.1:55006 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 11:06:00,690 - INFO - fast_api_main/ Starting reviews at 1721055960.690355
INFO:     ('127.0.0.1', 55014) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 11:06:00,691 - INFO - fast_api_main/ Sending review at 1721055960.691804
2024-07-15 11:06:00,691 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC17
2024-07-15 11:06:00,692 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip WESTWARD, 45RC18
2024-07-15 11:06:00,693 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 12 oz Head Wt, 1 in Face Dia, 12 in Overall Lg, Textured Grip PROTO, 53CT46
2024-07-15 11:06:00,694 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 14 in Overall Lg, Textured Grip PROTO, 53CT50
2024-07-15 11:06:00,695 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip WESTWARD, 45RC19
2024-07-15 11:06:00,696 - INFO - fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD, 45RC16
2024-07-15 11:06:35,859 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 11:06:51,855 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 11:06:51,868 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 11:06:52,058 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 11:06:52,061 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 11:06:52,063 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 11:06:52,357 - ERROR - fast_api_main/ Error navigating to reviews for Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip WESTWARD, 45RC16: Message: 
Stacktrace:
0   chromedriver                        0x0000000101b200e8 chromedriver + 5169384
1   chromedriver                        0x0000000101b17fba chromedriver + 5136314
2   chromedriver                        0x000000010169436c chromedriver + 402284
3   chromedriver                        0x00000001016e1740 chromedriver + 718656
4   chromedriver                        0x00000001016e1a01 chromedriver + 719361
5   chromedriver                        0x0000000101726bc4 chromedriver + 1002436
6   chromedriver                        0x0000000101704add chromedriver + 862941
7   chromedriver                        0x0000000101723f57 chromedriver + 991063
8   chromedriver                        0x0000000101704853 chromedriver + 862291
9   chromedriver                        0x00000001016d45c6 chromedriver + 665030
10  chromedriver                        0x00000001016d4e4e chromedriver + 667214
11  chromedriver                        0x0000000101ae2d00 chromedriver + 4918528
12  chromedriver                        0x0000000101ae7cfd chromedriver + 4939005
13  chromedriver                        0x0000000101ae83d5 chromedriver + 4940757
14  chromedriver                        0x0000000101ac3de4 chromedriver + 4791780
15  chromedriver                        0x0000000101ae86c9 chromedriver + 4941513
16  chromedriver                        0x0000000101ab55b4 chromedriver + 4732340
17  chromedriver                        0x0000000101b08898 chromedriver + 5073048
18  chromedriver                        0x0000000101b08a57 chromedriver + 5073495
19  chromedriver                        0x0000000101b17b6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 11:06:52,357 - INFO - fast_api_main/ Sending review at 1721056012.357955
2024-07-15 11:06:53,150 - INFO - fast_api_main/ Reviews for product 45RC17: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
2024-07-15 11:06:53,259 - INFO - fast_api_main/ Reviews for product 45RC18: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
2024-07-15 11:06:53,368 - INFO - fast_api_main/ Reviews for product 53CT50: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
2024-07-15 11:06:53,595 - INFO - fast_api_main/ Reviews for product 53CT46: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
2024-07-15 11:06:53,595 - INFO - fast_api_main/ Sending review at 1721056013.595666
2024-07-15 11:06:53,595 - INFO - fast_api_main/ Sending review at 1721056013.595926
2024-07-15 11:06:53,596 - INFO - fast_api_main/ Sending review at 1721056013.59604
2024-07-15 11:06:53,596 - INFO - fast_api_main/ Sending review at 1721056013.596151
2024-07-15 11:06:53,889 - INFO - fast_api_main/ Reviews for product 45RC19: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 11:06:53,894 - INFO - WebSocket disconnected
2024-07-15 11:06:53,894 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 11:11:36,621 - INFO - Loading faiss with AVX2 support.
2024-07-15 11:11:36,873 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-15 11:11:37,872 - INFO - FAISS vector store created.
2024-07-15 11:11:37,872 - INFO - Serializing FAISS vector store to /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 11:11:38,079 - INFO - FAISS vector store serialized to pickle file.
2024-07-15 11:11:38,085 - INFO - Initializing ChromeDriver...
2024-07-15 11:11:38,085 - INFO - ====== WebDriver manager ======
2024-07-15 11:11:38,424 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 11:11:38,466 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 11:11:38,536 - INFO - Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126/chromedriver-mac-x64/chromedriver] found in cache
2024-07-15 11:11:39,490 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [21969]
INFO:     Waiting for application startup.
2024-07-15 11:11:39,546 - INFO - Startup complete.
INFO:     Application startup complete.
ERROR:    [Errno 48] error while attempting to bind on address ('0.0.0.0', 8000): address already in use
INFO:     Waiting for application shutdown.
2024-07-15 11:11:39,612 - INFO - Shutdown complete.
INFO:     Application shutdown complete.
2024-07-15 11:21:11,638 - INFO - Loading faiss with AVX2 support.
2024-07-15 11:21:11,867 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-15 11:21:12,859 - INFO - FAISS vector store created.
2024-07-15 11:21:12,859 - INFO - Serializing FAISS vector store to /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 11:21:13,093 - INFO - FAISS vector store serialized to pickle file.
2024-07-15 11:21:13,100 - INFO - Initializing ChromeDriver...
2024-07-15 11:21:13,101 - INFO - ====== WebDriver manager ======
2024-07-15 11:21:13,502 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 11:21:13,545 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 11:21:13,583 - INFO - Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126/chromedriver-mac-x64/chromedriver] found in cache
2024-07-15 11:21:14,299 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [22120]
INFO:     Waiting for application startup.
2024-07-15 11:21:14,318 - INFO - Startup complete.
INFO:     Application startup complete.
ERROR:    [Errno 48] error while attempting to bind on address ('0.0.0.0', 8000): address already in use
INFO:     Waiting for application shutdown.
2024-07-15 11:21:14,392 - INFO - Shutdown complete.
INFO:     Application shutdown complete.
2024-07-15 12:12:58,796 - INFO -  fast_api_main/ Adding new session ID 164a040f-e22c-4eb5-b026-ffae7805088a to session_store
2024-07-15 12:12:58,796 - INFO - fast_api_main/ Received question: hammer with session_id: 164a040f-e22c-4eb5-b026-ffae7805088a
2024-07-15 12:12:58,796 - INFO - fast_api_main/ Current chat history for session_id 164a040f-e22c-4eb5-b026-ffae7805088a: []
2024-07-15 12:12:58,796 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:12:59,711 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:12:59,717 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:12:59,717 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:12:59,717 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.914362907409668
INFO:     127.0.0.1:57159 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 12:12:59,718 - INFO -  fast_api_main/ Adding new session ID f90950ca-7c30-4dad-832e-6c0336312f8d to session_store
2024-07-15 12:12:59,718 - INFO - fast_api_main/ Received question: hammer with session_id: f90950ca-7c30-4dad-832e-6c0336312f8d
2024-07-15 12:12:59,718 - INFO - fast_api_main/ Current chat history for session_id f90950ca-7c30-4dad-832e-6c0336312f8d: []
2024-07-15 12:12:59,718 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:12:59,758 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:12:59,759 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 12:12:59,759 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:12:59,760 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.03994607925415039
INFO:     127.0.0.1:57160 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 12:12:59,761 - INFO - fast_api_main/ Received question: hammer with session_id: eaf83617-99cb-4722-9fa0-d8fab286fdef
2024-07-15 12:12:59,761 - INFO - fast_api_main/ Current chat history for session_id eaf83617-99cb-4722-9fa0-d8fab286fdef: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 53CT46: Hammer with 12 oz head weight, 1 in face diameter, 12 in overall length, and textured grip from PROTO  \n- 45RC16: Hammer with 16 oz head weight, 1 1/8 in face diameter, 13 in overall length, and textured grip from WESTWARD\n- 53CT50: Hammer with 24 oz head weight, 1 3/8 in face diameter, 14 in overall length, and textured grip from PROTO\n- 45RC17: Hammer with 24 oz head weight, 1 3/8 in face diameter, 15 in overall length, and textured grip from WESTWARD  \n- 45RC18: Hammer with 32 oz head weight, 1 1/2 in face diameter, 15 in overall length, and textured grip from WESTWARD\n- 45RC19: Hammer with 40 oz head weight, 1 5/8 in face diameter, 16 in overall length, and textured grip from WESTWARD. CUSTOMER ATTRIBUTES: {}']
2024-07-15 12:12:59,761 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:12:59,800 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:12:59,801 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 12:12:59,801 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:12:59,802 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.03966689109802246
INFO:     127.0.0.1:57165 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:13:04,738 - INFO - fast_api_main/ Received question: hammer with session_id: 164a040f-e22c-4eb5-b026-ffae7805088a
2024-07-15 12:13:04,738 - INFO - fast_api_main/ Current chat history for session_id 164a040f-e22c-4eb5-b026-ffae7805088a: []
2024-07-15 12:13:04,738 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:13:04,783 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:04,784 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:13:04,784 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:04,785 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.045188188552856445
INFO:     127.0.0.1:57170 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 12:13:04,786 - INFO - fast_api_main/ Received question: hammer with session_id: f90950ca-7c30-4dad-832e-6c0336312f8d
2024-07-15 12:13:04,786 - INFO - fast_api_main/ Current chat history for session_id f90950ca-7c30-4dad-832e-6c0336312f8d: []
2024-07-15 12:13:04,786 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:13:04,826 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:04,828 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:13:04,828 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:04,829 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.0405731201171875
INFO:     127.0.0.1:57171 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 12:13:04,829 - INFO - fast_api_main/ Received question: hammer with session_id: eaf83617-99cb-4722-9fa0-d8fab286fdef
2024-07-15 12:13:04,829 - INFO - fast_api_main/ Current chat history for session_id eaf83617-99cb-4722-9fa0-d8fab286fdef: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 53CT46: Hammer with 12 oz head weight, 1 in face diameter, 12 in overall length, and textured grip from PROTO  \n- 45RC16: Hammer with 16 oz head weight, 1 1/8 in face diameter, 13 in overall length, and textured grip from WESTWARD\n- 53CT50: Hammer with 24 oz head weight, 1 3/8 in face diameter, 14 in overall length, and textured grip from PROTO\n- 45RC17: Hammer with 24 oz head weight, 1 3/8 in face diameter, 15 in overall length, and textured grip from WESTWARD  \n- 45RC18: Hammer with 32 oz head weight, 1 1/2 in face diameter, 15 in overall length, and textured grip from WESTWARD\n- 45RC19: Hammer with 40 oz head weight, 1 5/8 in face diameter, 16 in overall length, and textured grip from WESTWARD. CUSTOMER ATTRIBUTES: {}']
2024-07-15 12:13:04,829 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:13:04,869 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:04,870 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 12:13:04,870 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:13:04,871 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.040032148361206055
INFO:     127.0.0.1:57172 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 12:13:09,800 - INFO - fast_api_main/ Received question: hammer with session_id: 164a040f-e22c-4eb5-b026-ffae7805088a
2024-07-15 12:13:09,801 - INFO - fast_api_main/ Current chat history for session_id 164a040f-e22c-4eb5-b026-ffae7805088a: []
2024-07-15 12:13:09,801 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:13:09,843 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:09,843 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 12:13:09,843 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
ERROR:root:Attempt 3 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:13:09,844 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04193687438964844
INFO:     127.0.0.1:57178 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 12:13:09,845 - INFO - fast_api_main/ Received question: hammer with session_id: f90950ca-7c30-4dad-832e-6c0336312f8d
2024-07-15 12:13:09,845 - INFO - fast_api_main/ Current chat history for session_id f90950ca-7c30-4dad-832e-6c0336312f8d: []
2024-07-15 12:13:09,845 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:13:09,885 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:09,886 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 12:13:09,886 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
ERROR:root:Attempt 3 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:13:09,887 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.040370941162109375
INFO:     127.0.0.1:57179 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 12:13:09,889 - INFO - fast_api_main/ Received question: hammer with session_id: eaf83617-99cb-4722-9fa0-d8fab286fdef
2024-07-15 12:13:09,889 - INFO - fast_api_main/ Current chat history for session_id eaf83617-99cb-4722-9fa0-d8fab286fdef: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 53CT46: Hammer with 12 oz head weight, 1 in face diameter, 12 in overall length, and textured grip from PROTO  \n- 45RC16: Hammer with 16 oz head weight, 1 1/8 in face diameter, 13 in overall length, and textured grip from WESTWARD\n- 53CT50: Hammer with 24 oz head weight, 1 3/8 in face diameter, 14 in overall length, and textured grip from PROTO\n- 45RC17: Hammer with 24 oz head weight, 1 3/8 in face diameter, 15 in overall length, and textured grip from WESTWARD  \n- 45RC18: Hammer with 32 oz head weight, 1 1/2 in face diameter, 15 in overall length, and textured grip from WESTWARD\n- 45RC19: Hammer with 40 oz head weight, 1 5/8 in face diameter, 16 in overall length, and textured grip from WESTWARD. CUSTOMER ATTRIBUTES: {}']
2024-07-15 12:13:09,889 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:13:09,928 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:09,929 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 12:13:09,929 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
ERROR:root:Attempt 3 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:13:09,930 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.039643049240112305
INFO:     127.0.0.1:57180 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 12:13:14,857 - INFO - fast_api_main/ Received question: hammer with session_id: 164a040f-e22c-4eb5-b026-ffae7805088a
2024-07-15 12:13:14,858 - INFO - fast_api_main/ Current chat history for session_id 164a040f-e22c-4eb5-b026-ffae7805088a: []
2024-07-15 12:13:14,858 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:13:14,906 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:14,907 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 12:13:14,907 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:14,908 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.048787832260131836
INFO:     127.0.0.1:57183 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 4 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:13:14,909 - INFO - fast_api_main/ Received question: hammer with session_id: f90950ca-7c30-4dad-832e-6c0336312f8d
2024-07-15 12:13:14,909 - INFO - fast_api_main/ Current chat history for session_id f90950ca-7c30-4dad-832e-6c0336312f8d: []
2024-07-15 12:13:14,909 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:13:14,949 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:14,950 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 12:13:14,950 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:14,951 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04032397270202637
INFO:     127.0.0.1:57184 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 4 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:13:14,951 - INFO - fast_api_main/ Received question: hammer with session_id: eaf83617-99cb-4722-9fa0-d8fab286fdef
2024-07-15 12:13:14,951 - INFO - fast_api_main/ Current chat history for session_id eaf83617-99cb-4722-9fa0-d8fab286fdef: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 53CT46: Hammer with 12 oz head weight, 1 in face diameter, 12 in overall length, and textured grip from PROTO  \n- 45RC16: Hammer with 16 oz head weight, 1 1/8 in face diameter, 13 in overall length, and textured grip from WESTWARD\n- 53CT50: Hammer with 24 oz head weight, 1 3/8 in face diameter, 14 in overall length, and textured grip from PROTO\n- 45RC17: Hammer with 24 oz head weight, 1 3/8 in face diameter, 15 in overall length, and textured grip from WESTWARD  \n- 45RC18: Hammer with 32 oz head weight, 1 1/2 in face diameter, 15 in overall length, and textured grip from WESTWARD\n- 45RC19: Hammer with 40 oz head weight, 1 5/8 in face diameter, 16 in overall length, and textured grip from WESTWARD. CUSTOMER ATTRIBUTES: {}']
2024-07-15 12:13:14,951 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 12:13:14,991 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 12:13:14,992 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 12:13:14,992 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
ERROR:root:Attempt 4 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 12:13:14,993 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.039446115493774414
INFO:     127.0.0.1:57185 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 13:10:06,159 - INFO - fast_api_main/ Received question: hammer with session_id: 164a040f-e22c-4eb5-b026-ffae7805088a
2024-07-15 13:10:06,159 - INFO - fast_api_main/ Current chat history for session_id 164a040f-e22c-4eb5-b026-ffae7805088a: []
2024-07-15 13:10:06,159 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 13:14:27,045 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 13:14:27,045 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 13:14:27,045 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 13:14:27,046 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 260.8851387500763
INFO:     127.0.0.1:57192 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 13:14:27,047 - INFO - fast_api_main/ Received question: hammer with session_id: f90950ca-7c30-4dad-832e-6c0336312f8d
2024-07-15 13:14:27,047 - INFO - fast_api_main/ Current chat history for session_id f90950ca-7c30-4dad-832e-6c0336312f8d: []
ERROR:root:Attempt 5 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 13:14:27,047 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 13:14:27,089 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 13:14:27,090 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 13:14:27,090 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 13:14:27,090 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.041615962982177734
INFO:     127.0.0.1:57193 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 13:14:27,091 - INFO - fast_api_main/ Received question: hammer with session_id: eaf83617-99cb-4722-9fa0-d8fab286fdef
2024-07-15 13:14:27,091 - INFO - fast_api_main/ Current chat history for session_id eaf83617-99cb-4722-9fa0-d8fab286fdef: ['QUESTION: hammer. MESSAGE: Here are the hammers available from the catalog:\n- 53CT46: Hammer with 12 oz head weight, 1 in face diameter, 12 in overall length, and textured grip from PROTO  \n- 45RC16: Hammer with 16 oz head weight, 1 1/8 in face diameter, 13 in overall length, and textured grip from WESTWARD\n- 53CT50: Hammer with 24 oz head weight, 1 3/8 in face diameter, 14 in overall length, and textured grip from PROTO\n- 45RC17: Hammer with 24 oz head weight, 1 3/8 in face diameter, 15 in overall length, and textured grip from WESTWARD  \n- 45RC18: Hammer with 32 oz head weight, 1 1/2 in face diameter, 15 in overall length, and textured grip from WESTWARD\n- 45RC19: Hammer with 40 oz head weight, 1 5/8 in face diameter, 16 in overall length, and textured grip from WESTWARD. CUSTOMER ATTRIBUTES: {}']
2024-07-15 13:14:27,091 - INFO - fast_api_main/ Processing question: hammer
ERROR:root:Attempt 5 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 13:14:27,132 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 13:14:27,133 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 13:14:27,133 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 13:14:27,133 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.040560007095336914
INFO:     127.0.0.1:57194 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 5 failed: 500 - {"detail":"Internal Server Error"}
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
2024-07-15 16:26:41,279 - INFO - fast_api_main/ Received question: hammer with session_id: f90950ca-7c30-4dad-832e-6c0336312f8d
2024-07-15 16:26:41,289 - INFO - fast_api_main/ Current chat history for session_id f90950ca-7c30-4dad-832e-6c0336312f8d: []
2024-07-15 16:26:41,290 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 16:27:11,502 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 16:27:11,519 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 16:27:11,520 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 16:27:11,521 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 30.210139751434326
INFO:     127.0.0.1:57377 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 16:27:40,671 - INFO - fast_api_main/ Received question: hammer with session_id: f90950ca-7c30-4dad-832e-6c0336312f8d
2024-07-15 16:27:40,676 - INFO - fast_api_main/ Current chat history for session_id f90950ca-7c30-4dad-832e-6c0336312f8d: []
2024-07-15 16:27:40,677 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 16:27:40,798 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 16:27:40,803 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 16:27:40,803 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 16:27:40,806 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.11828207969665527
INFO:     127.0.0.1:57396 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 16:27:45,832 - INFO - fast_api_main/ Received question: hammer with session_id: f90950ca-7c30-4dad-832e-6c0336312f8d
2024-07-15 16:27:45,832 - INFO - fast_api_main/ Current chat history for session_id f90950ca-7c30-4dad-832e-6c0336312f8d: []
2024-07-15 16:27:45,832 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 16:27:45,874 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 16:27:45,876 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 16:27:45,876 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
ERROR:root:Attempt 3 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 16:27:45,877 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04268479347229004
INFO:     127.0.0.1:57401 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 16:32:06,550 - INFO - fast_api_main/ Received question: hammer with session_id: f90950ca-7c30-4dad-832e-6c0336312f8d
2024-07-15 16:32:06,552 - INFO - fast_api_main/ Current chat history for session_id f90950ca-7c30-4dad-832e-6c0336312f8d: []
2024-07-15 16:32:06,552 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 16:32:06,611 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
ERROR:root:Attempt 4 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 16:32:06,618 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 16:32:06,618 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 16:32:06,620 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.05831789970397949
INFO:     127.0.0.1:57405 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 16:32:11,646 - INFO - fast_api_main/ Received question: hammer with session_id: f90950ca-7c30-4dad-832e-6c0336312f8d
2024-07-15 16:32:11,646 - INFO - fast_api_main/ Current chat history for session_id f90950ca-7c30-4dad-832e-6c0336312f8d: []
2024-07-15 16:32:11,646 - INFO - fast_api_main/ Processing question: hammer
2024-07-15 16:32:11,686 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 16:32:11,688 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

ERROR:root:Attempt 5 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 16:32:11,688 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 16:32:11,690 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 89, in process_chat_question_with_customer_attribute_identifier
    raise error
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    customer_attributes_retrieved = extract_customer_attributes(question, llm)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.04017901420593262
INFO:     127.0.0.1:57413 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-15 16:35:59,000 - INFO - Found credentials in environment variables.
2024-07-15 16:35:59,238 - INFO - Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-15 16:35:59,369 - INFO - Initializing Titan Embeddings Model...
2024-07-15 16:35:59,369 - INFO - Titan Embeddings Model initialized.
2024-07-15 16:35:59,369 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-15 16:35:59,460 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 16:35:59,460 - INFO - Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
2024-07-15 16:35:59,481 - INFO - Documents file loaded successfully!
2024-07-15 16:35:59,481 - INFO - Structured documents created:
2024-07-15 16:35:59,481 - INFO - Document 1 of 11424:
2024-07-15 16:35:59,481 - INFO - 3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy OHAUS <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspend
2024-07-15 16:35:59,481 - INFO - Document 2 of 11424:
2024-07-15 16:35:59,481 - INFO - 3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black GEORGIA-PACIFIC <p>Motion-activated paper towel dispensers offer hands-free dispensing to help im
2024-07-15 16:35:59,481 - INFO - Document 3 of 11424:
2024-07-15 16:35:59,481 - INFO - 5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK TOUGH GUY <p>Compostable trash bags collect compostable waste for use in commercial composting f
2024-07-15 16:35:59,481 - INFO - Document 4 of 11424:
2024-07-15 16:35:59,481 - INFO - 14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow PELICAN <p>These safety-rated flashlights set their head in line with their body for a tradi
2024-07-15 16:35:59,481 - INFO - Document 5 of 11424:
2024-07-15 16:35:59,481 - INFO - 4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK TOUGH GUY <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightwei
2024-07-15 16:35:59,507 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 16:35:59,507 - INFO - Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
2024-07-15 16:35:59,598 - INFO - Loading faiss with AVX2 support.
2024-07-15 16:35:59,625 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-15 16:35:59,883 - INFO - FAISS vector store loaded from pickle file.
2024-07-15 16:35:59,890 - INFO - Initializing ChromeDriver...
2024-07-15 16:35:59,890 - INFO - ====== WebDriver manager ======
2024-07-15 16:36:00,148 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 16:36:00,193 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 16:36:00,231 - INFO - Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126/chromedriver-mac-x64/chromedriver] found in cache
2024-07-15 16:36:00,993 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [23238]
INFO:     Waiting for application startup.
2024-07-15 16:36:01,011 - INFO - Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

2024-07-15 16:36:17,187 - INFO -  fast_api_main/ Adding new session ID 8f9e8c11-796b-4297-8b6a-212716e86878 to session_store
2024-07-15 16:36:17,188 - INFO - fast_api_main/ Received question: Tape for code environments with session_id: 8f9e8c11-796b-4297-8b6a-212716e86878
2024-07-15 16:36:17,188 - INFO - fast_api_main/ Current chat history for session_id 8f9e8c11-796b-4297-8b6a-212716e86878: []
2024-07-15 16:36:17,188 - INFO - fast_api_main/ Processing question: Tape for code environments
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 16:36:19,211 - INFO - chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 16:36:29,610 - INFO - chat_processor/ chat_procesing: message: Based on the provided industry, size, sustainability focus, inventory manager, and location information, I recommend the following tape products from the catalog:

- 15C747 Packaging Tape with Message (2" width, 55 yard length) 
- 11J997 START INTERNATIONAL Tape Dispenser (for 2" max tape width)

These products seem well-suited for an individual customer's tape needs in the specified industry and context. Please let me know if you need any other recommendations or have additional criteria to consider.
2024-07-15 16:36:29,610 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution TAPECASE <p>Packaging tape with message includes preprinted information such as handling instructions and shipping and receiving messages.</p>', 'code': '15C747'}, {'product': 'START INTERNATIONAL Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>', 'code': '11J997'}]}
2024-07-15 16:36:29,610 - INFO - fast_api_main/ Message: Based on the provided industry, size, sustainability focus, inventory manager, and location information, I recommend the following tape products from the catalog:

- 15C747 Packaging Tape with Message (2" width, 55 yard length) 
- 11J997 START INTERNATIONAL Tape Dispenser (for 2" max tape width)

These products seem well-suited for an individual customer's tape needs in the specified industry and context. Please let me know if you need any other recommendations or have additional criteria to consider.
2024-07-15 16:36:29,610 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution TAPECASE <p>Packaging tape with message includes preprinted information such as handling instructions and shipping and receiving messages.</p>', 'code': '15C747'}, {'product': 'START INTERNATIONAL Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>', 'code': '11J997'}]}
2024-07-15 16:36:29,610 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
2024-07-15 16:36:29,610 - INFO - fast_api_main/ Time to get attributes: 2.0237350463867188
2024-07-15 16:36:29,610 - INFO - fast_api_main/ Updated chat history for session_id 8f9e8c11-796b-4297-8b6a-212716e86878: ['QUESTION: Tape for code environments. MESSAGE: Based on the provided industry, size, sustainability focus, inventory manager, and location information, I recommend the following tape products from the catalog:\n\n- 15C747 Packaging Tape with Message (2" width, 55 yard length) \n- 11J997 START INTERNATIONAL Tape Dispenser (for 2" max tape width)\n\nThese products seem well-suited for an individual customer\'s tape needs in the specified industry and context. Please let me know if you need any other recommendations or have additional criteria to consider.. CUSTOMER ATTRIBUTES: {\'Industry\': \'Other\', \'Size\': \'Individual Customer\', \'SustainabilityFocus\': False, \'InventoryManager\': False, \'Location\': \'\'}']
2024-07-15 16:36:29,610 - INFO - fast_api_main/ Processed question: Tape for code environments with message: Based on the provided industry, size, sustainability focus, inventory manager, and location information, I recommend the following tape products from the catalog:

- 15C747 Packaging Tape with Message (2" width, 55 yard length) 
- 11J997 START INTERNATIONAL Tape Dispenser (for 2" max tape width)

These products seem well-suited for an individual customer's tape needs in the specified industry and context. Please let me know if you need any other recommendations or have additional criteria to consider.
2024-07-15 16:36:29,610 - INFO - fast_api_main/ Products retrieved: [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution TAPECASE <p>Packaging tape with message includes preprinted information such as handling instructions and shipping and receiving messages.</p>', 'code': '15C747'}, {'product': 'START INTERNATIONAL Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>', 'code': '11J997'}]
Time for extract_customer_attributes: 2.0225980281829834
Time for split_process_and_message_from_response: 0.0001289844512939453
INFO:     127.0.0.1:57561 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:36:29,634 - INFO - fast_api_main/ Fetching images for products: ['Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution TAPECASE <p>Packaging tape with message includes preprinted information such as handling instructions and shipping and receiving messages.</p>, 15C747', 'START INTERNATIONAL Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>, 11J997']
2024-07-15 16:36:29,634 - INFO - grainger_image_util item.part[-1]: 15C747 item.part[0]: Packaging Tape with Message: 1.9 mil Tape Thick
2024-07-15 16:36:29,640 - INFO - grainger_image_util item.part[-1]: 11J997 item.part[0]: START INTERNATIONAL Tape Dispenser: For 2 in Max Tape Wd
2024-07-15 16:36:31,593 - INFO - fast_api_main/ Total time to fetch images: 0.004757881164550781 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/15C747_GC01?$lgmain$ for 15C747 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/11J983_AS01?$lgmain$ for 11J997 in 0.00 seconds
INFO:     127.0.0.1:57573 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:36:31,943 - INFO - fast_api_main/ Starting reviews at 1721075791.943958
INFO:     ('127.0.0.1', 57576) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:36:31,945 - INFO - fast_api_main/ Sending review at 1721075791.945576
2024-07-15 16:36:31,945 - INFO - fast_api_main/ Fetching reviews for product: Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution TAPECASE <p>Packaging tape with message includes preprinted information such as handling instructions and shipping and receiving messages.</p>, 15C747
2024-07-15 16:36:31,946 - INFO - fast_api_main/ Fetching reviews for product: START INTERNATIONAL Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>, 11J997
2024-07-15 16:37:14,151 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:37:19,209 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:37:19,712 - ERROR - fast_api_main/ Error navigating to reviews for START INTERNATIONAL Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>, 11J997: Message: 
Stacktrace:
0   chromedriver                        0x00000001090db0e8 chromedriver + 5169384
1   chromedriver                        0x00000001090d2fba chromedriver + 5136314
2   chromedriver                        0x0000000108c4f36c chromedriver + 402284
3   chromedriver                        0x0000000108c9c740 chromedriver + 718656
4   chromedriver                        0x0000000108c9ca01 chromedriver + 719361
5   chromedriver                        0x0000000108ce1bc4 chromedriver + 1002436
6   chromedriver                        0x0000000108cbfadd chromedriver + 862941
7   chromedriver                        0x0000000108cdef57 chromedriver + 991063
8   chromedriver                        0x0000000108cbf853 chromedriver + 862291
9   chromedriver                        0x0000000108c8f5c6 chromedriver + 665030
10  chromedriver                        0x0000000108c8fe4e chromedriver + 667214
11  chromedriver                        0x000000010909dd00 chromedriver + 4918528
12  chromedriver                        0x00000001090a2cfd chromedriver + 4939005
13  chromedriver                        0x00000001090a33d5 chromedriver + 4940757
14  chromedriver                        0x000000010907ede4 chromedriver + 4791780
15  chromedriver                        0x00000001090a36c9 chromedriver + 4941513
16  chromedriver                        0x00000001090705b4 chromedriver + 4732340
17  chromedriver                        0x00000001090c3898 chromedriver + 5073048
18  chromedriver                        0x00000001090c3a57 chromedriver + 5073495
19  chromedriver                        0x00000001090d2b6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 16:37:19,713 - INFO - fast_api_main/ Sending review at 1721075839.71315
2024-07-15 16:37:21,406 - INFO - fast_api_main/ Reviews for product 15C747: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 16:37:21,417 - INFO - WebSocket disconnected
2024-07-15 16:37:21,417 - WARNING - WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-15 16:39:40,181 - INFO - Found credentials in environment variables.
2024-07-15 16:39:40,446 - INFO - Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-15 16:39:40,584 - INFO - Initializing Titan Embeddings Model...
2024-07-15 16:39:40,584 - INFO - Titan Embeddings Model initialized.
2024-07-15 16:39:40,584 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-15 16:39:40,686 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 16:39:40,686 - INFO - Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
2024-07-15 16:39:40,714 - INFO - Documents file loaded successfully!
2024-07-15 16:39:40,715 - INFO - Structured documents created:
2024-07-15 16:39:40,715 - INFO - Document 1 of 11424:
2024-07-15 16:39:40,715 - INFO - 3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy OHAUS <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspend
2024-07-15 16:39:40,715 - INFO - Document 2 of 11424:
2024-07-15 16:39:40,715 - INFO - 3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black GEORGIA-PACIFIC <p>Motion-activated paper towel dispensers offer hands-free dispensing to help im
2024-07-15 16:39:40,715 - INFO - Document 3 of 11424:
2024-07-15 16:39:40,715 - INFO - 5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK TOUGH GUY <p>Compostable trash bags collect compostable waste for use in commercial composting f
2024-07-15 16:39:40,715 - INFO - Document 4 of 11424:
2024-07-15 16:39:40,715 - INFO - 14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow PELICAN <p>These safety-rated flashlights set their head in line with their body for a tradi
2024-07-15 16:39:40,715 - INFO - Document 5 of 11424:
2024-07-15 16:39:40,715 - INFO - 4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK TOUGH GUY <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightwei
2024-07-15 16:39:40,744 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 16:39:40,745 - INFO - Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
2024-07-15 16:39:40,841 - INFO - Loading faiss with AVX2 support.
2024-07-15 16:39:40,871 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-15 16:39:41,204 - INFO - FAISS vector store loaded from pickle file.
2024-07-15 16:39:41,211 - INFO - Initializing ChromeDriver...
2024-07-15 16:39:41,211 - INFO - ====== WebDriver manager ======
2024-07-15 16:39:41,493 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 16:39:41,538 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 16:39:41,577 - INFO - Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126/chromedriver-mac-x64/chromedriver] found in cache
2024-07-15 16:39:42,574 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [23350]
INFO:     Waiting for application startup.
2024-07-15 16:39:42,601 - INFO - Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

2024-07-15 16:39:45,996 - INFO -  fast_api_main/ Adding new session ID efe7cf1d-bcbe-4512-ad3f-7d32971582ac to session_store
2024-07-15 16:39:45,996 - INFO - fast_api_main/ Received question: Tape for code environments with session_id: efe7cf1d-bcbe-4512-ad3f-7d32971582ac
2024-07-15 16:39:45,996 - INFO - fast_api_main/ Current chat history for session_id efe7cf1d-bcbe-4512-ad3f-7d32971582ac: []
2024-07-15 16:39:45,996 - INFO - fast_api_main/ Processing question: Tape for code environments
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 16:39:47,836 - INFO - chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 16:39:55,473 - INFO - chat_processor/ chat_procesing: message: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:

- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution 
- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia

The Packaging Tape with Message can be customized with handling instructions or shipping messages. The Tape Dispenser handles tape up to 2 inches wide, which should meet your needs as an individual customer. Please let me know if you need any other recommendations or have additional questions!
2024-07-15 16:39:55,473 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution', 'code': '15C747'}, {'product': 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J997'}]}
2024-07-15 16:39:55,473 - INFO - fast_api_main/ Message: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:

- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution 
- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia

The Packaging Tape with Message can be customized with handling instructions or shipping messages. The Tape Dispenser handles tape up to 2 inches wide, which should meet your needs as an individual customer. Please let me know if you need any other recommendations or have additional questions!
2024-07-15 16:39:55,473 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution', 'code': '15C747'}, {'product': 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J997'}]}
2024-07-15 16:39:55,473 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
2024-07-15 16:39:55,473 - INFO - fast_api_main/ Time to get attributes: 1.839853048324585
2024-07-15 16:39:55,473 - INFO - fast_api_main/ Updated chat history for session_id efe7cf1d-bcbe-4512-ad3f-7d32971582ac: ["QUESTION: Tape for code environments. MESSAGE: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:\n\n- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution \n- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia\n\nThe Packaging Tape with Message can be customized with handling instructions or shipping messages. The Tape Dispenser handles tape up to 2 inches wide, which should meet your needs as an individual customer. Please let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
2024-07-15 16:39:55,473 - INFO - fast_api_main/ Processed question: Tape for code environments with message: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:

- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution 
- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia

The Packaging Tape with Message can be customized with handling instructions or shipping messages. The Tape Dispenser handles tape up to 2 inches wide, which should meet your needs as an individual customer. Please let me know if you need any other recommendations or have additional questions!
2024-07-15 16:39:55,473 - INFO - fast_api_main/ Products retrieved: [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution', 'code': '15C747'}, {'product': 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J997'}]
Time for extract_customer_attributes: 1.8388831615447998
Time for split_process_and_message_from_response: 0.0001087188720703125
INFO:     127.0.0.1:57826 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:39:55,524 - INFO - fast_api_main/ Fetching images for products: ['Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution, 15C747', 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J997']
2024-07-15 16:39:55,524 - INFO - grainger_image_util item.part[-1]: 15C747 item.part[0]: Packaging Tape with Message: 1.9 mil Tape Thick
2024-07-15 16:39:55,527 - INFO - grainger_image_util item.part[-1]: 11J997 item.part[0]: Tape Dispenser: For 2 in Max Tape Wd
2024-07-15 16:39:55,751 - INFO - fast_api_main/ Total time to fetch images: 0.0033240318298339844 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/15C747_GC01?$lgmain$ for 15C747 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/11J983_AS01?$lgmain$ for 11J997 in 0.00 seconds
INFO:     127.0.0.1:57830 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:39:56,073 - INFO - fast_api_main/ Starting reviews at 1721075996.073637
INFO:     ('127.0.0.1', 57833) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:39:56,075 - INFO - fast_api_main/ Sending review at 1721075996.074989
2024-07-15 16:39:56,075 - INFO - fast_api_main/ Fetching reviews for product: Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution, 15C747
2024-07-15 16:39:56,075 - INFO - fast_api_main/ Fetching reviews for product: Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J997
2024-07-15 16:40:12,213 - INFO -  fast_api_main/ Adding new session ID e9287202-5be1-4547-a980-d053ac11fcb7 to session_store
2024-07-15 16:40:12,213 - INFO - fast_api_main/ Received question: tape that holds in cold environements for my commercial freezer in my restaurant. with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:40:12,213 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: []
2024-07-15 16:40:12,213 - INFO - fast_api_main/ Processing question: tape that holds in cold environements for my commercial freezer in my restaurant.
2024-07-15 16:40:14,236 - INFO - chat_processor/ Chat History passed to processor: []
2024-07-15 16:40:21,597 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:40:22,133 - INFO - chat_processor/ chat_procesing: message: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!
2024-07-15 16:40:22,133 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': '11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>', 'code': '11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL'}]}
2024-07-15 16:40:22,133 - INFO - fast_api_main/ Message: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!
2024-07-15 16:40:22,133 - INFO - fast_api_main/ Response json: {'products': [{'product': '11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>', 'code': '11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL'}]}
2024-07-15 16:40:22,133 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}
2024-07-15 16:40:22,133 - INFO - fast_api_main/ Time to get attributes: 2.023151159286499
2024-07-15 16:40:22,134 - INFO - fast_api_main/ Updated chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:40:22,134 - INFO - fast_api_main/ Processed question: tape that holds in cold environements for my commercial freezer in my restaurant. with message: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!
2024-07-15 16:40:22,134 - INFO - fast_api_main/ Products retrieved: [{'product': '11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>', 'code': '11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL'}]
Time for extract_customer_attributes: 2.022423028945923
Time for split_process_and_message_from_response: 3.123283386230469e-05
INFO:     127.0.0.1:57925 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:40:22,157 - INFO - fast_api_main/ Fetching images for products: ['11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>, 11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL']
2024-07-15 16:40:22,157 - INFO - grainger_image_util item.part[-1]: For 3 in Max Tape Core Dia START INTERNATIONAL item.part[0]: 11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd
2024-07-15 16:40:22,158 - INFO - fast_api_main/ Total time to fetch images: 0.0 seconds
Code For 3 in Max Tape Core Dia START INTERNATIONAL not found in the dataframe.
INFO:     127.0.0.1:57935 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:40:22,165 - INFO - fast_api_main/ Starting reviews at 1721076022.165018
INFO:     ('127.0.0.1', 57936) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:40:22,166 - INFO - fast_api_main/ Sending review at 1721076022.166361
2024-07-15 16:40:22,166 - INFO - fast_api_main/ Fetching reviews for product: 11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>, 11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL
2024-07-15 16:40:38,336 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:40:38,398 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:40:38,891 - ERROR - fast_api_main/ Error navigating to reviews for Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution, 15C747: Message: 
Stacktrace:
0   chromedriver                        0x00000001022d30e8 chromedriver + 5169384
1   chromedriver                        0x00000001022cafba chromedriver + 5136314
2   chromedriver                        0x0000000101e4736c chromedriver + 402284
3   chromedriver                        0x0000000101e94740 chromedriver + 718656
4   chromedriver                        0x0000000101e94a01 chromedriver + 719361
5   chromedriver                        0x0000000101ed9bc4 chromedriver + 1002436
6   chromedriver                        0x0000000101eb7add chromedriver + 862941
7   chromedriver                        0x0000000101ed6f57 chromedriver + 991063
8   chromedriver                        0x0000000101eb7853 chromedriver + 862291
9   chromedriver                        0x0000000101e875c6 chromedriver + 665030
10  chromedriver                        0x0000000101e87e4e chromedriver + 667214
11  chromedriver                        0x0000000102295d00 chromedriver + 4918528
12  chromedriver                        0x000000010229acfd chromedriver + 4939005
13  chromedriver                        0x000000010229b3d5 chromedriver + 4940757
14  chromedriver                        0x0000000102276de4 chromedriver + 4791780
15  chromedriver                        0x000000010229b6c9 chromedriver + 4941513
16  chromedriver                        0x00000001022685b4 chromedriver + 4732340
17  chromedriver                        0x00000001022bb898 chromedriver + 5073048
18  chromedriver                        0x00000001022bba57 chromedriver + 5073495
19  chromedriver                        0x00000001022cab6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 16:40:38,891 - INFO - fast_api_main/ Sending review at 1721076038.891814
2024-07-15 16:40:43,851 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:40:44,351 - ERROR - fast_api_main/ Error navigating to reviews for 11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL <p>Standard packaging benchtop tape machines, also known as box sealers, apply tape to the top and bottom of cardboard cases. They are compact for use on a tabletop and do not utilize a conveyor. The tape size needed is preselected by the user. These machines can work with packaging tape, strapping tape, and masking tape and are most commonly used for sealing regular slotted containers (RSC).</p>, 11J959 START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia START INTERNATIONAL: Message: 
Stacktrace:
0   chromedriver                        0x00000001022d30e8 chromedriver + 5169384
1   chromedriver                        0x00000001022cafba chromedriver + 5136314
2   chromedriver                        0x0000000101e4736c chromedriver + 402284
3   chromedriver                        0x0000000101e94740 chromedriver + 718656
4   chromedriver                        0x0000000101e94a01 chromedriver + 719361
5   chromedriver                        0x0000000101ed9bc4 chromedriver + 1002436
6   chromedriver                        0x0000000101eb7add chromedriver + 862941
7   chromedriver                        0x0000000101ed6f57 chromedriver + 991063
8   chromedriver                        0x0000000101eb7853 chromedriver + 862291
9   chromedriver                        0x0000000101e875c6 chromedriver + 665030
10  chromedriver                        0x0000000101e87e4e chromedriver + 667214
11  chromedriver                        0x0000000102295d00 chromedriver + 4918528
12  chromedriver                        0x000000010229acfd chromedriver + 4939005
13  chromedriver                        0x000000010229b3d5 chromedriver + 4940757
14  chromedriver                        0x0000000102276de4 chromedriver + 4791780
15  chromedriver                        0x000000010229b6c9 chromedriver + 4941513
16  chromedriver                        0x00000001022685b4 chromedriver + 4732340
17  chromedriver                        0x00000001022bb898 chromedriver + 5073048
18  chromedriver                        0x00000001022bba57 chromedriver + 5073495
19  chromedriver                        0x00000001022cab6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 16:40:44,354 - INFO - WebSocket disconnected
2024-07-15 16:40:44,354 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 16:40:45,940 - INFO - fast_api_main/ Reviews for product 11J997: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 16:40:45,946 - INFO - WebSocket disconnected
2024-07-15 16:40:45,946 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 16:40:58,886 - INFO - fast_api_main/ Received question: No I need tape not a tape dispenser with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:40:58,886 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:40:58,886 - INFO - fast_api_main/ Processing question: No I need tape not a tape dispenser
2024-07-15 16:40:59,913 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:41:08,879 - INFO - chat_processor/ chat_procesing: message: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!
2024-07-15 16:41:08,879 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Handheld Tape Dispenser: Light, For 2 in Max Tape Wd, For 3 in Tape Core Dia, Pistol', 'code': '3JXW7'}, {'product': 'START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J959'}, {'product': 'Handheld Tape Dispenser: Light, For 3 in Max Tape Wd, For 3 in Tape Core Dia, Pistol', 'code': '3YTA2'}, {'product': 'Benchtop Carton Sealing Tape Dispenser: For 1 in Max Tape Wd, For 5 3/4 in Max Tape Roll Dia', 'code': '3EGL6'}, {'product': 'Handheld Tape Dispenser: Heavy, For 2 in Max Tape Wd, For 3 in Tape Core Dia, Pistol', 'code': '3EGL3'}]}
2024-07-15 16:41:08,880 - INFO - fast_api_main/ Message: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!
2024-07-15 16:41:08,880 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Handheld Tape Dispenser: Light, For 2 in Max Tape Wd, For 3 in Tape Core Dia, Pistol', 'code': '3JXW7'}, {'product': 'START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J959'}, {'product': 'Handheld Tape Dispenser: Light, For 3 in Max Tape Wd, For 3 in Tape Core Dia, Pistol', 'code': '3YTA2'}, {'product': 'Benchtop Carton Sealing Tape Dispenser: For 1 in Max Tape Wd, For 5 3/4 in Max Tape Roll Dia', 'code': '3EGL6'}, {'product': 'Handheld Tape Dispenser: Heavy, For 2 in Max Tape Wd, For 3 in Tape Core Dia, Pistol', 'code': '3EGL3'}]}
2024-07-15 16:41:08,880 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-15 16:41:08,880 - INFO - fast_api_main/ Time to get attributes: 1.026263952255249
2024-07-15 16:41:08,880 - INFO - fast_api_main/ Updated chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:41:08,880 - INFO - fast_api_main/ Processed question: No I need tape not a tape dispenser with message: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!
2024-07-15 16:41:08,880 - INFO - fast_api_main/ Products retrieved: [{'product': 'Handheld Tape Dispenser: Light, For 2 in Max Tape Wd, For 3 in Tape Core Dia, Pistol', 'code': '3JXW7'}, {'product': 'START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J959'}, {'product': 'Handheld Tape Dispenser: Light, For 3 in Max Tape Wd, For 3 in Tape Core Dia, Pistol', 'code': '3YTA2'}, {'product': 'Benchtop Carton Sealing Tape Dispenser: For 1 in Max Tape Wd, For 5 3/4 in Max Tape Roll Dia', 'code': '3EGL6'}, {'product': 'Handheld Tape Dispenser: Heavy, For 2 in Max Tape Wd, For 3 in Tape Core Dia, Pistol', 'code': '3EGL3'}]
Invalid JSON: 

Time for extract_customer_attributes: 1.0257940292358398
Time for split_process_and_message_from_response: 4.100799560546875e-05
INFO:     127.0.0.1:57968 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:41:08,896 - INFO - fast_api_main/ Fetching images for products: ['Handheld Tape Dispenser: Light, For 2 in Max Tape Wd, For 3 in Tape Core Dia, Pistol, 3JXW7', 'START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J959', 'Handheld Tape Dispenser: Light, For 3 in Max Tape Wd, For 3 in Tape Core Dia, Pistol, 3YTA2', 'Benchtop Carton Sealing Tape Dispenser: For 1 in Max Tape Wd, For 5 3/4 in Max Tape Roll Dia, 3EGL6', 'Handheld Tape Dispenser: Heavy, For 2 in Max Tape Wd, For 3 in Tape Core Dia, Pistol, 3EGL3']
2024-07-15 16:41:08,896 - INFO - grainger_image_util item.part[-1]: 3JXW7 item.part[0]: Handheld Tape Dispenser: Light
2024-07-15 16:41:08,898 - INFO - grainger_image_util item.part[-1]: 11J959 item.part[0]: START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd
2024-07-15 16:41:08,899 - INFO - grainger_image_util item.part[-1]: 3YTA2 item.part[0]: Handheld Tape Dispenser: Light
2024-07-15 16:41:08,900 - INFO - grainger_image_util item.part[-1]: 3EGL6 item.part[0]: Benchtop Carton Sealing Tape Dispenser: For 1 in Max Tape Wd
2024-07-15 16:41:08,902 - INFO - grainger_image_util item.part[-1]: 3EGL3 item.part[0]: Handheld Tape Dispenser: Heavy
2024-07-15 16:41:09,834 - INFO - fast_api_main/ Total time to fetch images: 0.005715847015380859 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/3JXW7_AS02?$lgmain$ for 3JXW7 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/11J959_AS01?$lgmain$ for 11J959 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/3YTA2_AS01?$lgmain$ for 3YTA2 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/3EGL6_AS01?$lgmain$ for 3EGL6 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/3EGL3_AS02?$lgmain$ for 3EGL3 in 0.00 seconds
INFO:     127.0.0.1:57974 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:41:10,490 - INFO - fast_api_main/ Starting reviews at 1721076070.490413
INFO:     ('127.0.0.1', 57980) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:41:10,491 - INFO - fast_api_main/ Sending review at 1721076070.4917388
2024-07-15 16:41:10,491 - INFO - fast_api_main/ Fetching reviews for product: Benchtop Carton Sealing Tape Dispenser: For 1 in Max Tape Wd, For 5 3/4 in Max Tape Roll Dia, 3EGL6
2024-07-15 16:41:10,491 - INFO - fast_api_main/ Fetching reviews for product: Handheld Tape Dispenser: Light, For 2 in Max Tape Wd, For 3 in Tape Core Dia, Pistol, 3JXW7
2024-07-15 16:41:10,492 - INFO - fast_api_main/ Fetching reviews for product: Handheld Tape Dispenser: Light, For 3 in Max Tape Wd, For 3 in Tape Core Dia, Pistol, 3YTA2
2024-07-15 16:41:10,492 - INFO - fast_api_main/ Fetching reviews for product: Handheld Tape Dispenser: Heavy, For 2 in Max Tape Wd, For 3 in Tape Core Dia, Pistol, 3EGL3
2024-07-15 16:41:10,492 - INFO - fast_api_main/ Fetching reviews for product: START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J959
2024-07-15 16:41:38,448 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:41:51,023 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:41:51,038 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:41:51,245 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:41:51,258 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:41:51,527 - ERROR - fast_api_main/ Error navigating to reviews for START INTERNATIONAL Tape Dispenser: For 3 1/8 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J959: Message: 
Stacktrace:
0   chromedriver                        0x00000001022d30e8 chromedriver + 5169384
1   chromedriver                        0x00000001022cafba chromedriver + 5136314
2   chromedriver                        0x0000000101e4736c chromedriver + 402284
3   chromedriver                        0x0000000101e94740 chromedriver + 718656
4   chromedriver                        0x0000000101e94a01 chromedriver + 719361
5   chromedriver                        0x0000000101ed9bc4 chromedriver + 1002436
6   chromedriver                        0x0000000101eb7add chromedriver + 862941
7   chromedriver                        0x0000000101ed6f57 chromedriver + 991063
8   chromedriver                        0x0000000101eb7853 chromedriver + 862291
9   chromedriver                        0x0000000101e875c6 chromedriver + 665030
10  chromedriver                        0x0000000101e87e4e chromedriver + 667214
11  chromedriver                        0x0000000102295d00 chromedriver + 4918528
12  chromedriver                        0x000000010229acfd chromedriver + 4939005
13  chromedriver                        0x000000010229b3d5 chromedriver + 4940757
14  chromedriver                        0x0000000102276de4 chromedriver + 4791780
15  chromedriver                        0x000000010229b6c9 chromedriver + 4941513
16  chromedriver                        0x00000001022685b4 chromedriver + 4732340
17  chromedriver                        0x00000001022bb898 chromedriver + 5073048
18  chromedriver                        0x00000001022bba57 chromedriver + 5073495
19  chromedriver                        0x00000001022cab6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 16:41:51,527 - INFO - fast_api_main/ Sending review at 1721076111.527781
2024-07-15 16:41:52,246 - INFO - fast_api_main/ Reviews for product 3EGL6: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
2024-07-15 16:41:52,349 - INFO - fast_api_main/ Reviews for product 3EGL3: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
2024-07-15 16:41:52,350 - INFO - fast_api_main/ Sending review at 1721076112.350176
2024-07-15 16:41:52,463 - INFO - fast_api_main/ Reviews for product 3JXW7: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
2024-07-15 16:41:52,463 - INFO - fast_api_main/ Sending review at 1721076112.463422
2024-07-15 16:41:52,463 - INFO - fast_api_main/ Sending review at 1721076112.463613
2024-07-15 16:41:53,286 - INFO - fast_api_main/ Reviews for product 3YTA2: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
2024-07-15 16:41:53,287 - INFO - fast_api_main/ Received question: Do you have any non-skip tape that will stay adhered in cold environments? with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:41:53,287 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:41:53,287 - INFO - fast_api_main/ Processing question: Do you have any non-skip tape that will stay adhered in cold environments?
2024-07-15 16:41:55,065 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:42:02,706 - INFO - chat_processor/ chat_procesing: message: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:

- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) 
- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)

Both of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!
2024-07-15 16:42:02,706 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment.', 'code': '12E913'}, {'product': 'This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment.', 'code': '12F877'}]}
2024-07-15 16:42:02,706 - INFO - fast_api_main/ Message: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:

- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) 
- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)

Both of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!
2024-07-15 16:42:02,706 - INFO - fast_api_main/ Response json: {'products': [{'product': 'This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment.', 'code': '12E913'}, {'product': 'This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment.', 'code': '12F877'}]}
2024-07-15 16:42:02,706 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-15 16:42:02,706 - INFO - fast_api_main/ Time to get attributes: 1.777972936630249
2024-07-15 16:42:02,706 - INFO - fast_api_main/ Updated chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}']
2024-07-15 16:42:02,706 - INFO - fast_api_main/ Processed question: Do you have any non-skip tape that will stay adhered in cold environments? with message: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:

- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) 
- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)

Both of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!
2024-07-15 16:42:02,706 - INFO - fast_api_main/ Products retrieved: [{'product': 'This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment.', 'code': '12E913'}, {'product': 'This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment.', 'code': '12F877'}]
Invalid JSON: 
  <industry>Other</industry>
  <size>Individual Customer</size>
  <sustainabilityFocus>false</sustainabilityFocus>
  <inventoryManager>false</inventoryManager>

Time for extract_customer_attributes: 1.777540922164917
Time for split_process_and_message_from_response: 2.6941299438476562e-05
INFO:     127.0.0.1:58012 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:42:02,712 - INFO - WebSocket disconnected
2024-07-15 16:42:02,712 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 16:42:02,744 - INFO - fast_api_main/ Fetching images for products: ['This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment., 12E913', 'This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment., 12F877']
2024-07-15 16:42:02,744 - INFO - grainger_image_util item.part[-1]: 12E913 item.part[0]: This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable
2024-07-15 16:42:02,746 - INFO - grainger_image_util item.part[-1]: 12F877 item.part[0]: This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable
2024-07-15 16:42:03,194 - INFO - fast_api_main/ Total time to fetch images: 0.00273895263671875 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/12E913_AS01?$lgmain$ for 12E913 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2TUY8_AS01?$lgmain$ for 12F877 in 0.00 seconds
INFO:     127.0.0.1:58017 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:42:03,406 - INFO - fast_api_main/ Starting reviews at 1721076123.406521
INFO:     ('127.0.0.1', 58022) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:42:03,408 - INFO - fast_api_main/ Sending review at 1721076123.408164
2024-07-15 16:42:03,408 - INFO - fast_api_main/ Fetching reviews for product: This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment., 12E913
2024-07-15 16:42:03,408 - INFO - fast_api_main/ Fetching reviews for product: This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment., 12F877
2024-07-15 16:42:17,378 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:42:20,219 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:42:21,238 - ERROR - fast_api_main/ Error navigating to reviews for This antislip tape has a coarse mineral-coated abrasive for high slip resistance in areas with heavy foot and equipment traffic. This durable, high-friction tape is used in muddy, greasy, and oily conditions, such as on construction and farm equipment., 12F877: Message: 
Stacktrace:
0   chromedriver                        0x00000001022d30e8 chromedriver + 5169384
1   chromedriver                        0x00000001022cafba chromedriver + 5136314
2   chromedriver                        0x0000000101e4736c chromedriver + 402284
3   chromedriver                        0x0000000101e94740 chromedriver + 718656
4   chromedriver                        0x0000000101e94a01 chromedriver + 719361
5   chromedriver                        0x0000000101ed9bc4 chromedriver + 1002436
6   chromedriver                        0x0000000101eb7add chromedriver + 862941
7   chromedriver                        0x0000000101ed6f57 chromedriver + 991063
8   chromedriver                        0x0000000101eb7853 chromedriver + 862291
9   chromedriver                        0x0000000101e875c6 chromedriver + 665030
10  chromedriver                        0x0000000101e87e4e chromedriver + 667214
11  chromedriver                        0x0000000102295d00 chromedriver + 4918528
12  chromedriver                        0x000000010229acfd chromedriver + 4939005
13  chromedriver                        0x000000010229b3d5 chromedriver + 4940757
14  chromedriver                        0x0000000102276de4 chromedriver + 4791780
15  chromedriver                        0x000000010229b6c9 chromedriver + 4941513
16  chromedriver                        0x00000001022685b4 chromedriver + 4732340
17  chromedriver                        0x00000001022bb898 chromedriver + 5073048
18  chromedriver                        0x00000001022bba57 chromedriver + 5073495
19  chromedriver                        0x00000001022cab6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 16:42:21,238 - INFO - fast_api_main/ Sending review at 1721076141.238353
2024-07-15 16:42:22,330 - INFO - fast_api_main/ Reviews for product 12E913: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 16:42:22,335 - INFO - WebSocket disconnected
2024-07-15 16:42:22,336 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 16:43:14,876 - INFO - fast_api_main/ Received question: Tell me about 12E913 and  with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:43:14,876 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}']
2024-07-15 16:43:14,876 - INFO - fast_api_main/ Processing question: Tell me about 12E913 and 
2024-07-15 16:43:16,691 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}']
2024-07-15 16:43:21,842 - INFO - chat_processor/ chat_procesing: message: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!
2024-07-15 16:43:21,842 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]}
2024-07-15 16:43:21,842 - INFO - fast_api_main/ Message: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!
2024-07-15 16:43:21,842 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]}
2024-07-15 16:43:21,842 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}
2024-07-15 16:43:21,842 - INFO - fast_api_main/ Time to get attributes: 1.814404010772705
2024-07-15 16:43:21,842 - INFO - fast_api_main/ Updated chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:43:21,842 - INFO - fast_api_main/ Processed question: Tell me about 12E913 and  with message: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!
2024-07-15 16:43:21,843 - INFO - fast_api_main/ Products retrieved: [{'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]
Time for extract_customer_attributes: 1.8132379055023193
Time for split_process_and_message_from_response: 3.7670135498046875e-05
INFO:     127.0.0.1:58066 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:43:21,844 - INFO - fast_api_main/ Received question: Tell me about 12E913 and 12F877 with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:43:21,844 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:43:21,844 - INFO - fast_api_main/ Processing question: Tell me about 12E913 and 12F877
2024-07-15 16:43:23,723 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:43:35,245 - INFO - chat_processor/ chat_procesing: message: None
2024-07-15 16:43:35,245 - INFO - chat_processor/ chat_procesing: product_list_as_json: None
2024-07-15 16:43:35,245 - ERROR - fast_api_main/ Error processing chat question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 16:43:35,248 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

2024-07-15 16:43:35,249 - ERROR - Error in fast_api_main/ask_question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 16:43:35,249 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

Time for extract_customer_attributes: 1.878006935119629
Error decoding JSON: Expecting ',' delimiter: line 2 column 613 (char 974)
Time for split_process_and_message_from_response: 4.792213439941406e-05
INFO:     127.0.0.1:58069 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 16:43:40,266 - INFO - fast_api_main/ Received question: Tell me about 12E913 and 12F877 with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:43:40,266 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:43:40,266 - INFO - fast_api_main/ Processing question: Tell me about 12E913 and 12F877
2024-07-15 16:43:42,067 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:43:53,648 - INFO - chat_processor/ chat_procesing: message: None
2024-07-15 16:43:53,648 - INFO - chat_processor/ chat_procesing: product_list_as_json: None
2024-07-15 16:43:53,649 - ERROR - fast_api_main/ Error processing chat question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 16:43:53,652 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

2024-07-15 16:43:53,653 - ERROR - Error in fast_api_main/ask_question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 16:43:53,654 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

Time for extract_customer_attributes: 1.8003110885620117
Error decoding JSON: Expecting ',' delimiter: line 2 column 613 (char 974)
Time for split_process_and_message_from_response: 0.00043392181396484375
INFO:     127.0.0.1:58085 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 16:43:58,673 - INFO - fast_api_main/ Received question: Tell me about 12E913 and 12F877 with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:43:58,673 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:43:58,673 - INFO - fast_api_main/ Processing question: Tell me about 12E913 and 12F877
2024-07-15 16:44:00,551 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:44:12,595 - INFO - chat_processor/ chat_procesing: message: None
2024-07-15 16:44:12,595 - INFO - chat_processor/ chat_procesing: product_list_as_json: None
2024-07-15 16:44:12,595 - ERROR - fast_api_main/ Error processing chat question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 16:44:12,595 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

2024-07-15 16:44:12,595 - ERROR - Error in fast_api_main/ask_question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 16:44:12,595 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

Time for extract_customer_attributes: 1.877218246459961
Error decoding JSON: Expecting ',' delimiter: line 2 column 613 (char 974)
Time for split_process_and_message_from_response: 5.412101745605469e-05
INFO:     127.0.0.1:58092 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 3 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 16:44:17,615 - INFO - fast_api_main/ Received question: Tell me about 12E913 and 12F877 with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:44:17,615 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:44:17,615 - INFO - fast_api_main/ Processing question: Tell me about 12E913 and 12F877
2024-07-15 16:44:19,263 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:44:31,427 - INFO - chat_processor/ chat_procesing: message: None
2024-07-15 16:44:31,427 - INFO - chat_processor/ chat_procesing: product_list_as_json: None
2024-07-15 16:44:31,427 - ERROR - fast_api_main/ Error processing chat question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 16:44:31,427 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

2024-07-15 16:44:31,427 - ERROR - Error in fast_api_main/ask_question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 16:44:31,428 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

Time for extract_customer_attributes: 1.6473941802978516
Error decoding JSON: Expecting ',' delimiter: line 2 column 613 (char 974)
Time for split_process_and_message_from_response: 5.1021575927734375e-05
INFO:     127.0.0.1:58103 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 4 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 16:44:36,442 - INFO - fast_api_main/ Received question: Tell me about 12E913 and 12F877 with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:44:36,443 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:44:36,443 - INFO - fast_api_main/ Processing question: Tell me about 12E913 and 12F877
2024-07-15 16:44:38,299 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:44:49,857 - INFO - chat_processor/ chat_procesing: message: None
2024-07-15 16:44:49,857 - INFO - chat_processor/ chat_procesing: product_list_as_json: None
2024-07-15 16:44:49,857 - ERROR - fast_api_main/ Error processing chat question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 16:44:49,858 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

2024-07-15 16:44:49,858 - ERROR - Error in fast_api_main/ask_question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 16:44:49,858 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

Time for extract_customer_attributes: 1.8555870056152344
Error decoding JSON: Expecting ',' delimiter: line 2 column 613 (char 974)
Time for split_process_and_message_from_response: 5.221366882324219e-05
INFO:     127.0.0.1:58116 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 5 failed: 500 - {"detail":"Internal Server Error"}
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
2024-07-15 16:45:10,488 - INFO - fast_api_main/ Received question: Tell me about products 12E913 and 12F877 with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:45:10,488 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:45:10,488 - INFO - fast_api_main/ Processing question: Tell me about products 12E913 and 12F877
2024-07-15 16:45:13,094 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 16:45:23,350 - INFO - chat_processor/ chat_procesing: message: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:

Product 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. 

Product 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.

Please let me know if you need any other information or have additional questions!
2024-07-15 16:45:23,350 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength.', 'code': '12G966'}, {'product': 'Shelf Bin: 11 5/8 in Overall Lg, 4 1/8 in x 4 in, Blue, Nestable, Label Holders APPROVED VENDOR Colored hanging and stacking bins create color-coded storage systems to separate and distinguish items housed in the same area. They are commonly used in warehouses or manufacturing facilities. Plastic bins are lightweight, durable, and reusable.', 'code': '48WG61'}]}
2024-07-15 16:45:23,350 - INFO - fast_api_main/ Message: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:

Product 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. 

Product 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.

Please let me know if you need any other information or have additional questions!
2024-07-15 16:45:23,350 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength.', 'code': '12G966'}, {'product': 'Shelf Bin: 11 5/8 in Overall Lg, 4 1/8 in x 4 in, Blue, Nestable, Label Holders APPROVED VENDOR Colored hanging and stacking bins create color-coded storage systems to separate and distinguish items housed in the same area. They are commonly used in warehouses or manufacturing facilities. Plastic bins are lightweight, durable, and reusable.', 'code': '48WG61'}]}
2024-07-15 16:45:23,350 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}
2024-07-15 16:45:23,350 - INFO - fast_api_main/ Time to get attributes: 2.6060550212860107
2024-07-15 16:45:23,350 - INFO - fast_api_main/ Updated chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: Tell me about products 12E913 and 12F877. MESSAGE: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:\n\nProduct 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\nProduct 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.\n\nPlease let me know if you need any other information or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}"]
2024-07-15 16:45:23,351 - INFO - fast_api_main/ Processed question: Tell me about products 12E913 and 12F877 with message: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:

Product 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. 

Product 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.

Please let me know if you need any other information or have additional questions!
2024-07-15 16:45:23,351 - INFO - fast_api_main/ Products retrieved: [{'product': 'Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength.', 'code': '12G966'}, {'product': 'Shelf Bin: 11 5/8 in Overall Lg, 4 1/8 in x 4 in, Blue, Nestable, Label Holders APPROVED VENDOR Colored hanging and stacking bins create color-coded storage systems to separate and distinguish items housed in the same area. They are commonly used in warehouses or manufacturing facilities. Plastic bins are lightweight, durable, and reusable.', 'code': '48WG61'}]
Time for extract_customer_attributes: 2.605632781982422
Time for split_process_and_message_from_response: 3.814697265625e-05
INFO:     127.0.0.1:58137 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:45:23,370 - INFO - fast_api_main/ Fetching images for products: ['Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength., 12G966', 'Shelf Bin: 11 5/8 in Overall Lg, 4 1/8 in x 4 in, Blue, Nestable, Label Holders APPROVED VENDOR Colored hanging and stacking bins create color-coded storage systems to separate and distinguish items housed in the same area. They are commonly used in warehouses or manufacturing facilities. Plastic bins are lightweight, durable, and reusable., 48WG61']
2024-07-15 16:45:23,370 - INFO - grainger_image_util item.part[-1]: 12G966 item.part[0]: Pallet: 15 1/2 in Lg
2024-07-15 16:45:23,372 - INFO - grainger_image_util item.part[-1]: 48WG61 item.part[0]: Shelf Bin: 11 5/8 in Overall Lg
2024-07-15 16:45:23,891 - INFO - fast_api_main/ Total time to fetch images: 0.002609729766845703 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/12G966_AS02?$lgmain$ for 12G966 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/48WG61-A3030-1_v1?$lgmain$ for 48WG61 in 0.00 seconds
INFO:     127.0.0.1:58145 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:45:24,150 - INFO - fast_api_main/ Starting reviews at 1721076324.15023
INFO:     ('127.0.0.1', 58148) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:45:24,151 - INFO - fast_api_main/ Sending review at 1721076324.151383
2024-07-15 16:45:24,151 - INFO - fast_api_main/ Fetching reviews for product: Shelf Bin: 11 5/8 in Overall Lg, 4 1/8 in x 4 in, Blue, Nestable, Label Holders APPROVED VENDOR Colored hanging and stacking bins create color-coded storage systems to separate and distinguish items housed in the same area. They are commonly used in warehouses or manufacturing facilities. Plastic bins are lightweight, durable, and reusable., 48WG61
2024-07-15 16:45:24,151 - INFO - fast_api_main/ Fetching reviews for product: Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength., 12G966
2024-07-15 16:45:38,751 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:45:41,711 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 16:45:42,727 - ERROR - fast_api_main/ Error navigating to reviews for Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength., 12G966: Message: 
Stacktrace:
0   chromedriver                        0x00000001022d30e8 chromedriver + 5169384
1   chromedriver                        0x00000001022cafba chromedriver + 5136314
2   chromedriver                        0x0000000101e4736c chromedriver + 402284
3   chromedriver                        0x0000000101e94740 chromedriver + 718656
4   chromedriver                        0x0000000101e94a01 chromedriver + 719361
5   chromedriver                        0x0000000101ed9bc4 chromedriver + 1002436
6   chromedriver                        0x0000000101eb7add chromedriver + 862941
7   chromedriver                        0x0000000101ed6f57 chromedriver + 991063
8   chromedriver                        0x0000000101eb7853 chromedriver + 862291
9   chromedriver                        0x0000000101e875c6 chromedriver + 665030
10  chromedriver                        0x0000000101e87e4e chromedriver + 667214
11  chromedriver                        0x0000000102295d00 chromedriver + 4918528
12  chromedriver                        0x000000010229acfd chromedriver + 4939005
13  chromedriver                        0x000000010229b3d5 chromedriver + 4940757
14  chromedriver                        0x0000000102276de4 chromedriver + 4791780
15  chromedriver                        0x000000010229b6c9 chromedriver + 4941513
16  chromedriver                        0x00000001022685b4 chromedriver + 4732340
17  chromedriver                        0x00000001022bb898 chromedriver + 5073048
18  chromedriver                        0x00000001022bba57 chromedriver + 5073495
19  chromedriver                        0x00000001022cab6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 16:45:42,727 - INFO - fast_api_main/ Sending review at 1721076342.727602
2024-07-15 16:45:43,839 - INFO - fast_api_main/ Reviews for product 48WG61: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ["I have a wet basement . I got tired of changing wooden pallets they get moldy and you can't wash them and then you have to get rid of them .\nWith plastic i can wash it off.", 'I use these for my wood racks.  I put 2 together and put my wood brackets on top and stack my wood on them.  Keeps my wood off the ground, easy to clean under, keeps the bugs out of my wood, they were a great price, VERY sturdy and shipped free', 'I\'m using these as a base for my firewood racks.  Since they are 5" high they elevate my wood off of the ground and away from moisture.  They are easy to clean under as they are 5" off the ground and the blower just moves the debris from under them.  I love that they will never rot and they can hold up to 15,000 lbs.  Very good investment', 'great']}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 16:45:43,844 - INFO - WebSocket disconnected
2024-07-15 16:45:43,845 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 16:45:52,785 - INFO - fast_api_main/ Received question: Find me details about Product 12G966  with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:45:52,785 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: Tell me about products 12E913 and 12F877. MESSAGE: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:\n\nProduct 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\nProduct 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.\n\nPlease let me know if you need any other information or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}"]
2024-07-15 16:45:52,785 - INFO - fast_api_main/ Processing question: Find me details about Product 12G966 
2024-07-15 16:45:53,798 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: Tell me about products 12E913 and 12F877. MESSAGE: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:\n\nProduct 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\nProduct 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.\n\nPlease let me know if you need any other information or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}"]
2024-07-15 16:45:58,209 - INFO - chat_processor/ chat_procesing: message: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.
2024-07-15 16:45:58,209 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size, 3,625 psi Max. Pressure, 1/4 in (F)NPT APPROVED VENDOR <p>Featuring an impact-resistant rubber housing, this nozzle improves your washer's efficiency and provides the blasting power of a 0° nozzle over a wide 20° cleaning stream area.</p>", 'code': '12G966'}]}
2024-07-15 16:45:58,209 - INFO - fast_api_main/ Message: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.
2024-07-15 16:45:58,209 - INFO - fast_api_main/ Response json: {'products': [{'product': "12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size, 3,625 psi Max. Pressure, 1/4 in (F)NPT APPROVED VENDOR <p>Featuring an impact-resistant rubber housing, this nozzle improves your washer's efficiency and provides the blasting power of a 0° nozzle over a wide 20° cleaning stream area.</p>", 'code': '12G966'}]}
2024-07-15 16:45:58,209 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-15 16:45:58,209 - INFO - fast_api_main/ Time to get attributes: 1.0125250816345215
2024-07-15 16:45:58,209 - INFO - fast_api_main/ Updated chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: Tell me about products 12E913 and 12F877. MESSAGE: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:\n\nProduct 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\nProduct 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.\n\nPlease let me know if you need any other information or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:45:58,209 - INFO - fast_api_main/ Processed question: Find me details about Product 12G966  with message: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.
2024-07-15 16:45:58,209 - INFO - fast_api_main/ Products retrieved: [{'product': "12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size, 3,625 psi Max. Pressure, 1/4 in (F)NPT APPROVED VENDOR <p>Featuring an impact-resistant rubber housing, this nozzle improves your washer's efficiency and provides the blasting power of a 0° nozzle over a wide 20° cleaning stream area.</p>", 'code': '12G966'}]
Invalid JSON: 

Time for extract_customer_attributes: 1.0120258331298828
Time for split_process_and_message_from_response: 2.4080276489257812e-05
INFO:     127.0.0.1:58195 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:45:58,228 - INFO - fast_api_main/ Fetching images for products: ["12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size, 3,625 psi Max. Pressure, 1/4 in (F)NPT APPROVED VENDOR <p>Featuring an impact-resistant rubber housing, this nozzle improves your washer's efficiency and provides the blasting power of a 0° nozzle over a wide 20° cleaning stream area.</p>, 12G966"]
2024-07-15 16:45:58,228 - INFO - grainger_image_util item.part[-1]: 12G966 item.part[0]: 12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size
2024-07-15 16:45:58,381 - INFO - fast_api_main/ Total time to fetch images: 0.0018050670623779297 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/12G966_AS02?$lgmain$ for 12G966 in 0.00 seconds
INFO:     127.0.0.1:58198 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:45:58,478 - INFO - fast_api_main/ Starting reviews at 1721076358.478406
INFO:     ('127.0.0.1', 58200) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:45:58,479 - INFO - fast_api_main/ Sending review at 1721076358.4797802
2024-07-15 16:45:58,479 - INFO - fast_api_main/ Fetching reviews for product: 12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size, 3,625 psi Max. Pressure, 1/4 in (F)NPT APPROVED VENDOR <p>Featuring an impact-resistant rubber housing, this nozzle improves your washer's efficiency and provides the blasting power of a 0° nozzle over a wide 20° cleaning stream area.</p>, 12G966
2024-07-15 16:46:13,439 - INFO - fast_api_main/ Reviews for product 12G966: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ["Easy to put on and doesn't rip"]}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 16:46:13,444 - INFO - WebSocket disconnected
2024-07-15 16:46:13,444 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 16:46:14,721 - INFO - fast_api_main/ Received question: Find me details about Product 12G966  with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:46:14,721 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: Tell me about products 12E913 and 12F877. MESSAGE: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:\n\nProduct 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\nProduct 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.\n\nPlease let me know if you need any other information or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:46:14,721 - INFO - fast_api_main/ Processing question: Find me details about Product 12G966 
2024-07-15 16:46:15,811 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: Tell me about products 12E913 and 12F877. MESSAGE: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:\n\nProduct 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\nProduct 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.\n\nPlease let me know if you need any other information or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:46:21,883 - INFO - chat_processor/ chat_procesing: message: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.
2024-07-15 16:46:21,883 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size, 3,625 psi Max. Pressure, 1/4 in (F)NPT APPROVED VENDOR <p>Featuring an impact-resistant rubber housing, this nozzle improves your washer's efficiency and provides the blasting power of a 0° nozzle over a wide 20° cleaning stream area.</p>", 'code': '12G966'}]}
2024-07-15 16:46:21,883 - INFO - fast_api_main/ Message: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.
2024-07-15 16:46:21,883 - INFO - fast_api_main/ Response json: {'products': [{'product': "12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size, 3,625 psi Max. Pressure, 1/4 in (F)NPT APPROVED VENDOR <p>Featuring an impact-resistant rubber housing, this nozzle improves your washer's efficiency and provides the blasting power of a 0° nozzle over a wide 20° cleaning stream area.</p>", 'code': '12G966'}]}
2024-07-15 16:46:21,883 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-15 16:46:21,883 - INFO - fast_api_main/ Time to get attributes: 1.0905449390411377
2024-07-15 16:46:21,883 - INFO - fast_api_main/ Updated chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: Tell me about products 12E913 and 12F877. MESSAGE: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:\n\nProduct 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\nProduct 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.\n\nPlease let me know if you need any other information or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:46:21,883 - INFO - fast_api_main/ Processed question: Find me details about Product 12G966  with message: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.
2024-07-15 16:46:21,883 - INFO - fast_api_main/ Products retrieved: [{'product': "12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size, 3,625 psi Max. Pressure, 1/4 in (F)NPT APPROVED VENDOR <p>Featuring an impact-resistant rubber housing, this nozzle improves your washer's efficiency and provides the blasting power of a 0° nozzle over a wide 20° cleaning stream area.</p>", 'code': '12G966'}]
Invalid JSON: 

Time for extract_customer_attributes: 1.0900661945343018
Time for split_process_and_message_from_response: 2.47955322265625e-05
INFO:     127.0.0.1:58211 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:46:21,902 - INFO - fast_api_main/ Fetching images for products: ["12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size, 3,625 psi Max. Pressure, 1/4 in (F)NPT APPROVED VENDOR <p>Featuring an impact-resistant rubber housing, this nozzle improves your washer's efficiency and provides the blasting power of a 0° nozzle over a wide 20° cleaning stream area.</p>, 12G966"]
2024-07-15 16:46:21,902 - INFO - grainger_image_util item.part[-1]: 12G966 item.part[0]: 12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size
2024-07-15 16:46:22,093 - INFO - fast_api_main/ Total time to fetch images: 0.002499103546142578 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/12G966_AS02?$lgmain$ for 12G966 in 0.00 seconds
INFO:     127.0.0.1:58216 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:46:22,193 - INFO - fast_api_main/ Starting reviews at 1721076382.1934159
INFO:     ('127.0.0.1', 58218) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:46:22,195 - INFO - fast_api_main/ Sending review at 1721076382.195167
2024-07-15 16:46:22,195 - INFO - fast_api_main/ Fetching reviews for product: 12G966 APPROVED VENDOR Turbo Rotary Spray Nozzle: 3.5 Nozzle Size, 3,625 psi Max. Pressure, 1/4 in (F)NPT APPROVED VENDOR <p>Featuring an impact-resistant rubber housing, this nozzle improves your washer's efficiency and provides the blasting power of a 0° nozzle over a wide 20° cleaning stream area.</p>, 12G966
2024-07-15 16:46:34,688 - INFO - fast_api_main/ Reviews for product 12G966: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ["Easy to put on and doesn't rip"]}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 16:46:34,695 - INFO - WebSocket disconnected
2024-07-15 16:46:34,695 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 16:49:47,154 - INFO - fast_api_main/ Received question: I want details on product 12G966 with session_id: e9287202-5be1-4547-a980-d053ac11fcb7
2024-07-15 16:49:47,155 - INFO - fast_api_main/ Current chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: Tell me about products 12E913 and 12F877. MESSAGE: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:\n\nProduct 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\nProduct 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.\n\nPlease let me know if you need any other information or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:49:47,155 - INFO - fast_api_main/ Processing question: I want details on product 12G966
2024-07-15 16:49:48,332 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: Tell me about products 12E913 and 12F877. MESSAGE: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:\n\nProduct 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\nProduct 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.\n\nPlease let me know if you need any other information or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:49:55,135 - INFO - chat_processor/ chat_procesing: message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 16:49:55,135 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]}
2024-07-15 16:49:55,135 - INFO - fast_api_main/ Message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 16:49:55,135 - INFO - fast_api_main/ Response json: {'products': [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]}
2024-07-15 16:49:55,135 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-15 16:49:55,135 - INFO - fast_api_main/ Time to get attributes: 1.1775600910186768
2024-07-15 16:49:55,135 - INFO - fast_api_main/ Updated chat history for session_id e9287202-5be1-4547-a980-d053ac11fcb7: ["QUESTION: tape that holds in cold environements for my commercial freezer in my restaurant.. MESSAGE: Hello! Based on your need for tape that can hold in cold environments like a commercial freezer, I would recommend the START INTERNATIONAL tape dispenser with item code 11J959. This benchtop tape dispenser can work with various tapes including packaging tape, strapping tape, and masking tape which should meet your restaurant's needs for securing items in a freezer. Please let me know if you need any other recommendations for your restaurant!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: No I need tape not a tape dispenser. MESSAGE: I apologize, but it looks like we do not have individual rolls of tape available. However, I can offer you some excellent tape dispensers that will allow you to easily apply tape as needed. I've listed 5 tape dispenser options from our catalog that may meet your needs. Please let me know if you would like any additional information on these products. I'm happy to help find the right tape dispensing solution for you!. CUSTOMER ATTRIBUTES: {}", 'QUESTION: Do you have any non-skip tape that will stay adhered in cold environments?. MESSAGE: Hello! Based on your question, I recommend the following non-skip tapes that will adhere well in cold environments:\n\n- 12E913 Anti-Slip Tape (6 in x 60 ft, 41 mil thick) \n- 12F877 Anti-Slip Tape (12 in x 30 ft, 53 mil thick)\n\nBoth of these coarse, acrylic anti-slip tapes have a durable high-friction surface and thick tape that will stay adhered even in cold, muddy, greasy or oily conditions. Please let me know if you need any other details or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: Tell me about 12E913 and . MESSAGE: Unfortunately I could not find any information on product 12E913 in the provided catalog. However, based on the details provided, I would recommend our durable plastic 12G993 utility cart, which has a 1,000 lb load capacity and is great for transporting items around warehouses and manufacturing facilities. Let me know if you need any other product recommendations for your large manufacturing business!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}", "QUESTION: Tell me about products 12E913 and 12F877. MESSAGE: Unfortunately the catalog does not contain any information about products 12E913 or 12F877. However, here are the details for two other products that may be of interest:\n\nProduct 12G966 is a lightweight plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This durable pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\nProduct 48WG61 is a blue, nestable shelf bin that is 11 5/8 inches long and 4 1/8 by 4 inches wide. It includes label holders and can be used to create color-coded storage. This plastic bin is lightweight, durable, and reusable.\n\nPlease let me know if you need any other information or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': '', 'Size': '', 'SustainabilityFocus': '', 'InventoryManager': '', 'Location': ''}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}", "QUESTION: Find me details about Product 12G966 . MESSAGE: I'm sorry, I could not find any product with code 12G966 in our catalog. Please let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {}", "QUESTION: I want details on product 12G966. MESSAGE: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:49:55,135 - INFO - fast_api_main/ Processed question: I want details on product 12G966 with message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 16:49:55,135 - INFO - fast_api_main/ Products retrieved: [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]
Invalid JSON: 

Time for extract_customer_attributes: 1.177137851715088
Time for split_process_and_message_from_response: 2.4080276489257812e-05
INFO:     127.0.0.1:58333 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:49:55,152 - INFO - fast_api_main/ Fetching images for products: ['12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR, 3HPT9']
2024-07-15 16:49:55,152 - INFO - grainger_image_util item.part[-1]: 3HPT9 item.part[0]: 12G966 APPROVED VENDOR Extension Spring: Screen Door
2024-07-15 16:49:55,443 - INFO - fast_api_main/ Total time to fetch images: 0.0014688968658447266 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/3HPT7_AS01?$lgmain$ for 3HPT9 in 0.00 seconds
INFO:     127.0.0.1:58338 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:49:55,510 - INFO - fast_api_main/ Starting reviews at 1721076595.5103931
INFO:     ('127.0.0.1', 58340) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:49:55,511 - INFO - fast_api_main/ Sending review at 1721076595.511843
2024-07-15 16:49:55,512 - INFO - fast_api_main/ Fetching reviews for product: 12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR, 3HPT9
2024-07-15 16:50:08,397 - INFO - fast_api_main/ Reviews for product 3HPT9: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ["Easy to put on and doesn't rip"]}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 16:50:08,402 - INFO - WebSocket disconnected
2024-07-15 16:50:08,402 - WARNING - WebSocket already closed
INFO:     connection closed
INFO:     127.0.0.1:58661 - "POST /ask_question HTTP/1.1" 422 Unprocessable Entity
ERROR:root:Attempt 1 failed: 422 - {"detail":[{"type":"bool_type","loc":["body","clear_history"],"msg":"Input should be a valid boolean","input":[]}]}
INFO:     127.0.0.1:58667 - "POST /ask_question HTTP/1.1" 422 Unprocessable Entity
ERROR:root:Attempt 2 failed: 422 - {"detail":[{"type":"bool_type","loc":["body","clear_history"],"msg":"Input should be a valid boolean","input":[]}]}
INFO:     127.0.0.1:58673 - "POST /ask_question HTTP/1.1" 422 Unprocessable Entity
ERROR:root:Attempt 3 failed: 422 - {"detail":[{"type":"bool_type","loc":["body","clear_history"],"msg":"Input should be a valid boolean","input":[]}]}
INFO:     127.0.0.1:58676 - "POST /ask_question HTTP/1.1" 422 Unprocessable Entity
ERROR:root:Attempt 4 failed: 422 - {"detail":[{"type":"bool_type","loc":["body","clear_history"],"msg":"Input should be a valid boolean","input":[]}]}
INFO:     127.0.0.1:58679 - "POST /ask_question HTTP/1.1" 422 Unprocessable Entity
ERROR:root:Attempt 5 failed: 422 - {"detail":[{"type":"bool_type","loc":["body","clear_history"],"msg":"Input should be a valid boolean","input":[]}]}
ERROR:root:All 5 attempts failed.
ERROR:root:Failed to process question: No response
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-15 16:59:21,310 - INFO - Found credentials in environment variables.
2024-07-15 16:59:21,592 - INFO - Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-15 16:59:21,732 - INFO - Initializing Titan Embeddings Model...
2024-07-15 16:59:21,732 - INFO - Titan Embeddings Model initialized.
2024-07-15 16:59:21,732 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-15 16:59:21,873 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 16:59:21,874 - INFO - Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
2024-07-15 16:59:21,901 - INFO - Documents file loaded successfully!
2024-07-15 16:59:21,901 - INFO - Structured documents created:
2024-07-15 16:59:21,901 - INFO - Document 1 of 11424:
2024-07-15 16:59:21,901 - INFO - 3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy OHAUS <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspend
2024-07-15 16:59:21,901 - INFO - Document 2 of 11424:
2024-07-15 16:59:21,901 - INFO - 3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black GEORGIA-PACIFIC <p>Motion-activated paper towel dispensers offer hands-free dispensing to help im
2024-07-15 16:59:21,901 - INFO - Document 3 of 11424:
2024-07-15 16:59:21,901 - INFO - 5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK TOUGH GUY <p>Compostable trash bags collect compostable waste for use in commercial composting f
2024-07-15 16:59:21,901 - INFO - Document 4 of 11424:
2024-07-15 16:59:21,901 - INFO - 14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow PELICAN <p>These safety-rated flashlights set their head in line with their body for a tradi
2024-07-15 16:59:21,901 - INFO - Document 5 of 11424:
2024-07-15 16:59:21,901 - INFO - 4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK TOUGH GUY <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightwei
2024-07-15 16:59:21,929 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 16:59:21,929 - INFO - Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
2024-07-15 16:59:22,019 - INFO - Loading faiss with AVX2 support.
2024-07-15 16:59:22,046 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-15 16:59:22,308 - INFO - FAISS vector store loaded from pickle file.
2024-07-15 16:59:22,316 - INFO - Initializing ChromeDriver...
2024-07-15 16:59:22,316 - INFO - ====== WebDriver manager ======
2024-07-15 16:59:22,628 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 16:59:22,678 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 16:59:22,715 - INFO - Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126/chromedriver-mac-x64/chromedriver] found in cache

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

2024-07-15 16:59:24,302 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [23673]
INFO:     Waiting for application startup.
2024-07-15 16:59:24,347 - INFO - Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2024-07-15 16:59:24,937 - INFO -  fast_api_main/ Adding new session ID 0066d1f8-7a15-4984-80e6-4ac8dcfdea23 to session_store
2024-07-15 16:59:24,937 - INFO - fast_api_main/ Received question: Tape for code environments with session_id: 0066d1f8-7a15-4984-80e6-4ac8dcfdea23
2024-07-15 16:59:24,938 - INFO - fast_api_main/ Current chat history for session_id 0066d1f8-7a15-4984-80e6-4ac8dcfdea23: []
2024-07-15 16:59:24,938 - INFO - fast_api_main/ Processing question: Tape for code environments
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 16:59:27,797 - INFO - chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 16:59:36,605 - INFO - chat_processor/ chat_procesing: message: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:

- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution 
- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia

The Packaging Tape with Message can display handling instructions or shipping messages. The Tape Dispenser dispenses 2 inch wide tape from 3 inch cores. Please let me know if you need any other recommendations or have additional questions!
2024-07-15 16:59:36,605 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution', 'code': '15C747'}, {'product': 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J997'}]}
2024-07-15 16:59:36,605 - INFO - fast_api_main/ Message: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:

- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution 
- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia

The Packaging Tape with Message can display handling instructions or shipping messages. The Tape Dispenser dispenses 2 inch wide tape from 3 inch cores. Please let me know if you need any other recommendations or have additional questions!
2024-07-15 16:59:36,605 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution', 'code': '15C747'}, {'product': 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J997'}]}
2024-07-15 16:59:36,605 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
2024-07-15 16:59:36,605 - INFO - fast_api_main/ Time to get attributes: 2.8588857650756836
2024-07-15 16:59:36,605 - INFO - fast_api_main/ Updated chat history for session_id 0066d1f8-7a15-4984-80e6-4ac8dcfdea23: ["QUESTION: Tape for code environments. MESSAGE: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:\n\n- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution \n- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia\n\nThe Packaging Tape with Message can display handling instructions or shipping messages. The Tape Dispenser dispenses 2 inch wide tape from 3 inch cores. Please let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
2024-07-15 16:59:36,605 - INFO - fast_api_main/ Processed question: Tape for code environments with message: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:

- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution 
- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia

The Packaging Tape with Message can display handling instructions or shipping messages. The Tape Dispenser dispenses 2 inch wide tape from 3 inch cores. Please let me know if you need any other recommendations or have additional questions!
2024-07-15 16:59:36,605 - INFO - fast_api_main/ Products retrieved: [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution', 'code': '15C747'}, {'product': 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J997'}]
Time for extract_customer_attributes: 2.85687518119812
Time for split_process_and_message_from_response: 0.00015282630920410156
INFO:     127.0.0.1:58843 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:59:36,606 - INFO -  fast_api_main/ Adding new session ID bf5c36c9-68c8-4950-bce1-29b8ba0c8383 to session_store
2024-07-15 16:59:36,606 - INFO - fast_api_main/ Received question: I want details on product 12G966 with session_id: bf5c36c9-68c8-4950-bce1-29b8ba0c8383
2024-07-15 16:59:36,606 - INFO - fast_api_main/ Current chat history for session_id bf5c36c9-68c8-4950-bce1-29b8ba0c8383: []
2024-07-15 16:59:36,606 - INFO - fast_api_main/ Processing question: I want details on product 12G966
2024-07-15 16:59:37,729 - INFO - chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 1 failed: timed out
2024-07-15 16:59:48,557 - INFO - chat_processor/ chat_procesing: message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 16:59:48,558 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]}
2024-07-15 16:59:48,558 - INFO - fast_api_main/ Message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 16:59:48,558 - INFO - fast_api_main/ Response json: {'products': [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]}
2024-07-15 16:59:48,558 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-15 16:59:48,559 - INFO - fast_api_main/ Time to get attributes: 1.1228241920471191
2024-07-15 16:59:48,559 - INFO - fast_api_main/ Updated chat history for session_id bf5c36c9-68c8-4950-bce1-29b8ba0c8383: ["QUESTION: I want details on product 12G966. MESSAGE: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:59:48,559 - INFO - fast_api_main/ Processed question: I want details on product 12G966 with message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 16:59:48,559 - INFO - fast_api_main/ Products retrieved: [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]
Invalid JSON: 

Time for extract_customer_attributes: 1.1223821640014648
Time for split_process_and_message_from_response: 8.916854858398438e-05
INFO:     127.0.0.1:58848 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:59:48,560 - INFO - fast_api_main/ Fetching images for products: ['Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution, 15C747', 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J997']
2024-07-15 16:59:48,560 - INFO - grainger_image_util item.part[-1]: 15C747 item.part[0]: Packaging Tape with Message: 1.9 mil Tape Thick
2024-07-15 16:59:48,563 - INFO - grainger_image_util item.part[-1]: 11J997 item.part[0]: Tape Dispenser: For 2 in Max Tape Wd
2024-07-15 16:59:49,287 - INFO - fast_api_main/ Total time to fetch images: 0.0035190582275390625 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/15C747_GC01?$lgmain$ for 15C747 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/11J983_AS01?$lgmain$ for 11J997 in 0.00 seconds
INFO:     127.0.0.1:58855 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:59:49,647 - INFO - fast_api_main/ Starting reviews at 1721077189.647787
INFO:     ('127.0.0.1', 58877) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:59:49,649 - INFO - fast_api_main/ Sending review at 1721077189.6492312
2024-07-15 16:59:49,649 - INFO - fast_api_main/ Fetching reviews for product: Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution, 15C747
2024-07-15 16:59:49,649 - INFO - fast_api_main/ Fetching reviews for product: Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J997
2024-07-15 16:59:52,017 - INFO - fast_api_main/ Received question: I want details on product 12G966 with session_id: bf5c36c9-68c8-4950-bce1-29b8ba0c8383
2024-07-15 16:59:52,017 - INFO - fast_api_main/ Current chat history for session_id bf5c36c9-68c8-4950-bce1-29b8ba0c8383: ["QUESTION: I want details on product 12G966. MESSAGE: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:59:52,018 - INFO - fast_api_main/ Processing question: I want details on product 12G966
2024-07-15 16:59:53,088 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: I want details on product 12G966. MESSAGE: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:59:58,018 - INFO - chat_processor/ chat_procesing: message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 16:59:58,018 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]}
2024-07-15 16:59:58,018 - INFO - fast_api_main/ Message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 16:59:58,018 - INFO - fast_api_main/ Response json: {'products': [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]}
2024-07-15 16:59:58,018 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-15 16:59:58,018 - INFO - fast_api_main/ Time to get attributes: 1.0707807540893555
2024-07-15 16:59:58,018 - INFO - fast_api_main/ Updated chat history for session_id bf5c36c9-68c8-4950-bce1-29b8ba0c8383: ["QUESTION: I want details on product 12G966. MESSAGE: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.. CUSTOMER ATTRIBUTES: {}", "QUESTION: I want details on product 12G966. MESSAGE: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 16:59:58,018 - INFO - fast_api_main/ Processed question: I want details on product 12G966 with message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 16:59:58,018 - INFO - fast_api_main/ Products retrieved: [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]
Invalid JSON: 

Time for extract_customer_attributes: 1.07033109664917
Time for split_process_and_message_from_response: 6.198883056640625e-05
INFO:     127.0.0.1:58880 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 16:59:58,042 - INFO - fast_api_main/ Fetching images for products: ['12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR, 3HPT9']
2024-07-15 16:59:58,042 - INFO - grainger_image_util item.part[-1]: 3HPT9 item.part[0]: 12G966 APPROVED VENDOR Extension Spring: Screen Door
2024-07-15 16:59:58,174 - INFO - fast_api_main/ Total time to fetch images: 0.002336740493774414 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/3HPT7_AS01?$lgmain$ for 3HPT9 in 0.00 seconds
INFO:     127.0.0.1:58915 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 16:59:58,294 - INFO - fast_api_main/ Starting reviews at 1721077198.294097
INFO:     ('127.0.0.1', 58922) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 16:59:58,295 - INFO - fast_api_main/ Sending review at 1721077198.295927
2024-07-15 16:59:58,296 - INFO - fast_api_main/ Fetching reviews for product: 12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR, 3HPT9
2024-07-15 17:00:12,063 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:00:21,342 - INFO -  fast_api_main/ Adding new session ID 2b4aa1ef-686c-4d26-b1f5-64d9e86e7de2 to session_store
2024-07-15 17:00:21,342 - INFO - fast_api_main/ Received question: Provide details on product 12G966  with session_id: 2b4aa1ef-686c-4d26-b1f5-64d9e86e7de2
2024-07-15 17:00:21,342 - INFO - fast_api_main/ Clearing chat history for session_id: 2b4aa1ef-686c-4d26-b1f5-64d9e86e7de2
2024-07-15 17:00:21,342 - INFO - fast_api_main/ Current chat history for session_id 2b4aa1ef-686c-4d26-b1f5-64d9e86e7de2: []
2024-07-15 17:00:21,342 - INFO - fast_api_main/ Processing question: Provide details on product 12G966 
2024-07-15 17:00:21,610 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:00:21,700 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:00:23,194 - INFO - chat_processor/ Chat History passed to processor: []
2024-07-15 17:00:30,556 - INFO - chat_processor/ chat_procesing: message: Hello! I looked up the details on product 12G966 for you. This is a lightweight, durable plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This pallet will not rot or splinter, allows 2-way entry by pallet truck, and can be stored in a variety of rack systems. The extruded aluminum pallets can be stacked for increased strength. Please let me know if you need any other details!
2024-07-15 17:00:30,556 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength.', 'code': '12G966'}]}
2024-07-15 17:00:30,556 - INFO - fast_api_main/ Message: Hello! I looked up the details on product 12G966 for you. This is a lightweight, durable plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This pallet will not rot or splinter, allows 2-way entry by pallet truck, and can be stored in a variety of rack systems. The extruded aluminum pallets can be stacked for increased strength. Please let me know if you need any other details!
2024-07-15 17:00:30,556 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength.', 'code': '12G966'}]}
2024-07-15 17:00:30,556 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}
2024-07-15 17:00:30,556 - INFO - fast_api_main/ Time to get attributes: 1.8519213199615479
2024-07-15 17:00:30,556 - INFO - fast_api_main/ Updated chat history for session_id 2b4aa1ef-686c-4d26-b1f5-64d9e86e7de2: ["QUESTION: Provide details on product 12G966 . MESSAGE: Hello! I looked up the details on product 12G966 for you. This is a lightweight, durable plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This pallet will not rot or splinter, allows 2-way entry by pallet truck, and can be stored in a variety of rack systems. The extruded aluminum pallets can be stacked for increased strength. Please let me know if you need any other details!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 17:00:30,556 - INFO - fast_api_main/ Processed question: Provide details on product 12G966  with message: Hello! I looked up the details on product 12G966 for you. This is a lightweight, durable plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This pallet will not rot or splinter, allows 2-way entry by pallet truck, and can be stored in a variety of rack systems. The extruded aluminum pallets can be stacked for increased strength. Please let me know if you need any other details!
2024-07-15 17:00:30,556 - INFO - fast_api_main/ Products retrieved: [{'product': 'Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength.', 'code': '12G966'}]
Time for extract_customer_attributes: 1.8512089252471924
Time for split_process_and_message_from_response: 5.1975250244140625e-05
INFO:     127.0.0.1:58985 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 17:00:30,557 - ERROR - fast_api_main/ Error navigating to reviews for 12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR, 3HPT9: Message: 
Stacktrace:
0   chromedriver                        0x00000001015620e8 chromedriver + 5169384
1   chromedriver                        0x0000000101559fba chromedriver + 5136314
2   chromedriver                        0x00000001010d636c chromedriver + 402284
3   chromedriver                        0x0000000101123740 chromedriver + 718656
4   chromedriver                        0x0000000101123a01 chromedriver + 719361
5   chromedriver                        0x0000000101168bc4 chromedriver + 1002436
6   chromedriver                        0x0000000101146add chromedriver + 862941
7   chromedriver                        0x0000000101165f57 chromedriver + 991063
8   chromedriver                        0x0000000101146853 chromedriver + 862291
9   chromedriver                        0x00000001011165c6 chromedriver + 665030
10  chromedriver                        0x0000000101116e4e chromedriver + 667214
11  chromedriver                        0x0000000101524d00 chromedriver + 4918528
12  chromedriver                        0x0000000101529cfd chromedriver + 4939005
13  chromedriver                        0x000000010152a3d5 chromedriver + 4940757
14  chromedriver                        0x0000000101505de4 chromedriver + 4791780
15  chromedriver                        0x000000010152a6c9 chromedriver + 4941513
16  chromedriver                        0x00000001014f75b4 chromedriver + 4732340
17  chromedriver                        0x000000010154a898 chromedriver + 5073048
18  chromedriver                        0x000000010154aa57 chromedriver + 5073495
19  chromedriver                        0x0000000101559b6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 17:00:30,572 - INFO - WebSocket disconnected
2024-07-15 17:00:30,572 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 17:00:30,671 - INFO - fast_api_main/ Fetching images for products: ['Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength., 12G966']
2024-07-15 17:00:30,671 - INFO - grainger_image_util item.part[-1]: 12G966 item.part[0]: Pallet: 15 1/2 in Lg
2024-07-15 17:00:31,149 - INFO - fast_api_main/ Total time to fetch images: 0.003403186798095703 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/12G966_AS02?$lgmain$ for 12G966 in 0.00 seconds
INFO:     127.0.0.1:58990 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 17:00:31,383 - INFO - fast_api_main/ Starting reviews at 1721077231.383727
INFO:     ('127.0.0.1', 58992) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 17:00:31,385 - INFO - fast_api_main/ Sending review at 1721077231.385547
2024-07-15 17:00:31,385 - INFO - fast_api_main/ Fetching reviews for product: Pallet: 15 1/2 in Lg, 21 in Wd, 1 1/2 in Ht, 750 lb Static Load Capacity APPROVED VENDOR Lightweight, durable plastic pallet will not rot or splinter; provides 2-way entry by pallet truck. Allows products to be stored in a variety of supported or edge rack systems. Stackable extruded aluminum pallets offer increased strength., 12G966
2024-07-15 17:00:40,045 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:00:40,234 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:00:40,786 - INFO - fast_api_main/ Reviews for product 15C747: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
2024-07-15 17:00:40,786 - ERROR - fast_api_main/ Error navigating to reviews for Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J997: Message: 
Stacktrace:
0   chromedriver                        0x00000001015620e8 chromedriver + 5169384
1   chromedriver                        0x0000000101559fba chromedriver + 5136314
2   chromedriver                        0x00000001010d636c chromedriver + 402284
3   chromedriver                        0x0000000101123740 chromedriver + 718656
4   chromedriver                        0x0000000101123a01 chromedriver + 719361
5   chromedriver                        0x0000000101168bc4 chromedriver + 1002436
6   chromedriver                        0x0000000101146add chromedriver + 862941
7   chromedriver                        0x0000000101165f57 chromedriver + 991063
8   chromedriver                        0x0000000101146853 chromedriver + 862291
9   chromedriver                        0x00000001011165c6 chromedriver + 665030
10  chromedriver                        0x0000000101116e4e chromedriver + 667214
11  chromedriver                        0x0000000101524d00 chromedriver + 4918528
12  chromedriver                        0x0000000101529cfd chromedriver + 4939005
13  chromedriver                        0x000000010152a3d5 chromedriver + 4940757
14  chromedriver                        0x0000000101505de4 chromedriver + 4791780
15  chromedriver                        0x000000010152a6c9 chromedriver + 4941513
16  chromedriver                        0x00000001014f75b4 chromedriver + 4732340
17  chromedriver                        0x000000010154a898 chromedriver + 5073048
18  chromedriver                        0x000000010154aa57 chromedriver + 5073495
19  chromedriver                        0x0000000101559b6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 17:00:40,786 - INFO - fast_api_main/ Sending review at 1721077240.7866728
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 17:00:40,794 - INFO - WebSocket disconnected
2024-07-15 17:00:40,794 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 17:00:48,547 - INFO - fast_api_main/ Reviews for product 12G966: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ["I have a wet basement . I got tired of changing wooden pallets they get moldy and you can't wash them and then you have to get rid of them .\nWith plastic i can wash it off.", 'I use these for my wood racks.  I put 2 together and put my wood brackets on top and stack my wood on them.  Keeps my wood off the ground, easy to clean under, keeps the bugs out of my wood, they were a great price, VERY sturdy and shipped free', 'I\'m using these as a base for my firewood racks.  Since they are 5" high they elevate my wood off of the ground and away from moisture.  They are easy to clean under as they are 5" off the ground and the blower just moves the debris from under them.  I love that they will never rot and they can hold up to 15,000 lbs.  Very good investment', 'great']}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 17:00:48,559 - INFO - WebSocket disconnected
2024-07-15 17:00:48,559 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 17:01:53,063 - INFO - fast_api_main/ Received question: Provide details on product  31AR24 with session_id: 2b4aa1ef-686c-4d26-b1f5-64d9e86e7de2
2024-07-15 17:01:53,063 - INFO - fast_api_main/ Current chat history for session_id 2b4aa1ef-686c-4d26-b1f5-64d9e86e7de2: ["QUESTION: Provide details on product 12G966 . MESSAGE: Hello! I looked up the details on product 12G966 for you. This is a lightweight, durable plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This pallet will not rot or splinter, allows 2-way entry by pallet truck, and can be stored in a variety of rack systems. The extruded aluminum pallets can be stacked for increased strength. Please let me know if you need any other details!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 17:01:53,063 - INFO - fast_api_main/ Processing question: Provide details on product  31AR24
2024-07-15 17:01:54,859 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: Provide details on product 12G966 . MESSAGE: Hello! I looked up the details on product 12G966 for you. This is a lightweight, durable plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This pallet will not rot or splinter, allows 2-way entry by pallet truck, and can be stored in a variety of rack systems. The extruded aluminum pallets can be stacked for increased strength. Please let me know if you need any other details!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 17:01:58,365 - INFO - chat_processor/ chat_procesing: message: None
2024-07-15 17:01:58,365 - INFO - chat_processor/ chat_procesing: product_list_as_json: None
2024-07-15 17:01:58,365 - ERROR - fast_api_main/ Error processing chat question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 17:01:58,367 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

2024-07-15 17:01:58,367 - ERROR - Error in fast_api_main/ask_question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 17:01:58,368 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

Time for extract_customer_attributes: 1.7953860759735107
Error decoding JSON: Expecting value: line 1 column 1 (char 0)
Time for split_process_and_message_from_response: 4.982948303222656e-05
INFO:     127.0.0.1:59045 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 17:02:03,399 - INFO - fast_api_main/ Received question: Provide details on product  31AR24 with session_id: 2b4aa1ef-686c-4d26-b1f5-64d9e86e7de2
2024-07-15 17:02:03,399 - INFO - fast_api_main/ Current chat history for session_id 2b4aa1ef-686c-4d26-b1f5-64d9e86e7de2: ["QUESTION: Provide details on product 12G966 . MESSAGE: Hello! I looked up the details on product 12G966 for you. This is a lightweight, durable plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This pallet will not rot or splinter, allows 2-way entry by pallet truck, and can be stored in a variety of rack systems. The extruded aluminum pallets can be stacked for increased strength. Please let me know if you need any other details!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 17:02:03,400 - INFO - fast_api_main/ Processing question: Provide details on product  31AR24
2024-07-15 17:02:05,196 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: Provide details on product 12G966 . MESSAGE: Hello! I looked up the details on product 12G966 for you. This is a lightweight, durable plastic pallet that is 15 1/2 inches long, 21 inches wide, and 1 1/2 inches high. It has a 750 lb static load capacity. This pallet will not rot or splinter, allows 2-way entry by pallet truck, and can be stored in a variety of rack systems. The extruded aluminum pallets can be stacked for increased strength. Please let me know if you need any other details!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocused': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 17:02:08,765 - INFO - chat_processor/ chat_procesing: message: None
2024-07-15 17:02:08,766 - INFO - chat_processor/ chat_procesing: product_list_as_json: None
2024-07-15 17:02:08,766 - ERROR - fast_api_main/ Error processing chat question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 17:02:08,766 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

2024-07-15 17:02:08,766 - ERROR - Error in fast_api_main/ask_question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 17:02:08,767 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 63, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

Time for extract_customer_attributes: 1.7958900928497314
Error decoding JSON: Expecting value: line 1 column 1 (char 0)
Time for split_process_and_message_from_response: 9.870529174804688e-05
INFO:     127.0.0.1:59051 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-15 17:03:46,900 - INFO - Found credentials in environment variables.
2024-07-15 17:03:47,174 - INFO - Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-15 17:03:47,320 - INFO - Initializing Titan Embeddings Model...
2024-07-15 17:03:47,320 - INFO - Titan Embeddings Model initialized.
2024-07-15 17:03:47,320 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-15 17:03:47,439 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 17:03:47,439 - INFO - Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
2024-07-15 17:03:47,465 - INFO - Documents file loaded successfully!
2024-07-15 17:03:47,465 - INFO - Structured documents created:
2024-07-15 17:03:47,465 - INFO - Document 1 of 11424:
2024-07-15 17:03:47,465 - INFO - 3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy OHAUS <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspend
2024-07-15 17:03:47,465 - INFO - Document 2 of 11424:
2024-07-15 17:03:47,465 - INFO - 3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black GEORGIA-PACIFIC <p>Motion-activated paper towel dispensers offer hands-free dispensing to help im
2024-07-15 17:03:47,465 - INFO - Document 3 of 11424:
2024-07-15 17:03:47,465 - INFO - 5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK TOUGH GUY <p>Compostable trash bags collect compostable waste for use in commercial composting f
2024-07-15 17:03:47,466 - INFO - Document 4 of 11424:
2024-07-15 17:03:47,466 - INFO - 14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow PELICAN <p>These safety-rated flashlights set their head in line with their body for a tradi
2024-07-15 17:03:47,466 - INFO - Document 5 of 11424:
2024-07-15 17:03:47,466 - INFO - 4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK TOUGH GUY <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightwei
2024-07-15 17:03:47,495 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 17:03:47,495 - INFO - Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
2024-07-15 17:03:47,589 - INFO - Loading faiss with AVX2 support.
2024-07-15 17:03:47,618 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-15 17:03:47,936 - INFO - FAISS vector store loaded from pickle file.
2024-07-15 17:03:47,944 - INFO - Initializing ChromeDriver...
2024-07-15 17:03:47,944 - INFO - ====== WebDriver manager ======

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

2024-07-15 17:03:48,280 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 17:03:48,345 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 17:03:48,399 - INFO - Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126/chromedriver-mac-x64/chromedriver] found in cache
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
2024-07-15 17:03:52,329 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [23793]
INFO:     Waiting for application startup.
2024-07-15 17:03:52,368 - INFO - Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2024-07-15 17:03:55,838 - INFO -  fast_api_main/ Adding new session ID bf1bfe6b-4b53-46e4-a401-a53edc3064d4 to session_store
2024-07-15 17:03:55,838 - INFO - fast_api_main/ Received question: Tape for code environments with session_id: bf1bfe6b-4b53-46e4-a401-a53edc3064d4
2024-07-15 17:03:55,838 - INFO - fast_api_main/ Current chat history for session_id bf1bfe6b-4b53-46e4-a401-a53edc3064d4: []
2024-07-15 17:03:55,838 - INFO - fast_api_main/ Processing question: Tape for code environments
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 17:03:57,511 - INFO - chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 17:04:05,297 - INFO - chat_processor/ chat_procesing: message: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:

- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution 
- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia

The Packaging Tape with Message can display handling instructions or shipping messages. The Tape Dispenser dispenses 2 inch wide tape from 3 inch cores. Please let me know if you need any other recommendations or have additional questions!
2024-07-15 17:04:05,297 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution', 'code': '15C747'}, {'product': 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J997'}]}
2024-07-15 17:04:05,297 - INFO - chat_processor/ product_list_as_json: {'products': [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution', 'code': '15C747'}, {'product': 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J997'}]}
2024-07-15 17:04:05,297 - INFO - fast_api_main/ Message: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:

- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution 
- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia

The Packaging Tape with Message can display handling instructions or shipping messages. The Tape Dispenser dispenses 2 inch wide tape from 3 inch cores. Please let me know if you need any other recommendations or have additional questions!
2024-07-15 17:04:05,297 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution', 'code': '15C747'}, {'product': 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J997'}]}
2024-07-15 17:04:05,297 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
2024-07-15 17:04:05,297 - INFO - fast_api_main/ Time to get attributes: 1.672377109527588
2024-07-15 17:04:05,297 - INFO - fast_api_main/ Updated chat history for session_id bf1bfe6b-4b53-46e4-a401-a53edc3064d4: ["QUESTION: Tape for code environments. MESSAGE: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:\n\n- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution \n- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia\n\nThe Packaging Tape with Message can display handling instructions or shipping messages. The Tape Dispenser dispenses 2 inch wide tape from 3 inch cores. Please let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
2024-07-15 17:04:05,298 - INFO - fast_api_main/ Processed question: Tape for code environments with message: Hello! Based on your needs for an individual customer in the other industry, I would recommend the following tapes:

- 15C747 Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution 
- 11J997 Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia

The Packaging Tape with Message can display handling instructions or shipping messages. The Tape Dispenser dispenses 2 inch wide tape from 3 inch cores. Please let me know if you need any other recommendations or have additional questions!
2024-07-15 17:04:05,298 - INFO - fast_api_main/ Products retrieved: [{'product': 'Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution', 'code': '15C747'}, {'product': 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia', 'code': '11J997'}]
Time for extract_customer_attributes: 1.6709880828857422
Time for split_process_and_message_from_response: 0.00015616416931152344
INFO:     127.0.0.1:59208 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 17:04:05,299 - INFO -  fast_api_main/ Adding new session ID ed418a20-d1a7-4399-97b5-6a7d101476f0 to session_store
2024-07-15 17:04:05,299 - INFO - fast_api_main/ Received question: Provide details on product  31AR24 with session_id: ed418a20-d1a7-4399-97b5-6a7d101476f0
2024-07-15 17:04:05,299 - INFO - fast_api_main/ Current chat history for session_id ed418a20-d1a7-4399-97b5-6a7d101476f0: []
2024-07-15 17:04:05,299 - INFO - fast_api_main/ Processing question: Provide details on product  31AR24
2024-07-15 17:04:07,146 - INFO - chat_processor/ Chat History passed to processor: []
2024-07-15 17:04:10,412 - INFO - chat_processor/ chat_procesing: message: None
2024-07-15 17:04:10,413 - INFO - chat_processor/ chat_procesing: product_list_as_json: None
2024-07-15 17:04:10,413 - INFO - chat_processor/ product_list_as_json: None
2024-07-15 17:04:10,413 - ERROR - fast_api_main/ Error processing chat question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 17:04:10,414 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 64, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

2024-07-15 17:04:10,414 - ERROR - Error in fast_api_main/ask_question: the JSON object must be str, bytes or bytearray, not NoneType
2024-07-15 17:04:10,414 - ERROR - Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 64, in process_chat_question_with_customer_attribute_identifier
    product_list_as_json = json.loads(product_list_as_json)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType

Time for extract_customer_attributes: 1.8464581966400146
Error decoding JSON: Expecting value: line 1 column 1 (char 0)
Time for split_process_and_message_from_response: 5.507469177246094e-05
INFO:     127.0.0.1:59210 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
2024-07-15 17:04:10,415 - INFO -  fast_api_main/ Adding new session ID 68dfae4b-d9d9-447b-93bc-7b19ee500ae7 to session_store
2024-07-15 17:04:10,415 - INFO - fast_api_main/ Received question: I want details on product 12G966 with session_id: 68dfae4b-d9d9-447b-93bc-7b19ee500ae7
2024-07-15 17:04:10,415 - INFO - fast_api_main/ Current chat history for session_id 68dfae4b-d9d9-447b-93bc-7b19ee500ae7: []
2024-07-15 17:04:10,415 - INFO - fast_api_main/ Processing question: I want details on product 12G966
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 17:04:11,542 - INFO - chat_processor/ Chat History passed to processor: []
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:Attempt 2 failed: timed out
2024-07-15 17:04:17,160 - INFO - chat_processor/ chat_procesing: message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 17:04:17,161 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]}
2024-07-15 17:04:17,161 - INFO - chat_processor/ product_list_as_json: {'products': [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]}
2024-07-15 17:04:17,161 - INFO - fast_api_main/ Message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 17:04:17,161 - INFO - fast_api_main/ Response json: {'products': [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]}
2024-07-15 17:04:17,161 - INFO - fast_api_main/ Customer attributes retrieved: {}
2024-07-15 17:04:17,161 - INFO - fast_api_main/ Time to get attributes: 1.126532793045044
2024-07-15 17:04:17,161 - INFO - fast_api_main/ Updated chat history for session_id 68dfae4b-d9d9-447b-93bc-7b19ee500ae7: ["QUESTION: I want details on product 12G966. MESSAGE: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.. CUSTOMER ATTRIBUTES: {}"]
2024-07-15 17:04:17,161 - INFO - fast_api_main/ Processed question: I want details on product 12G966 with message: I'm sorry, the product code 12G966 was not found in our catalog. The closest match is product code 3HPT9, which is an APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 from our APPROVED VENDOR. Please let me know if you need any other details on this product or if you would like help finding a different item.
2024-07-15 17:04:17,161 - INFO - fast_api_main/ Products retrieved: [{'product': '12G966 APPROVED VENDOR Extension Spring: Screen Door, MBHD Carbon Steel, 16 1/2 in Overall Lg, ASTM A227 APPROVED VENDOR', 'code': '3HPT9'}]
Invalid JSON: 

Time for extract_customer_attributes: 1.1260459423065186
Time for split_process_and_message_from_response: 3.4809112548828125e-05
INFO:     127.0.0.1:59213 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 17:04:17,162 - INFO - fast_api_main/ Fetching images for products: ['Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution, 15C747', 'Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J997']
2024-07-15 17:04:17,162 - INFO - grainger_image_util item.part[-1]: 15C747 item.part[0]: Packaging Tape with Message: 1.9 mil Tape Thick
2024-07-15 17:04:17,166 - INFO - grainger_image_util item.part[-1]: 11J997 item.part[0]: Tape Dispenser: For 2 in Max Tape Wd
2024-07-15 17:04:17,347 - INFO - fast_api_main/ Total time to fetch images: 0.004008054733276367 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/15C747_GC01?$lgmain$ for 15C747 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/11J983_AS01?$lgmain$ for 11J997 in 0.00 seconds
INFO:     127.0.0.1:59218 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 17:04:17,964 - INFO - fast_api_main/ Starting reviews at 1721077457.964975
INFO:     ('127.0.0.1', 59232) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 17:04:17,968 - INFO - fast_api_main/ Sending review at 1721077457.968003
2024-07-15 17:04:17,968 - INFO - fast_api_main/ Fetching reviews for product: Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution, 15C747
2024-07-15 17:04:17,969 - INFO - fast_api_main/ Fetching reviews for product: Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J997
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
2024-07-15 17:04:34,721 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:04:34,891 - INFO -  fast_api_main/ Adding new session ID 4c4014cf-790d-44b6-9d5a-98206e3da1cd to session_store
2024-07-15 17:04:34,891 - INFO - fast_api_main/ Received question: Provide details on 31AR24 with session_id: 4c4014cf-790d-44b6-9d5a-98206e3da1cd
2024-07-15 17:04:34,891 - INFO - fast_api_main/ Current chat history for session_id 4c4014cf-790d-44b6-9d5a-98206e3da1cd: []
2024-07-15 17:04:34,891 - INFO - fast_api_main/ Processing question: Provide details on 31AR24
2024-07-15 17:04:36,817 - INFO - chat_processor/ Chat History passed to processor: []
2024-07-15 17:04:44,627 - INFO - chat_processor/ chat_procesing: message: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:

- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. 

- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.

Let me know if you need any other information on these products! I'm happy to help.
2024-07-15 17:04:44,627 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity', 'code': '1MCU1'}, {'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]}
2024-07-15 17:04:44,627 - INFO - chat_processor/ product_list_as_json: {'products': [{'product': 'Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity', 'code': '1MCU1'}, {'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]}
2024-07-15 17:04:44,627 - INFO - fast_api_main/ Message: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:

- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. 

- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.

Let me know if you need any other information on these products! I'm happy to help.
2024-07-15 17:04:44,628 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity', 'code': '1MCU1'}, {'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]}
2024-07-15 17:04:44,628 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': '31AR24'}
2024-07-15 17:04:44,628 - INFO - fast_api_main/ Time to get attributes: 1.9259021282196045
2024-07-15 17:04:44,628 - INFO - fast_api_main/ Updated chat history for session_id 4c4014cf-790d-44b6-9d5a-98206e3da1cd: ["QUESTION: Provide details on 31AR24. MESSAGE: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:\n\n- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\n- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.\n\nLet me know if you need any other information on these products! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': '31AR24'}"]
2024-07-15 17:04:44,628 - INFO - fast_api_main/ Processed question: Provide details on 31AR24 with message: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:

- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. 

- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.

Let me know if you need any other information on these products! I'm happy to help.
2024-07-15 17:04:44,628 - INFO - fast_api_main/ Products retrieved: [{'product': 'Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity', 'code': '1MCU1'}, {'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]
Time for extract_customer_attributes: 1.925079107284546
Time for split_process_and_message_from_response: 6.29425048828125e-05
INFO:     127.0.0.1:59318 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 17:04:44,662 - INFO - fast_api_main/ Fetching images for products: ['Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity, 1MCU1', 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in, 12G993']
2024-07-15 17:04:44,663 - INFO - grainger_image_util item.part[-1]: 1MCU1 item.part[0]: Pallet: 48 in Lg
2024-07-15 17:04:44,665 - INFO - grainger_image_util item.part[-1]: 12G993 item.part[0]: Utility Cart: 1,000 lb Load Capacity
2024-07-15 17:04:45,616 - INFO - fast_api_main/ Total time to fetch images: 0.004505157470703125 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/1MCU1_AS01?$lgmain$ for 1MCU1 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/12G993_AS01?$lgmain$ for 12G993 in 0.00 seconds
INFO:     127.0.0.1:59328 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 17:04:46,052 - INFO - fast_api_main/ Starting reviews at 1721077486.052029
INFO:     ('127.0.0.1', 59331) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 17:04:46,054 - INFO - fast_api_main/ Sending review at 1721077486.054006
2024-07-15 17:04:46,054 - INFO - fast_api_main/ Fetching reviews for product: Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in, 12G993
2024-07-15 17:04:46,055 - INFO - fast_api_main/ Fetching reviews for product: Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity, 1MCU1
2024-07-15 17:04:49,175 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:04:49,176 - ERROR - fast_api_main/ Error navigating to reviews for Tape Dispenser: For 2 in Max Tape Wd, For 3 in Max Tape Core Dia, 11J997: Message: no such element: Unable to locate element: {"method":"css selector","selector":"a.product-card-image__link"}
  (Session info: chrome-headless-shell=126.0.6478.127); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
0   chromedriver                        0x0000000107de10e8 chromedriver + 5169384
1   chromedriver                        0x0000000107dd8fba chromedriver + 5136314
2   chromedriver                        0x000000010795536c chromedriver + 402284
3   chromedriver                        0x00000001079a2740 chromedriver + 718656
4   chromedriver                        0x00000001079a2a01 chromedriver + 719361
5   chromedriver                        0x00000001079e7bc4 chromedriver + 1002436
6   chromedriver                        0x00000001079c5add chromedriver + 862941
7   chromedriver                        0x00000001079e4f57 chromedriver + 991063
8   chromedriver                        0x00000001079c5853 chromedriver + 862291
9   chromedriver                        0x00000001079955c6 chromedriver + 665030
10  chromedriver                        0x0000000107995e4e chromedriver + 667214
11  chromedriver                        0x0000000107da3d00 chromedriver + 4918528
12  chromedriver                        0x0000000107da8cfd chromedriver + 4939005
13  chromedriver                        0x0000000107da93d5 chromedriver + 4940757
14  chromedriver                        0x0000000107d84de4 chromedriver + 4791780
15  chromedriver                        0x0000000107da96c9 chromedriver + 4941513
16  chromedriver                        0x0000000107d765b4 chromedriver + 4732340
17  chromedriver                        0x0000000107dc9898 chromedriver + 5073048
18  chromedriver                        0x0000000107dc9a57 chromedriver + 5073495
19  chromedriver                        0x0000000107dd8b6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 17:04:49,176 - INFO - fast_api_main/ Sending review at 1721077489.176594
2024-07-15 17:05:09,679 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:05:09,714 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:05:10,183 - ERROR - fast_api_main/ Error navigating to reviews for Packaging Tape with Message: 1.9 mil Tape Thick, 2 in x 55 yd, 50.8 mm x 50.29 m, White, Caution, 15C747: Message: 
Stacktrace:
0   chromedriver                        0x0000000107de10e8 chromedriver + 5169384
1   chromedriver                        0x0000000107dd8fba chromedriver + 5136314
2   chromedriver                        0x000000010795536c chromedriver + 402284
3   chromedriver                        0x00000001079a2740 chromedriver + 718656
4   chromedriver                        0x00000001079a2a01 chromedriver + 719361
5   chromedriver                        0x00000001079e7bc4 chromedriver + 1002436
6   chromedriver                        0x00000001079c5add chromedriver + 862941
7   chromedriver                        0x00000001079e4f57 chromedriver + 991063
8   chromedriver                        0x00000001079c5853 chromedriver + 862291
9   chromedriver                        0x00000001079955c6 chromedriver + 665030
10  chromedriver                        0x0000000107995e4e chromedriver + 667214
11  chromedriver                        0x0000000107da3d00 chromedriver + 4918528
12  chromedriver                        0x0000000107da8cfd chromedriver + 4939005
13  chromedriver                        0x0000000107da93d5 chromedriver + 4940757
14  chromedriver                        0x0000000107d84de4 chromedriver + 4791780
15  chromedriver                        0x0000000107da96c9 chromedriver + 4941513
16  chromedriver                        0x0000000107d765b4 chromedriver + 4732340
17  chromedriver                        0x0000000107dc9898 chromedriver + 5073048
18  chromedriver                        0x0000000107dc9a57 chromedriver + 5073495
19  chromedriver                        0x0000000107dd8b6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 17:05:10,187 - INFO - WebSocket disconnected
2024-07-15 17:05:10,187 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 17:05:13,944 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:05:14,450 - ERROR - fast_api_main/ Error navigating to reviews for Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity, 1MCU1: Message: 
Stacktrace:
0   chromedriver                        0x0000000107de10e8 chromedriver + 5169384
1   chromedriver                        0x0000000107dd8fba chromedriver + 5136314
2   chromedriver                        0x000000010795536c chromedriver + 402284
3   chromedriver                        0x00000001079a2740 chromedriver + 718656
4   chromedriver                        0x00000001079a2a01 chromedriver + 719361
5   chromedriver                        0x00000001079e7bc4 chromedriver + 1002436
6   chromedriver                        0x00000001079c5add chromedriver + 862941
7   chromedriver                        0x00000001079e4f57 chromedriver + 991063
8   chromedriver                        0x00000001079c5853 chromedriver + 862291
9   chromedriver                        0x00000001079955c6 chromedriver + 665030
10  chromedriver                        0x0000000107995e4e chromedriver + 667214
11  chromedriver                        0x0000000107da3d00 chromedriver + 4918528
12  chromedriver                        0x0000000107da8cfd chromedriver + 4939005
13  chromedriver                        0x0000000107da93d5 chromedriver + 4940757
14  chromedriver                        0x0000000107d84de4 chromedriver + 4791780
15  chromedriver                        0x0000000107da96c9 chromedriver + 4941513
16  chromedriver                        0x0000000107d765b4 chromedriver + 4732340
17  chromedriver                        0x0000000107dc9898 chromedriver + 5073048
18  chromedriver                        0x0000000107dc9a57 chromedriver + 5073495
19  chromedriver                        0x0000000107dd8b6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 17:05:14,450 - INFO - fast_api_main/ Sending review at 1721077514.450799
2024-07-15 17:05:16,231 - INFO - fast_api_main/ Reviews for product 12G993: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ["I have a wet basement . I got tired of changing wooden pallets they get moldy and you can't wash them and then you have to get rid of them .\nWith plastic i can wash it off.", 'I use these for my wood racks.  I put 2 together and put my wood brackets on top and stack my wood on them.  Keeps my wood off the ground, easy to clean under, keeps the bugs out of my wood, they were a great price, VERY sturdy and shipped free', 'I\'m using these as a base for my firewood racks.  Since they are 5" high they elevate my wood off of the ground and away from moisture.  They are easy to clean under as they are 5" off the ground and the blower just moves the debris from under them.  I love that they will never rot and they can hold up to 15,000 lbs.  Very good investment', 'great']}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 17:05:16,254 - INFO - WebSocket disconnected
2024-07-15 17:05:16,254 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 17:06:00,243 - INFO - fast_api_main/ Received question: Provide details on 31AR24 with session_id: 4c4014cf-790d-44b6-9d5a-98206e3da1cd
2024-07-15 17:06:00,243 - INFO - fast_api_main/ Clearing chat history for session_id: 4c4014cf-790d-44b6-9d5a-98206e3da1cd
2024-07-15 17:06:00,243 - INFO - fast_api_main/ Current chat history for session_id 4c4014cf-790d-44b6-9d5a-98206e3da1cd: []
2024-07-15 17:06:00,243 - INFO - fast_api_main/ Processing question: Provide details on 31AR24
2024-07-15 17:06:02,230 - INFO - chat_processor/ Chat History passed to processor: []
2024-07-15 17:06:10,365 - INFO - chat_processor/ chat_procesing: message: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:

- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. 

- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.

Let me know if you need any other information on these products! I'm happy to help.
2024-07-15 17:06:10,365 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity', 'code': '1MCU1'}, {'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]}
2024-07-15 17:06:10,366 - INFO - chat_processor/ product_list_as_json: {'products': [{'product': 'Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity', 'code': '1MCU1'}, {'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]}
2024-07-15 17:06:10,366 - INFO - fast_api_main/ Message: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:

- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. 

- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.

Let me know if you need any other information on these products! I'm happy to help.
2024-07-15 17:06:10,366 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity', 'code': '1MCU1'}, {'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]}
2024-07-15 17:06:10,366 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': '31AR24'}
2024-07-15 17:06:10,366 - INFO - fast_api_main/ Time to get attributes: 1.986102819442749
2024-07-15 17:06:10,366 - INFO - fast_api_main/ Updated chat history for session_id 4c4014cf-790d-44b6-9d5a-98206e3da1cd: ["QUESTION: Provide details on 31AR24. MESSAGE: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:\n\n- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\n- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.\n\nLet me know if you need any other information on these products! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': '31AR24'}"]
2024-07-15 17:06:10,366 - INFO - fast_api_main/ Processed question: Provide details on 31AR24 with message: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:

- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. 

- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.

Let me know if you need any other information on these products! I'm happy to help.
2024-07-15 17:06:10,366 - INFO - fast_api_main/ Products retrieved: [{'product': 'Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity', 'code': '1MCU1'}, {'product': 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in', 'code': '12G993'}]
Time for extract_customer_attributes: 1.9855070114135742
Time for split_process_and_message_from_response: 3.504753112792969e-05
INFO:     127.0.0.1:59392 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 17:06:10,385 - INFO - fast_api_main/ Fetching images for products: ['Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity, 1MCU1', 'Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in, 12G993']
2024-07-15 17:06:10,385 - INFO - grainger_image_util item.part[-1]: 1MCU1 item.part[0]: Pallet: 48 in Lg
2024-07-15 17:06:10,387 - INFO - grainger_image_util item.part[-1]: 12G993 item.part[0]: Utility Cart: 1,000 lb Load Capacity
2024-07-15 17:06:10,553 - INFO - fast_api_main/ Total time to fetch images: 0.0027840137481689453 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/1MCU1_AS01?$lgmain$ for 1MCU1 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/12G993_AS01?$lgmain$ for 12G993 in 0.00 seconds
INFO:     127.0.0.1:59400 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 17:06:10,829 - INFO - fast_api_main/ Starting reviews at 1721077570.8295
INFO:     ('127.0.0.1', 59403) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 17:06:10,830 - INFO - fast_api_main/ Sending review at 1721077570.830615
2024-07-15 17:06:10,830 - INFO - fast_api_main/ Fetching reviews for product: Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity, 1MCU1
2024-07-15 17:06:10,830 - INFO - fast_api_main/ Fetching reviews for product: Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in, 12G993
2024-07-15 17:06:10,899 - INFO - fast_api_main/ Received question: Provide details on product with code: 31AR24 with session_id: 4c4014cf-790d-44b6-9d5a-98206e3da1cd
2024-07-15 17:06:10,899 - INFO - fast_api_main/ Current chat history for session_id 4c4014cf-790d-44b6-9d5a-98206e3da1cd: ["QUESTION: Provide details on 31AR24. MESSAGE: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:\n\n- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\n- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.\n\nLet me know if you need any other information on these products! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': '31AR24'}"]
2024-07-15 17:06:10,899 - INFO - fast_api_main/ Processing question: Provide details on product with code: 31AR24
2024-07-15 17:06:13,463 - INFO - chat_processor/ Chat History passed to processor: ["QUESTION: Provide details on 31AR24. MESSAGE: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:\n\n- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\n- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.\n\nLet me know if you need any other information on these products! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': '31AR24'}"]
2024-07-15 17:06:16,547 - INFO - chat_processor/ chat_procesing: message: I'm sorry, I could not find any products in the catalog that match the code 31AR24. Please check the code and let me know if you need help finding a different product.
2024-07-15 17:06:16,547 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': []}
2024-07-15 17:06:16,547 - INFO - chat_processor/ product_list_as_json: {'products': []}
2024-07-15 17:06:16,547 - INFO - fast_api_main/ Message: I'm sorry, I could not find any products in the catalog that match the code 31AR24. Please check the code and let me know if you need help finding a different product.
2024-07-15 17:06:16,547 - INFO - fast_api_main/ Response json: {'products': []}
2024-07-15 17:06:16,547 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}
2024-07-15 17:06:16,548 - INFO - fast_api_main/ Time to get attributes: 2.5645182132720947
2024-07-15 17:06:16,548 - INFO - fast_api_main/ Updated chat history for session_id 4c4014cf-790d-44b6-9d5a-98206e3da1cd: ["QUESTION: Provide details on 31AR24. MESSAGE: Hello! Based on your manufacturing industry profile with large enterprises, an inventory manager, and location 31AR24, I would recommend the following products:\n\n- 1MCU1 Pallet: 48 in Lg, 42 1/4 in Wd, 6 in Ht, 6,000 lb Static Load Capacity. This lightweight, durable plastic pallet provides 2-way entry by pallet truck and can be used in a variety of storage systems. \n\n- 12G993 Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in. The metal shelves allow items to slide on and off easily. The slotted surface lets liquids and debris fall through to keep the cart clean. Great for stock rooms, labs, and manufacturing facilities.\n\nLet me know if you need any other information on these products! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': '31AR24'}", "QUESTION: Provide details on product with code: 31AR24. MESSAGE: I'm sorry, I could not find any products in the catalog that match the code 31AR24. Please check the code and let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 17:06:16,548 - INFO - fast_api_main/ Processed question: Provide details on product with code: 31AR24 with message: I'm sorry, I could not find any products in the catalog that match the code 31AR24. Please check the code and let me know if you need help finding a different product.
2024-07-15 17:06:16,548 - INFO - fast_api_main/ Products retrieved: []
Time for extract_customer_attributes: 2.5640361309051514
Time for split_process_and_message_from_response: 2.0265579223632812e-05
INFO:     127.0.0.1:59405 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 17:06:16,570 - INFO - fast_api_main/ Fetching images for products: []
2024-07-15 17:06:16,570 - INFO - fast_api_main/ Total time to fetch images: 0.0 seconds
INFO:     127.0.0.1:59410 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 17:06:16,577 - INFO - fast_api_main/ Starting reviews at 1721077576.5778859
INFO:     ('127.0.0.1', 59411) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 17:06:16,583 - INFO - WebSocket disconnected
2024-07-15 17:06:16,583 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 17:06:28,837 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:06:32,534 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 17:06:33,038 - ERROR - fast_api_main/ Error navigating to reviews for Utility Cart: 1,000 lb Load Capacity, 41 in x 19 in, 48 in x 19 in x 42 in, 12G993: Message: 
Stacktrace:
0   chromedriver                        0x0000000107de10e8 chromedriver + 5169384
1   chromedriver                        0x0000000107dd8fba chromedriver + 5136314
2   chromedriver                        0x000000010795536c chromedriver + 402284
3   chromedriver                        0x00000001079a2740 chromedriver + 718656
4   chromedriver                        0x00000001079a2a01 chromedriver + 719361
5   chromedriver                        0x00000001079e7bc4 chromedriver + 1002436
6   chromedriver                        0x00000001079c5add chromedriver + 862941
7   chromedriver                        0x00000001079e4f57 chromedriver + 991063
8   chromedriver                        0x00000001079c5853 chromedriver + 862291
9   chromedriver                        0x00000001079955c6 chromedriver + 665030
10  chromedriver                        0x0000000107995e4e chromedriver + 667214
11  chromedriver                        0x0000000107da3d00 chromedriver + 4918528
12  chromedriver                        0x0000000107da8cfd chromedriver + 4939005
13  chromedriver                        0x0000000107da93d5 chromedriver + 4940757
14  chromedriver                        0x0000000107d84de4 chromedriver + 4791780
15  chromedriver                        0x0000000107da96c9 chromedriver + 4941513
16  chromedriver                        0x0000000107d765b4 chromedriver + 4732340
17  chromedriver                        0x0000000107dc9898 chromedriver + 5073048
18  chromedriver                        0x0000000107dc9a57 chromedriver + 5073495
19  chromedriver                        0x0000000107dd8b6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 17:06:33,038 - INFO - fast_api_main/ Sending review at 1721077593.038684
2024-07-15 17:06:34,791 - INFO - fast_api_main/ Reviews for product 1MCU1: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
2024-07-15 17:06:34,793 - INFO - WebSocket disconnected
2024-07-15 17:06:34,793 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 17:06:55,517 - INFO - fast_api_main/ Received question: Provide details on product with code: 31AR24 with session_id: 4c4014cf-790d-44b6-9d5a-98206e3da1cd
2024-07-15 17:06:55,517 - INFO - fast_api_main/ Clearing chat history for session_id: 4c4014cf-790d-44b6-9d5a-98206e3da1cd
2024-07-15 17:06:55,517 - INFO - fast_api_main/ Current chat history for session_id 4c4014cf-790d-44b6-9d5a-98206e3da1cd: []
2024-07-15 17:06:55,517 - INFO - fast_api_main/ Processing question: Provide details on product with code: 31AR24
2024-07-15 17:06:57,422 - INFO - chat_processor/ Chat History passed to processor: []
2024-07-15 17:07:01,151 - INFO - chat_processor/ chat_procesing: message: I'm sorry, I could not find any products in the catalog that match the code 31AR24. Please check the code and let me know if you need help finding a different product.
2024-07-15 17:07:01,151 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': []}
2024-07-15 17:07:01,151 - INFO - chat_processor/ product_list_as_json: {'products': []}
2024-07-15 17:07:01,151 - INFO - fast_api_main/ Message: I'm sorry, I could not find any products in the catalog that match the code 31AR24. Please check the code and let me know if you need help finding a different product.
2024-07-15 17:07:01,151 - INFO - fast_api_main/ Response json: {'products': []}
2024-07-15 17:07:01,151 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}
2024-07-15 17:07:01,151 - INFO - fast_api_main/ Time to get attributes: 1.9044649600982666
2024-07-15 17:07:01,151 - INFO - fast_api_main/ Updated chat history for session_id 4c4014cf-790d-44b6-9d5a-98206e3da1cd: ["QUESTION: Provide details on product with code: 31AR24. MESSAGE: I'm sorry, I could not find any products in the catalog that match the code 31AR24. Please check the code and let me know if you need help finding a different product.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Large Enterprises', 'SustainabilityFocus': False, 'InventoryManager': True, 'Location': ''}"]
2024-07-15 17:07:01,151 - INFO - fast_api_main/ Processed question: Provide details on product with code: 31AR24 with message: I'm sorry, I could not find any products in the catalog that match the code 31AR24. Please check the code and let me know if you need help finding a different product.
2024-07-15 17:07:01,151 - INFO - fast_api_main/ Products retrieved: []
Time for extract_customer_attributes: 1.9039607048034668
Time for split_process_and_message_from_response: 1.9073486328125e-05
INFO:     127.0.0.1:59439 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 17:07:01,171 - INFO - fast_api_main/ Fetching images for products: []
2024-07-15 17:07:01,172 - INFO - fast_api_main/ Total time to fetch images: 0.0 seconds
INFO:     127.0.0.1:59442 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 17:07:01,179 - INFO - fast_api_main/ Starting reviews at 1721077621.178997
INFO:     ('127.0.0.1', 59443) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 17:07:01,184 - INFO - WebSocket disconnected
2024-07-15 17:07:01,184 - WARNING - WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

2024-07-15 17:24:13,028 - INFO - Found credentials in environment variables.
2024-07-15 17:24:13,717 - INFO - Initializing Bedrock clients...
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
2024-07-15 17:24:14,226 - INFO - Initializing Titan Embeddings Model...
2024-07-15 17:24:14,226 - INFO - Titan Embeddings Model initialized.
2024-07-15 17:24:14,226 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
2024-07-15 17:24:14,652 - INFO - Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 17:24:14,653 - ERROR - Error loading serialized_documents_file at /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
2024-07-15 17:24:14,653 - INFO - Generating new df
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
2024-07-15 17:24:17,318 - INFO - Structured documents created:
2024-07-15 17:24:17,318 - INFO - Document 1 of 11424:
2024-07-15 17:24:17,318 - INFO - 3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
2024-07-15 17:24:17,318 - INFO - Document 2 of 11424:
2024-07-15 17:24:17,318 - INFO - 3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
2024-07-15 17:24:17,318 - INFO - Document 3 of 11424:
2024-07-15 17:24:17,319 - INFO - 5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
2024-07-15 17:24:17,319 - INFO - Document 4 of 11424:
2024-07-15 17:24:17,319 - INFO - 14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
2024-07-15 17:24:17,319 - INFO - Document 5 of 11424:
2024-07-15 17:24:17,319 - INFO - 4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
2024-07-15 17:24:17,535 - INFO - Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 17:24:17,536 - INFO - Creating FAISS vector store from structured documents...
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
2024-07-15 17:47:41,393 - INFO - Loading faiss with AVX2 support.
2024-07-15 17:47:41,417 - INFO - Successfully loaded faiss with AVX2 support.
2024-07-15 17:47:42,830 - INFO - FAISS vector store created.
2024-07-15 17:47:42,830 - INFO - Serializing FAISS vector store to /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
2024-07-15 17:47:43,055 - INFO - FAISS vector store serialized to pickle file.
2024-07-15 17:47:43,065 - INFO - Initializing ChromeDriver...
2024-07-15 17:47:43,065 - INFO - ====== WebDriver manager ======
2024-07-15 17:47:43,450 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 17:47:43,530 - INFO - Get LATEST chromedriver version for google-chrome
2024-07-15 17:47:43,569 - INFO - Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.126/chromedriver-mac-x64/chromedriver] found in cache
2024-07-15 17:47:44,567 - INFO - ChromeDriver initialized successfully.
INFO:     Started server process [24194]
INFO:     Waiting for application startup.
2024-07-15 17:47:44,589 - INFO - Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2024-07-15 18:13:22,329 - INFO -  fast_api_main/ Adding new session ID 9b86a058-f2de-44e8-bf6c-e3913de63699 to session_store
2024-07-15 18:13:22,329 - INFO - fast_api_main/ Received question: tape for adhereing to cold surfaces with session_id: 9b86a058-f2de-44e8-bf6c-e3913de63699
2024-07-15 18:13:22,330 - INFO - fast_api_main/ Current chat history for session_id 9b86a058-f2de-44e8-bf6c-e3913de63699: []
2024-07-15 18:13:22,330 - INFO - fast_api_main/ Processing question: tape for adhereing to cold surfaces
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 18:13:24,354 - INFO - chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
2024-07-15 18:13:34,157 - INFO - chat_processor/ chat_procesing: message: Hello! Based on your interest in tape for adhering to cold surfaces, I recommend the following foil tapes from our catalog:

- 49Z345: 2 in x 60 yd, 5 mil Thick, Aluminum, Acrylic Foil Tape 
- 49Z344: 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic Foil Tape
- 494K07: 2 13/16 in x 50 1/4 yd, 5.5 mil Thick, Aluminum, Acrylic Foil Tape
- 49Z334: 2 in x 33 3/8 yd, 13.7 mil Thick, Aluminum, Acrylic, Silver Foil Tape

Let me know if you need any other details on these foil tape products for your cold surface application. I'm happy to help!
2024-07-15 18:13:34,157 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Foil Tape: APPROVED VENDOR TC625L, 2 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F', 'code': '49Z345'}, {'product': 'Foil Tape: APPROVED VENDOR TC625L, 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F', 'code': '49Z344'}, {'product': 'Foil Tape: APPROVED VENDOR TC2636, 2 13/16 in x 50 1/4 yd, 5.5 mil Thick, Aluminum, Acrylic', 'code': '494K07'}, {'product': 'Foil Tape: APPROVED VENDOR TC378, 2 in x 33 3/8 yd, 13.7 mil Thick, Aluminum, Acrylic, Silver', 'code': '49Z334'}]}
2024-07-15 18:13:34,157 - INFO - chat_processor/ product_list_as_json: {'products': [{'product': 'Foil Tape: APPROVED VENDOR TC625L, 2 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F', 'code': '49Z345'}, {'product': 'Foil Tape: APPROVED VENDOR TC625L, 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F', 'code': '49Z344'}, {'product': 'Foil Tape: APPROVED VENDOR TC2636, 2 13/16 in x 50 1/4 yd, 5.5 mil Thick, Aluminum, Acrylic', 'code': '494K07'}, {'product': 'Foil Tape: APPROVED VENDOR TC378, 2 in x 33 3/8 yd, 13.7 mil Thick, Aluminum, Acrylic, Silver', 'code': '49Z334'}]}
2024-07-15 18:13:34,157 - INFO - fast_api_main/ Message: Hello! Based on your interest in tape for adhering to cold surfaces, I recommend the following foil tapes from our catalog:

- 49Z345: 2 in x 60 yd, 5 mil Thick, Aluminum, Acrylic Foil Tape 
- 49Z344: 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic Foil Tape
- 494K07: 2 13/16 in x 50 1/4 yd, 5.5 mil Thick, Aluminum, Acrylic Foil Tape
- 49Z334: 2 in x 33 3/8 yd, 13.7 mil Thick, Aluminum, Acrylic, Silver Foil Tape

Let me know if you need any other details on these foil tape products for your cold surface application. I'm happy to help!
2024-07-15 18:13:34,157 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Foil Tape: APPROVED VENDOR TC625L, 2 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F', 'code': '49Z345'}, {'product': 'Foil Tape: APPROVED VENDOR TC625L, 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F', 'code': '49Z344'}, {'product': 'Foil Tape: APPROVED VENDOR TC2636, 2 13/16 in x 50 1/4 yd, 5.5 mil Thick, Aluminum, Acrylic', 'code': '494K07'}, {'product': 'Foil Tape: APPROVED VENDOR TC378, 2 in x 33 3/8 yd, 13.7 mil Thick, Aluminum, Acrylic, Silver', 'code': '49Z334'}]}
2024-07-15 18:13:34,157 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocused': False, 'InventoryManager': False, 'Location': ''}
2024-07-15 18:13:34,157 - INFO - fast_api_main/ Time to get attributes: 2.0240588188171387
2024-07-15 18:13:34,157 - INFO - fast_api_main/ Updated chat history for session_id 9b86a058-f2de-44e8-bf6c-e3913de63699: ["QUESTION: tape for adhereing to cold surfaces. MESSAGE: Hello! Based on your interest in tape for adhering to cold surfaces, I recommend the following foil tapes from our catalog:\n\n- 49Z345: 2 in x 60 yd, 5 mil Thick, Aluminum, Acrylic Foil Tape \n- 49Z344: 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic Foil Tape\n- 494K07: 2 13/16 in x 50 1/4 yd, 5.5 mil Thick, Aluminum, Acrylic Foil Tape\n- 49Z334: 2 in x 33 3/8 yd, 13.7 mil Thick, Aluminum, Acrylic, Silver Foil Tape\n\nLet me know if you need any other details on these foil tape products for your cold surface application. I'm happy to help!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocused': False, 'InventoryManager': False, 'Location': ''}"]
2024-07-15 18:13:34,157 - INFO - fast_api_main/ Processed question: tape for adhereing to cold surfaces with message: Hello! Based on your interest in tape for adhering to cold surfaces, I recommend the following foil tapes from our catalog:

- 49Z345: 2 in x 60 yd, 5 mil Thick, Aluminum, Acrylic Foil Tape 
- 49Z344: 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic Foil Tape
- 494K07: 2 13/16 in x 50 1/4 yd, 5.5 mil Thick, Aluminum, Acrylic Foil Tape
- 49Z334: 2 in x 33 3/8 yd, 13.7 mil Thick, Aluminum, Acrylic, Silver Foil Tape

Let me know if you need any other details on these foil tape products for your cold surface application. I'm happy to help!
2024-07-15 18:13:34,157 - INFO - fast_api_main/ Products retrieved: [{'product': 'Foil Tape: APPROVED VENDOR TC625L, 2 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F', 'code': '49Z345'}, {'product': 'Foil Tape: APPROVED VENDOR TC625L, 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F', 'code': '49Z344'}, {'product': 'Foil Tape: APPROVED VENDOR TC2636, 2 13/16 in x 50 1/4 yd, 5.5 mil Thick, Aluminum, Acrylic', 'code': '494K07'}, {'product': 'Foil Tape: APPROVED VENDOR TC378, 2 in x 33 3/8 yd, 13.7 mil Thick, Aluminum, Acrylic, Silver', 'code': '49Z334'}]
Time for extract_customer_attributes: 2.022540807723999
Time for split_process_and_message_from_response: 0.00015091896057128906
INFO:     127.0.0.1:61555 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 18:13:34,186 - INFO - fast_api_main/ Fetching images for products: ['Foil Tape: APPROVED VENDOR TC625L, 2 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F, 49Z345', 'Foil Tape: APPROVED VENDOR TC625L, 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F, 49Z344', 'Foil Tape: APPROVED VENDOR TC2636, 2 13/16 in x 50 1/4 yd, 5.5 mil Thick, Aluminum, Acrylic, 494K07', 'Foil Tape: APPROVED VENDOR TC378, 2 in x 33 3/8 yd, 13.7 mil Thick, Aluminum, Acrylic, Silver, 49Z334']
2024-07-15 18:13:34,186 - INFO - grainger_image_util item.part[-1]: 49Z345 item.part[0]: Foil Tape: APPROVED VENDOR TC625L
2024-07-15 18:13:34,190 - INFO - grainger_image_util item.part[-1]: 49Z344 item.part[0]: Foil Tape: APPROVED VENDOR TC625L
2024-07-15 18:13:34,192 - INFO - grainger_image_util item.part[-1]: 494K07 item.part[0]: Foil Tape: APPROVED VENDOR TC2636
2024-07-15 18:13:34,194 - INFO - grainger_image_util item.part[-1]: 49Z334 item.part[0]: Foil Tape: APPROVED VENDOR TC378
2024-07-15 18:13:35,178 - INFO - fast_api_main/ Total time to fetch images: 0.007298707962036133 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/49Z342_AS01?$lgmain$ for 49Z345 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/49Z342_AS01?$lgmain$ for 49Z344 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/494K07_AS01?$lgmain$ for 494K07 in 0.00 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/49Z333_AS01?$lgmain$ for 49Z334 in 0.00 seconds
INFO:     127.0.0.1:61562 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 18:13:36,016 - INFO - fast_api_main/ Starting reviews at 1721081616.01635
INFO:     ('127.0.0.1', 61568) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 18:13:36,018 - INFO - fast_api_main/ Sending review at 1721081616.018414
2024-07-15 18:13:36,018 - INFO - fast_api_main/ Fetching reviews for product: Foil Tape: APPROVED VENDOR TC2636, 2 13/16 in x 50 1/4 yd, 5.5 mil Thick, Aluminum, Acrylic, 494K07
2024-07-15 18:13:36,019 - INFO - fast_api_main/ Fetching reviews for product: Foil Tape: APPROVED VENDOR TC625L, 2 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F, 49Z345
2024-07-15 18:13:36,020 - INFO - fast_api_main/ Fetching reviews for product: Foil Tape: APPROVED VENDOR TC378, 2 in x 33 3/8 yd, 13.7 mil Thick, Aluminum, Acrylic, Silver, 49Z334
2024-07-15 18:13:36,020 - INFO - fast_api_main/ Fetching reviews for product: Foil Tape: APPROVED VENDOR TC625L, 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F, 49Z344
2024-07-15 18:14:07,081 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 18:14:25,700 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 18:14:25,802 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 18:14:26,206 - ERROR - fast_api_main/ Error navigating to reviews for Foil Tape: APPROVED VENDOR TC625L, 1 in x 60 yd, 5 mil Thick, Aluminum, Acrylic, -40° to 275°F, 49Z344: Message: 
Stacktrace:
0   chromedriver                        0x00000001035b80e8 chromedriver + 5169384
1   chromedriver                        0x00000001035affba chromedriver + 5136314
2   chromedriver                        0x000000010312c36c chromedriver + 402284
3   chromedriver                        0x0000000103179740 chromedriver + 718656
4   chromedriver                        0x0000000103179a01 chromedriver + 719361
5   chromedriver                        0x00000001031bebc4 chromedriver + 1002436
6   chromedriver                        0x000000010319cadd chromedriver + 862941
7   chromedriver                        0x00000001031bbf57 chromedriver + 991063
8   chromedriver                        0x000000010319c853 chromedriver + 862291
9   chromedriver                        0x000000010316c5c6 chromedriver + 665030
10  chromedriver                        0x000000010316ce4e chromedriver + 667214
11  chromedriver                        0x000000010357ad00 chromedriver + 4918528
12  chromedriver                        0x000000010357fcfd chromedriver + 4939005
13  chromedriver                        0x00000001035803d5 chromedriver + 4940757
14  chromedriver                        0x000000010355bde4 chromedriver + 4791780
15  chromedriver                        0x00000001035806c9 chromedriver + 4941513
16  chromedriver                        0x000000010354d5b4 chromedriver + 4732340
17  chromedriver                        0x00000001035a0898 chromedriver + 5073048
18  chromedriver                        0x00000001035a0a57 chromedriver + 5073495
19  chromedriver                        0x00000001035afb6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 18:14:26,210 - INFO - fast_api_main/ Sending review at 1721081666.210272
2024-07-15 18:14:26,338 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 18:14:27,461 - INFO - fast_api_main/ Reviews for product 494K07: {'Average Star Rating': 2.0, 'Average Recommendation Percent': 0.0, 'Review Texts': ['This tape is like paper and the teachers are very disappointed in its quality and strength.']}
2024-07-15 18:14:27,819 - INFO - fast_api_main/ Reviews for product 49Z345: {'Average Star Rating': 2.0, 'Average Recommendation Percent': 0.0, 'Review Texts': ['This tape is like paper and the teachers are very disappointed in its quality and strength.']}
2024-07-15 18:14:28,237 - INFO - fast_api_main/ Reviews for product 49Z334: {'Average Star Rating': 2.0, 'Average Recommendation Percent': 0.0, 'Review Texts': ['This tape is like paper and the teachers are very disappointed in its quality and strength.']}
2024-07-15 18:14:28,238 - INFO - fast_api_main/ Sending review at 1721081668.238104
2024-07-15 18:14:28,238 - INFO - fast_api_main/ Sending review at 1721081668.238556
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 18:14:28,278 - INFO - WebSocket disconnected
2024-07-15 18:14:28,278 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 18:23:58,397 - INFO -  fast_api_main/ Adding new session ID c15e3ccf-6b17-44a3-b81a-879b12aa6595 to session_store
2024-07-15 18:23:58,411 - INFO - fast_api_main/ Received question: Men's waterproof boots size 14 with session_id: c15e3ccf-6b17-44a3-b81a-879b12aa6595
2024-07-15 18:23:58,415 - INFO - fast_api_main/ Current chat history for session_id c15e3ccf-6b17-44a3-b81a-879b12aa6595: []
2024-07-15 18:23:58,416 - INFO - fast_api_main/ Processing question: Men's waterproof boots size 14
2024-07-15 18:24:01,343 - INFO - chat_processor/ Chat History passed to processor: []
2024-07-15 18:24:12,902 - INFO - chat_processor/ chat_procesing: message: Hello! I found two waterproof men's boots in size 14 for you:

1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.

2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. 

Please let me know if you would like any additional details on these boots or if you need help with anything else today!
2024-07-15 18:24:12,902 - INFO - chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
2024-07-15 18:24:12,902 - INFO - chat_processor/ product_list_as_json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
2024-07-15 18:24:12,903 - INFO - fast_api_main/ Message: Hello! I found two waterproof men's boots in size 14 for you:

1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.

2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. 

Please let me know if you would like any additional details on these boots or if you need help with anything else today!
2024-07-15 18:24:12,903 - INFO - fast_api_main/ Response json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
2024-07-15 18:24:12,903 - INFO - fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
2024-07-15 18:24:12,903 - INFO - fast_api_main/ Time to get attributes: 2.9241321086883545
2024-07-15 18:24:12,903 - INFO - fast_api_main/ Updated chat history for session_id c15e3ccf-6b17-44a3-b81a-879b12aa6595: ["QUESTION: Men's waterproof boots size 14. MESSAGE: Hello! I found two waterproof men's boots in size 14 for you:\n\n1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.\n\n2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. \n\nPlease let me know if you would like any additional details on these boots or if you need help with anything else today!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
2024-07-15 18:24:12,903 - INFO - fast_api_main/ Processed question: Men's waterproof boots size 14 with message: Hello! I found two waterproof men's boots in size 14 for you:

1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.

2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. 

Please let me know if you would like any additional details on these boots or if you need help with anything else today!
2024-07-15 18:24:12,903 - INFO - fast_api_main/ Products retrieved: [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]
Time for extract_customer_attributes: 2.6904730796813965
Time for split_process_and_message_from_response: 9.918212890625e-05
INFO:     127.0.0.1:61995 - "POST /ask_question HTTP/1.1" 200 OK
2024-07-15 18:24:13,009 - INFO - fast_api_main/ Fetching images for products: ['Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures., 21A653', 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures., 21A654']
2024-07-15 18:24:13,011 - INFO - grainger_image_util item.part[-1]: 21A653 item.part[0]: Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof
2024-07-15 18:24:13,043 - INFO - grainger_image_util item.part[-1]: 21A654 item.part[0]: Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof
2024-07-15 18:24:13,381 - INFO - fast_api_main/ Total time to fetch images: 0.0244143009185791 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/21A644_AS01?$lgmain$ for 21A653 in 0.02 seconds
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/21A644_AS01?$lgmain$ for 21A654 in 0.00 seconds
INFO:     127.0.0.1:62001 - "POST /fetch_images HTTP/1.1" 200 OK
2024-07-15 18:24:14,262 - INFO - fast_api_main/ Starting reviews at 1721082254.2620559
INFO:     ('127.0.0.1', 62008) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
2024-07-15 18:24:14,275 - INFO - fast_api_main/ Sending review at 1721082254.275084
2024-07-15 18:24:14,275 - INFO - fast_api_main/ Fetching reviews for product: Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures., 21A653
2024-07-15 18:24:14,276 - INFO - fast_api_main/ Fetching reviews for product: Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures., 21A654
2024-07-15 18:24:51,696 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 18:25:08,133 - WARNING - Connection pool is full, discarding connection: localhost. Connection pool size: 1
2024-07-15 18:25:08,140 - ERROR - fast_api_main/ Error navigating to reviews for Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures., 21A654: Message: no such element: Unable to locate element: {"method":"css selector","selector":"a.product-card-image__link"}
  (Session info: chrome-headless-shell=126.0.6478.127); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
0   chromedriver                        0x00000001035b80e8 chromedriver + 5169384
1   chromedriver                        0x00000001035affba chromedriver + 5136314
2   chromedriver                        0x000000010312c36c chromedriver + 402284
3   chromedriver                        0x0000000103179740 chromedriver + 718656
4   chromedriver                        0x0000000103179a01 chromedriver + 719361
5   chromedriver                        0x00000001031bebc4 chromedriver + 1002436
6   chromedriver                        0x000000010319cadd chromedriver + 862941
7   chromedriver                        0x00000001031bbf57 chromedriver + 991063
8   chromedriver                        0x000000010319c853 chromedriver + 862291
9   chromedriver                        0x000000010316c5c6 chromedriver + 665030
10  chromedriver                        0x000000010316ce4e chromedriver + 667214
11  chromedriver                        0x000000010357ad00 chromedriver + 4918528
12  chromedriver                        0x000000010357fcfd chromedriver + 4939005
13  chromedriver                        0x00000001035803d5 chromedriver + 4940757
14  chromedriver                        0x000000010355bde4 chromedriver + 4791780
15  chromedriver                        0x00000001035806c9 chromedriver + 4941513
16  chromedriver                        0x000000010354d5b4 chromedriver + 4732340
17  chromedriver                        0x00000001035a0898 chromedriver + 5073048
18  chromedriver                        0x00000001035a0a57 chromedriver + 5073495
19  chromedriver                        0x00000001035afb6e chromedriver + 5135214
20  libsystem_pthread.dylib             0x00007ff808f31202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff808f2cbab thread_start + 15

2024-07-15 18:25:08,142 - INFO - fast_api_main/ Sending review at 1721082308.1426198
2024-07-15 18:25:14,172 - INFO - fast_api_main/ Reviews for product 21A653: {'Average Star Rating': 4.9, 'Average Recommendation Percent': 100.0, 'Review Texts': ["I am a winemaker and am constantly cleaning. During harvest, I use these boots while I'm shoveling grapes. They are comfortable, well-made, and waterproof.", 'Good', 'This is the perfect pasture boot! It comes up higher than most, which is what I love. Fits my calves nicely! Some rubber boots are to tight or really large around the calves. These fit perfect. The color is great as well. A nice navy blue. These could easily be worn for rain boots as well. These boots do not come in half sizes unfortunately so I had to size up to a 9. I normally wear an 8.5.\nand I get to enter the "SWEEPSTAKES"', "Love these boots! Perfect for the cow pasture, dewberry picking or most anything. Comfortable and not to heavy. I normally wear a size 8 to 8.5. The size 8 was a little snug and they don't come in half sizes. I wish they did! But I order the 9 and it works! They are reasonable in price. Zoro was very helpful in answering my questions and getting me the right size:) The color is nice too.", "These are so great! I love the great traction and fit. They are comfortable for all manner of activities - long walks in the woods in ANY season or pruning the apple trees. I'm in Maine where todays snow is tomorrow's slush and I just keep wearing these!"]}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
2024-07-15 18:25:14,244 - INFO - WebSocket disconnected
2024-07-15 18:25:14,244 - WARNING - WebSocket already closed
INFO:     connection closed
2024-07-15 19:02:37,153 - INFO -  fast_api_main/ Adding new session ID 6e1cc927-55d0-4ad1-bc5f-de7d3b0b71d1 to session_store
2024-07-15 19:02:37,190 - INFO - fast_api_main/ Received question: Looking for tape that adheres to cold surfaces with session_id: 6e1cc927-55d0-4ad1-bc5f-de7d3b0b71d1
2024-07-15 19:02:37,194 - INFO - fast_api_main/ Current chat history for session_id 6e1cc927-55d0-4ad1-bc5f-de7d3b0b71d1: []
2024-07-15 19:02:37,197 - INFO - fast_api_main/ Processing question: Looking for tape that adheres to cold surfaces
2024-07-15 19:02:39,239 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 19:02:39,410 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 90, in process_chat_question_with_customer_attribute_identifier
    print("Time for process_chat_question:", end_time - start_time)
    ^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    try:
         
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 19:02:39,411 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 19:02:39,427 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 90, in process_chat_question_with_customer_attribute_identifier
    print("Time for process_chat_question:", end_time - start_time)
    ^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    try:
         
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 2.0046019554138184
INFO:     127.0.0.1:63266 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 19:02:44,589 - INFO - fast_api_main/ Received question: Looking for tape that adheres to cold surfaces with session_id: 6e1cc927-55d0-4ad1-bc5f-de7d3b0b71d1
2024-07-15 19:02:44,589 - INFO - fast_api_main/ Current chat history for session_id 6e1cc927-55d0-4ad1-bc5f-de7d3b0b71d1: []
2024-07-15 19:02:44,589 - INFO - fast_api_main/ Processing question: Looking for tape that adheres to cold surfaces
2024-07-15 19:02:44,665 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 19:02:44,680 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 90, in process_chat_question_with_customer_attribute_identifier
    print("Time for process_chat_question:", end_time - start_time)
    ^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    try:
         
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 19:02:44,681 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 19:02:44,690 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 90, in process_chat_question_with_customer_attribute_identifier
    print("Time for process_chat_question:", end_time - start_time)
    ^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    try:
         
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.07582616806030273
INFO:     127.0.0.1:63276 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
2024-07-15 19:03:23,497 - INFO - fast_api_main/ Received question: Looking for tape  with session_id: 6e1cc927-55d0-4ad1-bc5f-de7d3b0b71d1
2024-07-15 19:03:23,503 - INFO - fast_api_main/ Current chat history for session_id 6e1cc927-55d0-4ad1-bc5f-de7d3b0b71d1: []
2024-07-15 19:03:23,503 - INFO - fast_api_main/ Processing question: Looking for tape 
2024-07-15 19:03:23,817 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 19:03:23,840 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 90, in process_chat_question_with_customer_attribute_identifier
    print("Time for process_chat_question:", end_time - start_time)
    ^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    try:
         
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 19:03:23,840 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 19:03:23,849 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 90, in process_chat_question_with_customer_attribute_identifier
    print("Time for process_chat_question:", end_time - start_time)
    ^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    try:
         
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.31095004081726074
INFO:     127.0.0.1:63293 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 1 failed: 500 - {"detail":"Internal Server Error"}
2024-07-15 19:03:29,096 - INFO - fast_api_main/ Received question: Looking for tape  with session_id: 6e1cc927-55d0-4ad1-bc5f-de7d3b0b71d1
2024-07-15 19:03:29,097 - INFO - fast_api_main/ Current chat history for session_id 6e1cc927-55d0-4ad1-bc5f-de7d3b0b71d1: []
2024-07-15 19:03:29,097 - INFO - fast_api_main/ Processing question: Looking for tape 
2024-07-15 19:03:29,160 - ERROR - fast_api_main/ Error processing chat question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 19:03:29,330 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 90, in process_chat_question_with_customer_attribute_identifier
    print("Time for process_chat_question:", end_time - start_time)
    ^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    try:
         
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

2024-07-15 19:03:29,330 - ERROR - Error in fast_api_main/ask_question: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired
2024-07-15 19:03:29,340 - ERROR - Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 681, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/botocore/client.py", line 1021, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 93, in ask_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = await process_chat_question(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 136, in process_chat_question
    message, response_json, customer_attributes_retrieved, time_to_get_attributes = process_chat_question_with_customer_attribute_identifier(
                                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 90, in process_chat_question_with_customer_attribute_identifier
    print("Time for process_chat_question:", end_time - start_time)
    ^^^^^^^^^^^
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 43, in process_chat_question_with_customer_attribute_identifier
    try:
         
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/customer_attributes.py", line 33, in extract_customer_attributes
    entity_extraction_result = llm(ner_prompt).strip()
                               ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 168, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1086, in __call__
    self.generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 803, in generate
    output = self._generate_helper(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 670, in _generate_helper
    raise e
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 657, in _generate_helper
    self._generate(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/language_models/llms.py", line 1322, in _generate
    self._call(prompt, stop=stop, run_manager=run_manager, **kwargs)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 1044, in _call
    text, tool_calls, llm_output = self._prepare_input_and_invoke(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_aws/llms/bedrock.py", line 692, in _prepare_input_and_invoke
    raise ValueError(f"Error raised by bedrock service: {e}")
ValueError: Error raised by bedrock service: An error occurred (ExpiredTokenException) when calling the InvokeModel operation: The security token included in the request is expired

Time for process_chat_question: 0.06201481819152832
INFO:     127.0.0.1:63296 - "POST /ask_question HTTP/1.1" 500 Internal Server Error
ERROR:root:Attempt 2 failed: 500 - {"detail":"Internal Server Error"}
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
  Stopping...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2024-07-15 19:44:25,346 - INFO - Shutdown complete.
INFO:     Application shutdown complete.
INFO:     Finished server process [24194]
Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/bin/uvicorn", line 11, in <module>
    sys.exit(main())
             ^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 410, in main
    run(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 577, in run
    server.run()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1517, in uvloop.loop.Loop.run_until_complete
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 15, in <module>
    from modules.vector_index.chat_processor import process_chat_question_with_customer_attribute_identifier
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 13, in <module>
    logging.basicConfig(level=logging.INFO, stream=sys.stdout)
                                                   ^^^
NameError: name 'sys' is not defined

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/bin/uvicorn", line 11, in <module>
    sys.exit(main())
             ^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 410, in main
    run(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 577, in run
    server.run()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1517, in uvloop.loop.Loop.run_until_complete
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 15, in <module>
    from modules.vector_index.chat_processor import process_chat_question_with_customer_attribute_identifier
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 13, in <module>
    logging.basicConfig(level=logging.INFO, stream=sys.stdout)
                                                   ^^^
NameError: name 'sys' is not defined
Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/bin/uvicorn", line 11, in <module>
    sys.exit(main())
             ^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 410, in main
    run(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 577, in run
    server.run()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1517, in uvloop.loop.Loop.run_until_complete
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 15, in <module>
    from modules.vector_index.chat_processor import process_chat_question_with_customer_attribute_identifier
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 13, in <module>
    logging.basicConfig(level=logging.INFO, stream=sys.stdout)
                                                   ^^^
NameError: name 'sys' is not defined

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
2024-07-17 18:32:18.312 Port 8505 is already in use
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:All 2 attempts failed.
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/bin/uvicorn", line 11, in <module>
    sys.exit(main())
             ^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 410, in main
    run(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 577, in run
    server.run()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1517, in uvloop.loop.Loop.run_until_complete
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 15, in <module>
    from modules.vector_index.chat_processor import process_chat_question_with_customer_attribute_identifier
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 13, in <module>
    logging.basicConfig(level=logging.INFO, stream=sys.stdout)
                                                   ^^^
NameError: name 'sys' is not defined
Traceback (most recent call last):
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/bin/uvicorn", line 11, in <module>
    sys.exit(main())
             ^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 410, in main
    run(
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/main.py", line 577, in run
    server.run()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1517, in uvloop.loop.Loop.run_until_complete
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/fast_api_main.py", line 15, in <module>
    from modules.vector_index.chat_processor import process_chat_question_with_customer_attribute_identifier
  File "/Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/chat_processor.py", line 13, in <module>
    logging.basicConfig(level=logging.INFO, stream=sys.stdout)
                                                   ^^^
NameError: name 'sys' is not defined

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:There is no [mac64] chromedriver "126.0.6478.182" for browser google-chrome "126.0.6478" in cache
INFO:WDM:Get LATEST chromedriver version for google-chrome
ERROR:root:Attempt 2 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
INFO:WDM:WebDriver version 126.0.6478.182 selected
INFO:WDM:Modern chrome version https://storage.googleapis.com/chrome-for-testing-public/126.0.6478.182/mac-x64/chromedriver-mac-x64.zip
INFO:WDM:About to download new driver from https://storage.googleapis.com/chrome-for-testing-public/126.0.6478.182/mac-x64/chromedriver-mac-x64.zip
INFO:WDM:Driver downloading response is 200
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver has been saved in cache [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182]
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [8346]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
INFO:root: fast_api_main/ Adding new session ID 3993bd8f-9d3e-45c2-a368-5b7ce1a059f7 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 3993bd8f-9d3e-45c2-a368-5b7ce1a059f7
INFO:root:fast_api_main/ Current chat history for session_id 3993bd8f-9d3e-45c2-a368-5b7ce1a059f7: []
INFO:root:fast_api_main/ Processing question: hammer
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Invalid JSON: 

Time for extract_customer_attributes: 1.3364579677581787
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.00019097328186035156
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.3377509117126465
INFO:root:fast_api_main/ Updated chat history for session_id 3993bd8f-9d3e-45c2-a368-5b7ce1a059f7: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:60921 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ["Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC17", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC19", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC16", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT48", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC18", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT50"]
INFO:root:grainger_image_util item.part[-1]: 45RC17 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC17 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC19 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC19 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC16 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC16 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 53CT48 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/53CT48-A0075-1_v1?$lgmain$ for 53CT48 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC18 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC18 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 53CT50 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/53CT48-A0075-1_v1?$lgmain$ for 53CT50 in 0.00 seconds
INFO:root:fast_api_main/ Total time to fetch images: 0.011280298233032227 seconds
INFO:     127.0.0.1:60931 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721255772.319026
INFO:     ('127.0.0.1', 60942) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721255772.321265
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC18
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC19
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT48
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT50
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC17
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC16
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC16: Message: 
Stacktrace:
0   chromedriver                        0x000000010142f078 chromedriver + 5169272
1   chromedriver                        0x0000000101426f4a chromedriver + 5136202
2   chromedriver                        0x0000000100fa336c chromedriver + 402284
3   chromedriver                        0x0000000100ff0740 chromedriver + 718656
4   chromedriver                        0x0000000100ff0a01 chromedriver + 719361
5   chromedriver                        0x0000000101035bc4 chromedriver + 1002436
6   chromedriver                        0x0000000101013add chromedriver + 862941
7   chromedriver                        0x0000000101032f57 chromedriver + 991063
8   chromedriver                        0x0000000101013853 chromedriver + 862291
9   chromedriver                        0x0000000100fe35c6 chromedriver + 665030
10  chromedriver                        0x0000000100fe3e4e chromedriver + 667214
11  chromedriver                        0x00000001013f1c90 chromedriver + 4918416
12  chromedriver                        0x00000001013f6c8d chromedriver + 4938893
13  chromedriver                        0x00000001013f7365 chromedriver + 4940645
14  chromedriver                        0x00000001013d2d74 chromedriver + 4791668
15  chromedriver                        0x00000001013f7659 chromedriver + 4941401
16  chromedriver                        0x00000001013c4544 chromedriver + 4732228
17  chromedriver                        0x0000000101417828 chromedriver + 5072936
18  chromedriver                        0x00000001014179e7 chromedriver + 5073383
19  chromedriver                        0x0000000101426afe chromedriver + 5135102
20  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721255825.461844
INFO:root:fast_api_main/ Reviews for product 45RC18: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Reviews for product 45RC19: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Reviews for product 53CT48: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Reviews for product 53CT50: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Sending review at 1721255826.7078102
INFO:root:fast_api_main/ Sending review at 1721255826.708143
INFO:root:fast_api_main/ Sending review at 1721255826.708271
INFO:root:fast_api_main/ Sending review at 1721255826.708406
INFO:root:fast_api_main/ Reviews for product 45RC17: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [8741]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:root: fast_api_main/ Adding new session ID 02b98671-c805-415f-a9f5-8c5358fa1af1 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 02b98671-c805-415f-a9f5-8c5358fa1af1
INFO:root:fast_api_main/ Current chat history for session_id 02b98671-c805-415f-a9f5-8c5358fa1af1: []
INFO:root:fast_api_main/ Processing question: hammer
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Invalid JSON: 

Time for extract_customer_attributes: 1.1627039909362793
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.0001800060272216797
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.163818120956421
INFO:root:fast_api_main/ Updated chat history for session_id 02b98671-c805-415f-a9f5-8c5358fa1af1: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:61740 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 4b1d1164-741f-4c9b-9ad4-26af94f614e6 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 4b1d1164-741f-4c9b-9ad4-26af94f614e6
INFO:root:fast_api_main/ Current chat history for session_id 4b1d1164-741f-4c9b-9ad4-26af94f614e6: []
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.2502238750457764
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 1 failed: timed out
Time for split_process_and_message_from_response: 6.079673767089844e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:fast_api_main/ Message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.250765085220337
INFO:root:fast_api_main/ Updated chat history for session_id 4b1d1164-741f-4c9b-9ad4-26af94f614e6: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]
INFO:     127.0.0.1:61745 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID e42b75ed-5412-45d4-be20-92b38ca6d769 to session_store
INFO:root:fast_api_main/ Received question: socks with session_id: e42b75ed-5412-45d4-be20-92b38ca6d769
INFO:root:fast_api_main/ Current chat history for session_id e42b75ed-5412-45d4-be20-92b38ca6d769: []
INFO:root:fast_api_main/ Processing question: socks
Time for extract_customer_attributes: 2.3517420291900635
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 1 failed: timed out
Time for split_process_and_message_from_response: 4.57763671875e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 2.3522558212280273
INFO:root:fast_api_main/ Updated chat history for session_id e42b75ed-5412-45d4-be20-92b38ca6d769: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: socks with message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]
INFO:     127.0.0.1:61748 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ["Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC17", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC19", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC16", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT48", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC18", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT50"]
INFO:root:grainger_image_util item.part[-1]: 45RC17 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC17 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC19 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC19 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC16 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC16 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 53CT48 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/53CT48-A0075-1_v1?$lgmain$ for 53CT48 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC18 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC18 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 53CT50 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/53CT48-A0075-1_v1?$lgmain$ for 53CT50 in 0.00 seconds
INFO:root:fast_api_main/ Received question: hammer with session_id: 4b1d1164-741f-4c9b-9ad4-26af94f614e6
INFO:root:fast_api_main/ Current chat history for session_id 4b1d1164-741f-4c9b-9ad4-26af94f614e6: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 0.7601280212402344
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
Time for split_process_and_message_from_response: 5.4836273193359375e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:fast_api_main/ Message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 0.7605812549591064
INFO:root:fast_api_main/ Updated chat history for session_id 4b1d1164-741f-4c9b-9ad4-26af94f614e6: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}", "QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]
INFO:     127.0.0.1:61762 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: socks with session_id: e42b75ed-5412-45d4-be20-92b38ca6d769
INFO:root:fast_api_main/ Current chat history for session_id e42b75ed-5412-45d4-be20-92b38ca6d769: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: socks
Time for extract_customer_attributes: 1.7757010459899902
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 4.1961669921875e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.7762401103973389
INFO:root:fast_api_main/ Updated chat history for session_id e42b75ed-5412-45d4-be20-92b38ca6d769: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: socks with message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]
INFO:     127.0.0.1:61768 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ['Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip, 45RC16', 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip, 45RC17', 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip, 45RC18', 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip, 45RC19']
INFO:root:grainger_image_util item.part[-1]: 45RC16 item.part[0]: Hammer: Fiberglass
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC16 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC17 item.part[0]: Hammer: Fiberglass
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC17 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC18 item.part[0]: Hammer: Fiberglass
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC18 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC19 item.part[0]: Hammer: Fiberglass
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC19 in 0.00 seconds
INFO:root:fast_api_main/ Total time to fetch images: 0.005490303039550781 seconds
INFO:     127.0.0.1:61776 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Total time to fetch images: 0.009270668029785156 seconds
INFO:     127.0.0.1:61756 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721256891.894166
INFO:     ('127.0.0.1', 61790) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721256891.895926
INFO:root:fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip, 45RC16
INFO:root:fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip, 45RC19
INFO:root:fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip, 45RC17
INFO:root:fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip, 45RC18
INFO:root:fast_api_main/ Starting reviews at 1721256891.997092
INFO:     ('127.0.0.1', 61794) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721256891.9981492
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC16
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT48
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT50
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC19
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC18
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC17
INFO:root:fast_api_main/ Fetching images for products: ['Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK, 22MM16', "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK, 34VH12"]
INFO:root:grainger_image_util item.part[-1]: 22MM16 item.part[0]: Socks: Crew
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/22MM16_AW01?$lgmain$ for 22MM16 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34VH12 item.part[0]: Socks: Crew
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/34VH12_AW01?$lgmain$ for 34VH12 in 0.00 seconds
INFO:root:fast_api_main/ Total time to fetch images: 0.0025038719177246094 seconds
INFO:     127.0.0.1:61804 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721256894.17786
INFO:     ('127.0.0.1', 61807) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721256894.179015
INFO:root:fast_api_main/ Fetching reviews for product: Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK, 34VH12
INFO:root:fast_api_main/ Fetching reviews for product: Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK, 22MM16
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK, 22MM16: Message: 
Stacktrace:
0   chromedriver                        0x0000000108eed078 chromedriver + 5169272
1   chromedriver                        0x0000000108ee4f4a chromedriver + 5136202
2   chromedriver                        0x0000000108a6136c chromedriver + 402284
3   chromedriver                        0x0000000108aae740 chromedriver + 718656
4   chromedriver                        0x0000000108aaea01 chromedriver + 719361
5   chromedriver                        0x0000000108af3bc4 chromedriver + 1002436
6   chromedriver                        0x0000000108ad1add chromedriver + 862941
7   chromedriver                        0x0000000108af0f57 chromedriver + 991063
8   chromedriver                        0x0000000108ad1853 chromedriver + 862291
9   chromedriver                        0x0000000108aa15c6 chromedriver + 665030
10  chromedriver                        0x0000000108aa1e4e chromedriver + 667214
11  chromedriver                        0x0000000108eafc90 chromedriver + 4918416
12  chromedriver                        0x0000000108eb4c8d chromedriver + 4938893
13  chromedriver                        0x0000000108eb5365 chromedriver + 4940645
14  chromedriver                        0x0000000108e90d74 chromedriver + 4791668
15  chromedriver                        0x0000000108eb5659 chromedriver + 4941401
16  chromedriver                        0x0000000108e82544 chromedriver + 4732228
17  chromedriver                        0x0000000108ed5828 chromedriver + 5072936
18  chromedriver                        0x0000000108ed59e7 chromedriver + 5073383
19  chromedriver                        0x0000000108ee4afe chromedriver + 5135102
20  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721256996.8621771
INFO:root:fast_api_main/ Reviews for product 45RC16: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Reviews for product 45RC19: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Reviews for product 45RC17: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Reviews for product 45RC18: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Reviews for product 53CT48: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Reviews for product 45RC16: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Reviews for product 45RC19: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Reviews for product 53CT50: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Reviews for product 45RC18: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Reviews for product 45RC17: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Sending review at 1721256998.945516
INFO:root:fast_api_main/ Reviews for product 34VH12: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['works great. we purchased one from a "easy" office supply store and it stopped working after a week. They wouldn\'t take it back.', 'Great clock with large, easy to read face.', 'Purchased this clock for my husbands shop. It is large a nice large clock with nice big numbers so it is easy to see across the room. Great purchase for a really good price.', 'Perfect clock for factory at a great price - just what we needed', 'Great product. Good price for item received.']}
INFO:root:fast_api_main/ Sending review at 1721256999.21151
INFO:root:fast_api_main/ Sending review at 1721256999.211649
INFO:root:fast_api_main/ Sending review at 1721256999.2120142
INFO:root:fast_api_main/ Sending review at 1721256999.2121348
INFO:root:fast_api_main/ Sending review at 1721256999.212244
INFO:root:fast_api_main/ Sending review at 1721256999.2123399
INFO:root:fast_api_main/ Sending review at 1721256999.212427
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [8904]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:root: fast_api_main/ Adding new session ID 8dd49254-7778-4bd6-86f6-fd503b8e5788 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 8dd49254-7778-4bd6-86f6-fd503b8e5788
INFO:root:fast_api_main/ Current chat history for session_id 8dd49254-7778-4bd6-86f6-fd503b8e5788: []
INFO:root:fast_api_main/ Processing question: hammer
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Invalid JSON: 

Time for extract_customer_attributes: 1.3536319732666016
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.00022792816162109375
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.3547148704528809
INFO:root:fast_api_main/ Updated chat history for session_id 8dd49254-7778-4bd6-86f6-fd503b8e5788: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:62167 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID a371c56a-c4ad-435f-8fad-ac040764cab1 to session_store
INFO:root:fast_api_main/ Received question: socks with session_id: a371c56a-c4ad-435f-8fad-ac040764cab1
INFO:root:fast_api_main/ Current chat history for session_id a371c56a-c4ad-435f-8fad-ac040764cab1: []
INFO:root:fast_api_main/ Processing question: socks
Time for extract_customer_attributes: 1.9558701515197754
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 1 failed: timed out
Time for split_process_and_message_from_response: 5.125999450683594e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.9563860893249512
INFO:root:fast_api_main/ Updated chat history for session_id a371c56a-c4ad-435f-8fad-ac040764cab1: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: socks with message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]
INFO:     127.0.0.1:62169 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 5ad4d560-fa2c-4279-9e7f-46a7156876fa to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 5ad4d560-fa2c-4279-9e7f-46a7156876fa
INFO:root:fast_api_main/ Current chat history for session_id 5ad4d560-fa2c-4279-9e7f-46a7156876fa: []
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.1082301139831543
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 1 failed: timed out
Time for split_process_and_message_from_response: 5.91278076171875e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.1087369918823242
INFO:root:fast_api_main/ Updated chat history for session_id 5ad4d560-fa2c-4279-9e7f-46a7156876fa: ["QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:62172 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID d0d14334-46c6-4cd4-b92f-486fbb807865 to session_store
INFO:root:fast_api_main/ Received question: gloves with session_id: d0d14334-46c6-4cd4-b92f-486fbb807865
INFO:root:fast_api_main/ Current chat history for session_id d0d14334-46c6-4cd4-b92f-486fbb807865: []
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 2.2663023471832275
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
Time for split_process_and_message_from_response: 6.413459777832031e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 2.26684308052063
INFO:root:fast_api_main/ Updated chat history for session_id d0d14334-46c6-4cd4-b92f-486fbb807865: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves with message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:62178 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ["Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC17", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC19", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC16", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT48", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC18", "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT50"]
INFO:root:grainger_image_util item.part[-1]: 45RC17 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC17 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC19 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC19 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC16 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC16 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 53CT48 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/53CT48-A0075-1_v1?$lgmain$ for 53CT48 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC18 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC18 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 53CT50 item.part[0]: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/53CT48-A0075-1_v1?$lgmain$ for 53CT50 in 0.00 seconds
INFO:root:fast_api_main/ Received question: socks with session_id: a371c56a-c4ad-435f-8fad-ac040764cab1
INFO:root:fast_api_main/ Current chat history for session_id a371c56a-c4ad-435f-8fad-ac040764cab1: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: socks
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
Time for extract_customer_attributes: 1.813035011291504
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:Attempt 2 failed: timed out
Time for split_process_and_message_from_response: 4.410743713378906e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.8135981559753418
INFO:root:fast_api_main/ Updated chat history for session_id a371c56a-c4ad-435f-8fad-ac040764cab1: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: socks with message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]
INFO:     127.0.0.1:62188 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: hammer with session_id: 5ad4d560-fa2c-4279-9e7f-46a7156876fa
INFO:root:fast_api_main/ Current chat history for session_id 5ad4d560-fa2c-4279-9e7f-46a7156876fa: ["QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.0136191844940186
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
Time for split_process_and_message_from_response: 6.103515625e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search. Here are the details:

45RC17 - Standard ball-peen hammer, 24 oz head weight, 1 3/8 in face diameter. 
45RC19 - Standard ball-peen hammer, 40 oz head weight, 1 5/8 in face diameter.
45RC16 - Standard ball-peen hammer, 16 oz head weight, 1 1/8 in face diameter.  
53CT48 - Standard ball-peen hammer, 16 oz head weight, 1 1/4 in face diameter.
45RC18 - Standard ball-peen hammer, 32 oz head weight, 1 1/2 in face diameter.
53CT50 - Standard ball-peen hammer, 24 oz head weight, 1 3/8 in face diameter.

Please let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search. Here are the details:

45RC17 - Standard ball-peen hammer, 24 oz head weight, 1 3/8 in face diameter. 
45RC19 - Standard ball-peen hammer, 40 oz head weight, 1 5/8 in face diameter.
45RC16 - Standard ball-peen hammer, 16 oz head weight, 1 1/8 in face diameter.  
53CT48 - Standard ball-peen hammer, 16 oz head weight, 1 1/4 in face diameter.
45RC18 - Standard ball-peen hammer, 32 oz head weight, 1 1/2 in face diameter.
53CT50 - Standard ball-peen hammer, 24 oz head weight, 1 3/8 in face diameter.

Please let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.014164924621582
INFO:root:fast_api_main/ Updated chat history for session_id 5ad4d560-fa2c-4279-9e7f-46a7156876fa: ["QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}", 'QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search. Here are the details:\n\n45RC17 - Standard ball-peen hammer, 24 oz head weight, 1 3/8 in face diameter. \n45RC19 - Standard ball-peen hammer, 40 oz head weight, 1 5/8 in face diameter.\n45RC16 - Standard ball-peen hammer, 16 oz head weight, 1 1/8 in face diameter.  \n53CT48 - Standard ball-peen hammer, 16 oz head weight, 1 1/4 in face diameter.\n45RC18 - Standard ball-peen hammer, 32 oz head weight, 1 1/2 in face diameter.\n53CT50 - Standard ball-peen hammer, 24 oz head weight, 1 3/8 in face diameter.\n\nPlease let me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search. Here are the details:

45RC17 - Standard ball-peen hammer, 24 oz head weight, 1 3/8 in face diameter. 
45RC19 - Standard ball-peen hammer, 40 oz head weight, 1 5/8 in face diameter.
45RC16 - Standard ball-peen hammer, 16 oz head weight, 1 1/8 in face diameter.  
53CT48 - Standard ball-peen hammer, 16 oz head weight, 1 1/4 in face diameter.
45RC18 - Standard ball-peen hammer, 32 oz head weight, 1 1/2 in face diameter.
53CT50 - Standard ball-peen hammer, 24 oz head weight, 1 3/8 in face diameter.

Please let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:62195 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: gloves with session_id: d0d14334-46c6-4cd4-b92f-486fbb807865
INFO:root:fast_api_main/ Current chat history for session_id d0d14334-46c6-4cd4-b92f-486fbb807865: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 1.9435510635375977
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 4.696846008300781e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.9440557956695557
INFO:root:fast_api_main/ Updated chat history for session_id d0d14334-46c6-4cd4-b92f-486fbb807865: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves with message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:62199 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Total time to fetch images: 0.010119438171386719 seconds
INFO:     127.0.0.1:62181 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721257272.326022
INFO:     ('127.0.0.1', 62236) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721257272.327296
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT48
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT50
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC17
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC16
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC18
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC19
INFO:root:fast_api_main/ Received question: gloves with session_id: d0d14334-46c6-4cd4-b92f-486fbb807865
INFO:root:fast_api_main/ Current chat history for session_id d0d14334-46c6-4cd4-b92f-486fbb807865: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 1.853492259979248
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 3.2901763916015625e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.8540148735046387
INFO:root:fast_api_main/ Updated chat history for session_id d0d14334-46c6-4cd4-b92f-486fbb807865: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves with message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:62243 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ['IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359', 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D360', 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362']
INFO:root:grainger_image_util item.part[-1]: 34D359 item.part[0]: IMPACTO Mechanics Gloves: L ( 9 )
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D359 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34D360 item.part[0]: IMPACTO Mechanics Gloves: M ( 8 )
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D360 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34D362 item.part[0]: IMPACTO Mechanics Gloves: XL ( 10 )
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D362 in 0.00 seconds
INFO:root:fast_api_main/ Total time to fetch images: 0.0041730403900146484 seconds
INFO:     127.0.0.1:62320 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721257285.150344
INFO:     ('127.0.0.1', 62324) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721257285.1514702
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D360
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC18: Message: stale element reference: stale element not found
  (Session info: chrome-headless-shell=126.0.6478.182); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
0   chromedriver                        0x000000010f4aa078 chromedriver + 5169272
1   chromedriver                        0x000000010f4a1f4a chromedriver + 5136202
2   chromedriver                        0x000000010f01e36c chromedriver + 402284
3   chromedriver                        0x000000010f02ee5d chromedriver + 470621
4   chromedriver                        0x000000010f02f7ba chromedriver + 473018
5   chromedriver                        0x000000010f024585 chromedriver + 427397
6   chromedriver                        0x000000010f02f7eb chromedriver + 473067
7   chromedriver                        0x000000010f024585 chromedriver + 427397
8   chromedriver                        0x000000010f022815 chromedriver + 419861
9   chromedriver                        0x000000010f025c2c chromedriver + 433196
10  chromedriver                        0x000000010f0aeee8 chromedriver + 995048
11  chromedriver                        0x000000010f08eab2 chromedriver + 862898
12  chromedriver                        0x000000010f0adf57 chromedriver + 991063
13  chromedriver                        0x000000010f08e853 chromedriver + 862291
14  chromedriver                        0x000000010f05e5c6 chromedriver + 665030
15  chromedriver                        0x000000010f05ee4e chromedriver + 667214
16  chromedriver                        0x000000010f46cc90 chromedriver + 4918416
17  chromedriver                        0x000000010f471c8d chromedriver + 4938893
18  chromedriver                        0x000000010f472365 chromedriver + 4940645
19  chromedriver                        0x000000010f44dd74 chromedriver + 4791668
20  chromedriver                        0x000000010f472659 chromedriver + 4941401
21  chromedriver                        0x000000010f43f544 chromedriver + 4732228
22  chromedriver                        0x000000010f492828 chromedriver + 5072936
23  chromedriver                        0x000000010f4929e7 chromedriver + 5073383
24  chromedriver                        0x000000010f4a1afe chromedriver + 5135102
25  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
26  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721257333.968517
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359: Message: stale element reference: stale element not found
  (Session info: chrome-headless-shell=126.0.6478.182); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
0   chromedriver                        0x000000010f4aa078 chromedriver + 5169272
1   chromedriver                        0x000000010f4a1f4a chromedriver + 5136202
2   chromedriver                        0x000000010f01e36c chromedriver + 402284
3   chromedriver                        0x000000010f02ee5d chromedriver + 470621
4   chromedriver                        0x000000010f02f7ba chromedriver + 473018
5   chromedriver                        0x000000010f024585 chromedriver + 427397
6   chromedriver                        0x000000010f02f7eb chromedriver + 473067
7   chromedriver                        0x000000010f024585 chromedriver + 427397
8   chromedriver                        0x000000010f022815 chromedriver + 419861
9   chromedriver                        0x000000010f025c2c chromedriver + 433196
10  chromedriver                        0x000000010f0aeee8 chromedriver + 995048
11  chromedriver                        0x000000010f08eab2 chromedriver + 862898
12  chromedriver                        0x000000010f0adf57 chromedriver + 991063
13  chromedriver                        0x000000010f08e853 chromedriver + 862291
14  chromedriver                        0x000000010f05e5c6 chromedriver + 665030
15  chromedriver                        0x000000010f05ee4e chromedriver + 667214
16  chromedriver                        0x000000010f46cc90 chromedriver + 4918416
17  chromedriver                        0x000000010f471c8d chromedriver + 4938893
18  chromedriver                        0x000000010f472365 chromedriver + 4940645
19  chromedriver                        0x000000010f44dd74 chromedriver + 4791668
20  chromedriver                        0x000000010f472659 chromedriver + 4941401
21  chromedriver                        0x000000010f43f544 chromedriver + 4732228
22  chromedriver                        0x000000010f492828 chromedriver + 5072936
23  chromedriver                        0x000000010f4929e7 chromedriver + 5073383
24  chromedriver                        0x000000010f4a1afe chromedriver + 5135102
25  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
26  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721257333.9848928
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D360: Message: stale element reference: stale element not found
  (Session info: chrome-headless-shell=126.0.6478.182); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
0   chromedriver                        0x000000010f4aa078 chromedriver + 5169272
1   chromedriver                        0x000000010f4a1f4a chromedriver + 5136202
2   chromedriver                        0x000000010f01e36c chromedriver + 402284
3   chromedriver                        0x000000010f02ee5d chromedriver + 470621
4   chromedriver                        0x000000010f02f7ba chromedriver + 473018
5   chromedriver                        0x000000010f024585 chromedriver + 427397
6   chromedriver                        0x000000010f02f7eb chromedriver + 473067
7   chromedriver                        0x000000010f024585 chromedriver + 427397
8   chromedriver                        0x000000010f022815 chromedriver + 419861
9   chromedriver                        0x000000010f025c2c chromedriver + 433196
10  chromedriver                        0x000000010f0aeee8 chromedriver + 995048
11  chromedriver                        0x000000010f08eab2 chromedriver + 862898
12  chromedriver                        0x000000010f0adf57 chromedriver + 991063
13  chromedriver                        0x000000010f08e853 chromedriver + 862291
14  chromedriver                        0x000000010f05e5c6 chromedriver + 665030
15  chromedriver                        0x000000010f05ee4e chromedriver + 667214
16  chromedriver                        0x000000010f46cc90 chromedriver + 4918416
17  chromedriver                        0x000000010f471c8d chromedriver + 4938893
18  chromedriver                        0x000000010f472365 chromedriver + 4940645
19  chromedriver                        0x000000010f44dd74 chromedriver + 4791668
20  chromedriver                        0x000000010f472659 chromedriver + 4941401
21  chromedriver                        0x000000010f43f544 chromedriver + 4732228
22  chromedriver                        0x000000010f492828 chromedriver + 5072936
23  chromedriver                        0x000000010f4929e7 chromedriver + 5073383
24  chromedriver                        0x000000010f4a1afe chromedriver + 5135102
25  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
26  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721257333.987571
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362: Message: 
Stacktrace:
0   chromedriver                        0x000000010f4aa078 chromedriver + 5169272
1   chromedriver                        0x000000010f4a1f4a chromedriver + 5136202
2   chromedriver                        0x000000010f01e36c chromedriver + 402284
3   chromedriver                        0x000000010f06b740 chromedriver + 718656
4   chromedriver                        0x000000010f06ba01 chromedriver + 719361
5   chromedriver                        0x000000010f0b0bc4 chromedriver + 1002436
6   chromedriver                        0x000000010f08eadd chromedriver + 862941
7   chromedriver                        0x000000010f0adf57 chromedriver + 991063
8   chromedriver                        0x000000010f08e853 chromedriver + 862291
9   chromedriver                        0x000000010f05e5c6 chromedriver + 665030
10  chromedriver                        0x000000010f05ee4e chromedriver + 667214
11  chromedriver                        0x000000010f46cc90 chromedriver + 4918416
12  chromedriver                        0x000000010f471c8d chromedriver + 4938893
13  chromedriver                        0x000000010f472365 chromedriver + 4940645
14  chromedriver                        0x000000010f44dd74 chromedriver + 4791668
15  chromedriver                        0x000000010f472659 chromedriver + 4941401
16  chromedriver                        0x000000010f43f544 chromedriver + 4732228
17  chromedriver                        0x000000010f492828 chromedriver + 5072936
18  chromedriver                        0x000000010f4929e7 chromedriver + 5073383
19  chromedriver                        0x000000010f4a1afe chromedriver + 5135102
20  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
INFO:root:fast_api_main/ Reviews for product 53CT48: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
INFO:root:fast_api_main/ Reviews for product 53CT50: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
INFO:root:fast_api_main/ Reviews for product 45RC17: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
INFO:root:fast_api_main/ Reviews for product 45RC16: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
INFO:root:fast_api_main/ Sending review at 1721257349.489783
INFO:root:fast_api_main/ Reviews for product 45RC19: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
INFO:root:fast_api_main/ Sending review at 1721257349.6430779
INFO:root:fast_api_main/ Sending review at 1721257349.643221
INFO:root:fast_api_main/ Sending review at 1721257349.6433191
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

ERROR:root:Error in ask_question: message_spinner() got an unexpected keyword argument 'center_col'
ERROR:root:Error in ask_question: message_spinner() got an unexpected keyword argument 'center_col'
INFO:root:ChromeDriver initialized successfully.
ERROR:root:Error in ask_question: message_spinner() got an unexpected keyword argument 'center_col'
INFO:     Started server process [9163]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
ERROR:root:Error in ask_question: message_spinner() got an unexpected keyword argument 'center_col'
ERROR:root:Error in ask_question: message_spinner() got an unexpected keyword argument 'center_col'
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [9256]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:root: fast_api_main/ Adding new session ID baf1da50-ac6e-4279-b6ea-2d275d402a05 to session_store
INFO:root:fast_api_main/ Received question: gloves for working with session_id: baf1da50-ac6e-4279-b6ea-2d275d402a05
INFO:root:fast_api_main/ Current chat history for session_id baf1da50-ac6e-4279-b6ea-2d275d402a05: []
INFO:root:fast_api_main/ Processing question: gloves for working
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for extract_customer_attributes: 2.1986019611358643
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.00021386146545410156
INFO:root:chat_processor/ chat_procesing: message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 2.200385093688965
INFO:root:fast_api_main/ Updated chat history for session_id baf1da50-ac6e-4279-b6ea-2d275d402a05: ["QUESTION: gloves for working. MESSAGE: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nThese full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves for working with message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:62894 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID da64f809-c620-41f9-a9f7-da09984a946f to session_store
INFO:root:fast_api_main/ Received question: gloves with session_id: da64f809-c620-41f9-a9f7-da09984a946f
INFO:root:fast_api_main/ Current chat history for session_id da64f809-c620-41f9-a9f7-da09984a946f: []
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 2.0451180934906006
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 1 failed: timed out
Time for split_process_and_message_from_response: 5.1975250244140625e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 2.045644760131836
INFO:root:fast_api_main/ Updated chat history for session_id da64f809-c620-41f9-a9f7-da09984a946f: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves with message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:62895 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 0d36299d-0af8-4498-b314-71a668545cae to session_store
INFO:root:fast_api_main/ Received question: socks with session_id: 0d36299d-0af8-4498-b314-71a668545cae
INFO:root:fast_api_main/ Current chat history for session_id 0d36299d-0af8-4498-b314-71a668545cae: []
INFO:root:fast_api_main/ Processing question: socks
ERROR:root:Attempt 1 failed: timed out
Time for extract_customer_attributes: 1.7520921230316162
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 3.790855407714844e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.7525608539581299
INFO:root:fast_api_main/ Updated chat history for session_id 0d36299d-0af8-4498-b314-71a668545cae: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: socks with message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]
INFO:     127.0.0.1:62899 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 099a0410-ddaa-423c-afa4-0c434e46a1dd to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 099a0410-ddaa-423c-afa4-0c434e46a1dd
INFO:root:fast_api_main/ Current chat history for session_id 099a0410-ddaa-423c-afa4-0c434e46a1dd: []
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.008854627609253
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
Time for split_process_and_message_from_response: 6.103515625e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.0093669891357422
INFO:root:fast_api_main/ Updated chat history for session_id 099a0410-ddaa-423c-afa4-0c434e46a1dd: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:62900 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 086d0c03-4dc0-4755-9fdf-bfcccd9e5d72 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 086d0c03-4dc0-4755-9fdf-bfcccd9e5d72
INFO:root:fast_api_main/ Current chat history for session_id 086d0c03-4dc0-4755-9fdf-bfcccd9e5d72: []
INFO:root:fast_api_main/ Processing question: hammer
ERROR:root:Attempt 2 failed: timed out
Invalid JSON: 

Time for extract_customer_attributes: 1.087130069732666
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
Time for split_process_and_message_from_response: 7.009506225585938e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:fast_api_main/ Message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.0877909660339355
INFO:root:fast_api_main/ Updated chat history for session_id 086d0c03-4dc0-4755-9fdf-bfcccd9e5d72: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]
INFO:     127.0.0.1:62906 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 291b46e9-168e-4bd5-9b60-c00722b85e4e to session_store
INFO:root:fast_api_main/ Received question: Work Gloves with session_id: 291b46e9-168e-4bd5-9b60-c00722b85e4e
INFO:root:fast_api_main/ Current chat history for session_id 291b46e9-168e-4bd5-9b60-c00722b85e4e: []
INFO:root:fast_api_main/ Processing question: Work Gloves
Time for extract_customer_attributes: 1.9440608024597168
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 4.100799560546875e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:fast_api_main/ Message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.9445908069610596
INFO:root:fast_api_main/ Updated chat history for session_id 291b46e9-168e-4bd5-9b60-c00722b85e4e: ["QUESTION: Work Gloves. MESSAGE: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: Work Gloves with message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]
INFO:     127.0.0.1:62908 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ['IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359', 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D360', 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362']
INFO:root:grainger_image_util item.part[-1]: 34D359 item.part[0]: IMPACTO Mechanics Gloves: L (9)
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D359 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34D360 item.part[0]: IMPACTO Mechanics Gloves: M (8)
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D360 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34D362 item.part[0]: IMPACTO Mechanics Gloves: XL (10)
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D362 in 0.00 seconds
INFO:root:fast_api_main/ Received question: gloves with session_id: da64f809-c620-41f9-a9f7-da09984a946f
INFO:root:fast_api_main/ Current chat history for session_id da64f809-c620-41f9-a9f7-da09984a946f: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 1.8748669624328613
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 4.506111145019531e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.8753092288970947
INFO:root:fast_api_main/ Updated chat history for session_id da64f809-c620-41f9-a9f7-da09984a946f: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves with message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:62920 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: socks with session_id: 0d36299d-0af8-4498-b314-71a668545cae
INFO:root:fast_api_main/ Current chat history for session_id 0d36299d-0af8-4498-b314-71a668545cae: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: socks
Time for extract_customer_attributes: 1.9402728080749512
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 2.9802322387695312e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.940843105316162
INFO:root:fast_api_main/ Updated chat history for session_id 0d36299d-0af8-4498-b314-71a668545cae: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you need any other details on these socks or if you'd like me to look for additional options. I'm happy to help find the perfect socks for your needs!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: socks with message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]
INFO:     127.0.0.1:62922 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: hammer with session_id: 099a0410-ddaa-423c-afa4-0c434e46a1dd
INFO:root:fast_api_main/ Current chat history for session_id 099a0410-ddaa-423c-afa4-0c434e46a1dd: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.0230088233947754
INFO:root:chat_processor/ Chat History passed to processor: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
Time for split_process_and_message_from_response: 5.7697296142578125e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.0234639644622803
INFO:root:fast_api_main/ Updated chat history for session_id 099a0410-ddaa-423c-afa4-0c434e46a1dd: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:62923 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: hammer with session_id: 086d0c03-4dc0-4755-9fdf-bfcccd9e5d72
INFO:root:fast_api_main/ Current chat history for session_id 086d0c03-4dc0-4755-9fdf-bfcccd9e5d72: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.0219051837921143
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
Time for split_process_and_message_from_response: 4.696846008300781e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.0224030017852783
INFO:root:fast_api_main/ Updated chat history for session_id 086d0c03-4dc0-4755-9fdf-bfcccd9e5d72: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}", 'QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:62929 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: Work Gloves with session_id: 291b46e9-168e-4bd5-9b60-c00722b85e4e
INFO:root:fast_api_main/ Current chat history for session_id 291b46e9-168e-4bd5-9b60-c00722b85e4e: ["QUESTION: Work Gloves. MESSAGE: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: Work Gloves
Time for extract_customer_attributes: 2.256592035293579
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: Work Gloves. MESSAGE: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 4.76837158203125e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large through 2XL. I've listed the product details and codes below so you can easily reference them when placing an order. Please let me know if you need any other recommendations or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:fast_api_main/ Message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large through 2XL. I've listed the product details and codes below so you can easily reference them when placing an order. Please let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 2.257018804550171
INFO:root:fast_api_main/ Updated chat history for session_id 291b46e9-168e-4bd5-9b60-c00722b85e4e: ["QUESTION: Work Gloves. MESSAGE: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: Work Gloves. MESSAGE: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large through 2XL. I've listed the product details and codes below so you can easily reference them when placing an order. Please let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: Work Gloves with message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large through 2XL. I've listed the product details and codes below so you can easily reference them when placing an order. Please let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]
INFO:     127.0.0.1:62930 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Total time to fetch images: 0.005717754364013672 seconds
INFO:     127.0.0.1:62914 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721258029.363942
INFO:     ('127.0.0.1', 62987) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721258029.366069
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D360
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362: Message: 
Stacktrace:
0   chromedriver                        0x0000000102269078 chromedriver + 5169272
1   chromedriver                        0x0000000102260f4a chromedriver + 5136202
2   chromedriver                        0x0000000101ddd36c chromedriver + 402284
3   chromedriver                        0x0000000101e2a740 chromedriver + 718656
4   chromedriver                        0x0000000101e2aa01 chromedriver + 719361
5   chromedriver                        0x0000000101e6fbc4 chromedriver + 1002436
6   chromedriver                        0x0000000101e4dadd chromedriver + 862941
7   chromedriver                        0x0000000101e6cf57 chromedriver + 991063
8   chromedriver                        0x0000000101e4d853 chromedriver + 862291
9   chromedriver                        0x0000000101e1d5c6 chromedriver + 665030
10  chromedriver                        0x0000000101e1de4e chromedriver + 667214
11  chromedriver                        0x000000010222bc90 chromedriver + 4918416
12  chromedriver                        0x0000000102230c8d chromedriver + 4938893
13  chromedriver                        0x0000000102231365 chromedriver + 4940645
14  chromedriver                        0x000000010220cd74 chromedriver + 4791668
15  chromedriver                        0x0000000102231659 chromedriver + 4941401
16  chromedriver                        0x00000001021fe544 chromedriver + 4732228
17  chromedriver                        0x0000000102251828 chromedriver + 5072936
18  chromedriver                        0x00000001022519e7 chromedriver + 5073383
19  chromedriver                        0x0000000102260afe chromedriver + 5135102
20  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721258055.289707
INFO:root:fast_api_main/ Reviews for product 34D359: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
INFO:root:fast_api_main/ Sending review at 1721258056.023381
INFO:root:fast_api_main/ Reviews for product 34D360: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [9401]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:root: fast_api_main/ Adding new session ID 37e77aea-c844-4316-8ae7-59e54eaeed69 to session_store
INFO:root:fast_api_main/ Received question: Work Gloves with session_id: 37e77aea-c844-4316-8ae7-59e54eaeed69
INFO:root:fast_api_main/ Current chat history for session_id 37e77aea-c844-4316-8ae7-59e54eaeed69: []
INFO:root:fast_api_main/ Processing question: Work Gloves
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for extract_customer_attributes: 3.438056230545044
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.00027680397033691406
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. I've listed the key details for each below - just let me know if you need any other information or want to place an order!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:fast_api_main/ Message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. I've listed the key details for each below - just let me know if you need any other information or want to place an order!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 3.440751791000366
INFO:root:fast_api_main/ Updated chat history for session_id 37e77aea-c844-4316-8ae7-59e54eaeed69: ["QUESTION: Work Gloves. MESSAGE: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. I've listed the key details for each below - just let me know if you need any other information or want to place an order!. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: Work Gloves with message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. I've listed the key details for each below - just let me know if you need any other information or want to place an order!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]
INFO:     127.0.0.1:63291 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 5eaf70b2-6757-4b74-87cf-94a95ab869ad to session_store
INFO:root:fast_api_main/ Received question: gloves with session_id: 5eaf70b2-6757-4b74-87cf-94a95ab869ad
INFO:root:fast_api_main/ Current chat history for session_id 5eaf70b2-6757-4b74-87cf-94a95ab869ad: []
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 2.471299886703491
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 1 failed: timed out
Time for split_process_and_message_from_response: 8.130073547363281e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 2.471827983856201
INFO:root:fast_api_main/ Updated chat history for session_id 5eaf70b2-6757-4b74-87cf-94a95ab869ad: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves with message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:63297 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID e49ebbfd-6831-4f55-9006-843bb26df063 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: e49ebbfd-6831-4f55-9006-843bb26df063
INFO:root:fast_api_main/ Current chat history for session_id e49ebbfd-6831-4f55-9006-843bb26df063: []
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.3557419776916504
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 3.814697265625e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:fast_api_main/ Message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.3566880226135254
INFO:root:fast_api_main/ Updated chat history for session_id e49ebbfd-6831-4f55-9006-843bb26df063: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]
INFO:     127.0.0.1:63299 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 1fe01507-e28c-439e-8cc0-9af3c9aa540f to session_store
INFO:root:fast_api_main/ Received question: gloves for working with session_id: 1fe01507-e28c-439e-8cc0-9af3c9aa540f
INFO:root:fast_api_main/ Current chat history for session_id 1fe01507-e28c-439e-8cc0-9af3c9aa540f: []
INFO:root:fast_api_main/ Processing question: gloves for working
Time for extract_customer_attributes: 2.2450990676879883
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
Time for split_process_and_message_from_response: 3.4809112548828125e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 2.2455639839172363
INFO:root:fast_api_main/ Updated chat history for session_id 1fe01507-e28c-439e-8cc0-9af3c9aa540f: ["QUESTION: gloves for working. MESSAGE: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nThese full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves for working with message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:63300 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID dcd241a1-cec6-46c4-94db-e59e56845720 to session_store
INFO:root:fast_api_main/ Received question: socks with session_id: dcd241a1-cec6-46c4-94db-e59e56845720
INFO:root:fast_api_main/ Current chat history for session_id dcd241a1-cec6-46c4-94db-e59e56845720: []
INFO:root:fast_api_main/ Processing question: socks
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
Time for extract_customer_attributes: 1.9552109241485596
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 4.100799560546875e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.9556658267974854
INFO:root:fast_api_main/ Updated chat history for session_id dcd241a1-cec6-46c4-94db-e59e56845720: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: socks with message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]
INFO:     127.0.0.1:63304 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 21e6431e-7bce-4bb8-9bea-ffd6e8fca8a7 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 21e6431e-7bce-4bb8-9bea-ffd6e8fca8a7
INFO:root:fast_api_main/ Current chat history for session_id 21e6431e-7bce-4bb8-9bea-ffd6e8fca8a7: []
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.2327990531921387
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 5.888938903808594e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.2334108352661133
INFO:root:fast_api_main/ Updated chat history for session_id 21e6431e-7bce-4bb8-9bea-ffd6e8fca8a7: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:63305 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID f1011e55-08bf-48d4-aa00-73625f26d665 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: f1011e55-08bf-48d4-aa00-73625f26d665
INFO:root:fast_api_main/ Current chat history for session_id f1011e55-08bf-48d4-aa00-73625f26d665: []
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.1236481666564941
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 5.507469177246094e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.1241750717163086
INFO:root:fast_api_main/ Updated chat history for session_id f1011e55-08bf-48d4-aa00-73625f26d665: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:63309 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ['IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359', 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362', 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D364', 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR, 6WPG2', 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR, 6WPG1']
INFO:root:grainger_image_util item.part[-1]: 34D359 item.part[0]: IMPACTO Mechanics Gloves: L ( 9 )
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D359 in 0.06 seconds
INFO:root:grainger_image_util item.part[-1]: 34D362 item.part[0]: IMPACTO Mechanics Gloves: XL ( 10 )
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D362 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34D364 item.part[0]: IMPACTO Mechanics Gloves: 2XL ( 11 )
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D364 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 6WPG2 item.part[0]: IMPACTO Mechanics Gloves: XL ( 10 )
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/6WPG0-A0090-1_v1?$lgmain$ for 6WPG2 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 6WPG1 item.part[0]: IMPACTO Mechanics Gloves: L ( 9 )
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/6WPG0-A0090-1_v1?$lgmain$ for 6WPG1 in 0.00 seconds
INFO:root:fast_api_main/ Received question: gloves with session_id: 5eaf70b2-6757-4b74-87cf-94a95ab869ad
INFO:root:fast_api_main/ Current chat history for session_id 5eaf70b2-6757-4b74-87cf-94a95ab869ad: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 1.7679920196533203
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 6.103515625e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.768467903137207
INFO:root:fast_api_main/ Updated chat history for session_id 5eaf70b2-6757-4b74-87cf-94a95ab869ad: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves with message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:63324 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: hammer with session_id: e49ebbfd-6831-4f55-9006-843bb26df063
INFO:root:fast_api_main/ Current chat history for session_id e49ebbfd-6831-4f55-9006-843bb26df063: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.2077066898345947
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
Time for split_process_and_message_from_response: 4.792213439941406e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:fast_api_main/ Message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.2084379196166992
INFO:root:fast_api_main/ Updated chat history for session_id e49ebbfd-6831-4f55-9006-843bb26df063: ["QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}", "QUESTION: hammer. MESSAGE: Hello! I found 4 hammers in our catalog that match your search:\n- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. \n- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.\n- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  \n- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.\nPlease let me know if you need any other details about these hammers! I'm happy to help.. CUSTOMER ATTRIBUTES: {}"]
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 4 hammers in our catalog that match your search:
- 45RC16 is a 16 oz fiberglass hammer with a 1 1/8 in face diameter and 13 in overall length. 
- 45RC17 is a 24 oz fiberglass hammer with a 1 3/8 in face diameter and 15 in overall length.
- 45RC18 is a 32 oz fiberglass hammer with a 1 1/2 in face diameter and 15 in overall length.  
- 45RC19 is a 40 oz fiberglass hammer with a 1 5/8 in face diameter and 16 in overall length.
Please let me know if you need any other details about these hammers! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]
INFO:     127.0.0.1:63325 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: gloves for working with session_id: 1fe01507-e28c-439e-8cc0-9af3c9aa540f
INFO:root:fast_api_main/ Current chat history for session_id 1fe01507-e28c-439e-8cc0-9af3c9aa540f: ["QUESTION: gloves for working. MESSAGE: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nThese full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: gloves for working
Time for extract_customer_attributes: 2.305173873901367
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: gloves for working. MESSAGE: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nThese full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 3.504753112792969e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 2.305671215057373
INFO:root:fast_api_main/ Updated chat history for session_id 1fe01507-e28c-439e-8cc0-9af3c9aa540f: ["QUESTION: gloves for working. MESSAGE: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nThese full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: gloves for working. MESSAGE: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nThese full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves for working with message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:63326 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Total time to fetch images: 0.07269883155822754 seconds
INFO:     127.0.0.1:63314 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721258274.0654001
INFO:     ('127.0.0.1', 63387) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721258274.067059
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR, 6WPG2
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D364
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR, 6WPG1
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362
INFO:root:fast_api_main/ Received question: sledge hammer with session_id: f1011e55-08bf-48d4-aa00-73625f26d665
INFO:root:fast_api_main/ Current chat history for session_id f1011e55-08bf-48d4-aa00-73625f26d665: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processing question: sledge hammer
Time for extract_customer_attributes: 1.8263218402862549
INFO:root:chat_processor/ Chat History passed to processor: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
Time for split_process_and_message_from_response: 3.3855438232421875e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:

2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg 
33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg

Both sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:fast_api_main/ Message: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:

2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg 
33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg

Both sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.8269619941711426
INFO:root:fast_api_main/ Updated chat history for session_id f1011e55-08bf-48d4-aa00-73625f26d665: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}', "QUESTION: sledge hammer. MESSAGE: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:\n\n2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg \n33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg\n\nBoth sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: sledge hammer with message: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:

2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg 
33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg

Both sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]
INFO:     127.0.0.1:63480 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ['Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg, 2DBU1', 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg, 33NT32']
INFO:root:grainger_image_util item.part[-1]: 2DBU1 item.part[0]: Standard Sledge Hammer: Steel
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBU1-A0075-1_v1?$lgmain$ for 2DBU1 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 33NT32 item.part[0]: Standard Sledge Hammer: Steel
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/33NT35-A0075-1_v1?$lgmain$ for 33NT32 in 0.00 seconds
INFO:root:fast_api_main/ Total time to fetch images: 0.002959012985229492 seconds
INFO:     127.0.0.1:63486 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721258308.921546
INFO:     ('127.0.0.1', 63489) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721258308.923784
INFO:root:fast_api_main/ Fetching reviews for product: Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg, 2DBU1
INFO:root:fast_api_main/ Fetching reviews for product: Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg, 33NT32
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362: Message: stale element reference: stale element not found
  (Session info: chrome-headless-shell=126.0.6478.182); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
0   chromedriver                        0x00000001011c0078 chromedriver + 5169272
1   chromedriver                        0x00000001011b7f4a chromedriver + 5136202
2   chromedriver                        0x0000000100d3436c chromedriver + 402284
3   chromedriver                        0x0000000100d44e5d chromedriver + 470621
4   chromedriver                        0x0000000100d457ba chromedriver + 473018
5   chromedriver                        0x0000000100d3a585 chromedriver + 427397
6   chromedriver                        0x0000000100d457eb chromedriver + 473067
7   chromedriver                        0x0000000100d3a585 chromedriver + 427397
8   chromedriver                        0x0000000100d38815 chromedriver + 419861
9   chromedriver                        0x0000000100d3bc2c chromedriver + 433196
10  chromedriver                        0x0000000100dc4ee8 chromedriver + 995048
11  chromedriver                        0x0000000100da4ab2 chromedriver + 862898
12  chromedriver                        0x0000000100dc3f57 chromedriver + 991063
13  chromedriver                        0x0000000100da4853 chromedriver + 862291
14  chromedriver                        0x0000000100d745c6 chromedriver + 665030
15  chromedriver                        0x0000000100d74e4e chromedriver + 667214
16  chromedriver                        0x0000000101182c90 chromedriver + 4918416
17  chromedriver                        0x0000000101187c8d chromedriver + 4938893
18  chromedriver                        0x0000000101188365 chromedriver + 4940645
19  chromedriver                        0x0000000101163d74 chromedriver + 4791668
20  chromedriver                        0x0000000101188659 chromedriver + 4941401
21  chromedriver                        0x0000000101155544 chromedriver + 4732228
22  chromedriver                        0x00000001011a8828 chromedriver + 5072936
23  chromedriver                        0x00000001011a89e7 chromedriver + 5073383
24  chromedriver                        0x00000001011b7afe chromedriver + 5135102
25  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
26  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721258328.947008
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg, 2DBU1: Message: stale element reference: stale element not found
  (Session info: chrome-headless-shell=126.0.6478.182); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
0   chromedriver                        0x00000001011c0078 chromedriver + 5169272
1   chromedriver                        0x00000001011b7f4a chromedriver + 5136202
2   chromedriver                        0x0000000100d3436c chromedriver + 402284
3   chromedriver                        0x0000000100d44e5d chromedriver + 470621
4   chromedriver                        0x0000000100d457ba chromedriver + 473018
5   chromedriver                        0x0000000100d3a585 chromedriver + 427397
6   chromedriver                        0x0000000100d457eb chromedriver + 473067
7   chromedriver                        0x0000000100d3a585 chromedriver + 427397
8   chromedriver                        0x0000000100d38815 chromedriver + 419861
9   chromedriver                        0x0000000100d3bc2c chromedriver + 433196
10  chromedriver                        0x0000000100dc4ee8 chromedriver + 995048
11  chromedriver                        0x0000000100da4ab2 chromedriver + 862898
12  chromedriver                        0x0000000100dc3f57 chromedriver + 991063
13  chromedriver                        0x0000000100da4853 chromedriver + 862291
14  chromedriver                        0x0000000100d745c6 chromedriver + 665030
15  chromedriver                        0x0000000100d74e4e chromedriver + 667214
16  chromedriver                        0x0000000101182c90 chromedriver + 4918416
17  chromedriver                        0x0000000101187c8d chromedriver + 4938893
18  chromedriver                        0x0000000101188365 chromedriver + 4940645
19  chromedriver                        0x0000000101163d74 chromedriver + 4791668
20  chromedriver                        0x0000000101188659 chromedriver + 4941401
21  chromedriver                        0x0000000101155544 chromedriver + 4732228
22  chromedriver                        0x00000001011a8828 chromedriver + 5072936
23  chromedriver                        0x00000001011a89e7 chromedriver + 5073383
24  chromedriver                        0x00000001011b7afe chromedriver + 5135102
25  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
26  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721258328.954677
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg, 33NT32: Message: 
Stacktrace:
0   chromedriver                        0x00000001011c0078 chromedriver + 5169272
1   chromedriver                        0x00000001011b7f4a chromedriver + 5136202
2   chromedriver                        0x0000000100d3436c chromedriver + 402284
3   chromedriver                        0x0000000100d81740 chromedriver + 718656
4   chromedriver                        0x0000000100d81a01 chromedriver + 719361
5   chromedriver                        0x0000000100dc6bc4 chromedriver + 1002436
6   chromedriver                        0x0000000100da4add chromedriver + 862941
7   chromedriver                        0x0000000100dc3f57 chromedriver + 991063
8   chromedriver                        0x0000000100da4853 chromedriver + 862291
9   chromedriver                        0x0000000100d745c6 chromedriver + 665030
10  chromedriver                        0x0000000100d74e4e chromedriver + 667214
11  chromedriver                        0x0000000101182c90 chromedriver + 4918416
12  chromedriver                        0x0000000101187c8d chromedriver + 4938893
13  chromedriver                        0x0000000101188365 chromedriver + 4940645
14  chromedriver                        0x0000000101163d74 chromedriver + 4791668
15  chromedriver                        0x0000000101188659 chromedriver + 4941401
16  chromedriver                        0x0000000101155544 chromedriver + 4732228
17  chromedriver                        0x00000001011a8828 chromedriver + 5072936
18  chromedriver                        0x00000001011a89e7 chromedriver + 5073383
19  chromedriver                        0x00000001011b7afe chromedriver + 5135102
20  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
INFO:root:fast_api_main/ Reviews for product 6WPG2: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Great.']}
INFO:root:fast_api_main/ Reviews for product 34D364: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Great.']}
INFO:root:fast_api_main/ Reviews for product 34D359: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Great.']}
INFO:root:fast_api_main/ Sending review at 1721258336.870774
INFO:root:fast_api_main/ Sending review at 1721258336.8710191
INFO:root:fast_api_main/ Sending review at 1721258336.871146
INFO:root:fast_api_main/ Reviews for product 6WPG1: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Great.']}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [9620]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:root: fast_api_main/ Adding new session ID d67a0fc8-bcc8-4389-866c-cb583ecc8790 to session_store
INFO:root:fast_api_main/ Received question: sledge hammer with session_id: d67a0fc8-bcc8-4389-866c-cb583ecc8790
INFO:root:fast_api_main/ Current chat history for session_id d67a0fc8-bcc8-4389-866c-cb583ecc8790: []
INFO:root:fast_api_main/ Processing question: sledge hammer
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for extract_customer_attributes: 1.806797742843628
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.0003921985626220703
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:

2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg 
33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg

Both sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:fast_api_main/ Message: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:

2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg 
33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg

Both sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.8079779148101807
INFO:root:fast_api_main/ Updated chat history for session_id d67a0fc8-bcc8-4389-866c-cb583ecc8790: ["QUESTION: sledge hammer. MESSAGE: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:\n\n2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg \n33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg\n\nBoth sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: sledge hammer with message: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:

2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg 
33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg

Both sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]
INFO:     127.0.0.1:63849 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID d82fabf6-7d01-4b39-ab75-178e37889d0b to session_store
INFO:root:fast_api_main/ Received question: gloves for working with session_id: d82fabf6-7d01-4b39-ab75-178e37889d0b
INFO:root:fast_api_main/ Current chat history for session_id d82fabf6-7d01-4b39-ab75-178e37889d0b: []
INFO:root:fast_api_main/ Processing question: gloves for working
Time for extract_customer_attributes: 1.9706230163574219
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 4.982948303222656e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.9716699123382568
INFO:root:fast_api_main/ Updated chat history for session_id d82fabf6-7d01-4b39-ab75-178e37889d0b: ["QUESTION: gloves for working. MESSAGE: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nThese full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves for working with message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:63854 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 1addbb6c-75e8-4f25-9895-f383d7a3f087 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 1addbb6c-75e8-4f25-9895-f383d7a3f087
INFO:root:fast_api_main/ Current chat history for session_id 1addbb6c-75e8-4f25-9895-f383d7a3f087: []
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.1131081581115723
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:Attempt 1 failed: timed out
Time for split_process_and_message_from_response: 5.507469177246094e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.1137468814849854
INFO:root:fast_api_main/ Updated chat history for session_id 1addbb6c-75e8-4f25-9895-f383d7a3f087: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:63858 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID ca53781a-72ee-4b3c-97a3-035c84d8f940 to session_store
INFO:root:fast_api_main/ Received question: gloves with session_id: ca53781a-72ee-4b3c-97a3-035c84d8f940
INFO:root:fast_api_main/ Current chat history for session_id ca53781a-72ee-4b3c-97a3-035c84d8f940: []
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 2.183682680130005
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 3.314018249511719e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've looked through our catalog and found 3 mechanics gloves that may work for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have additional questions! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! I've looked through our catalog and found 3 mechanics gloves that may work for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have additional questions! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 2.184148073196411
INFO:root:fast_api_main/ Updated chat history for session_id ca53781a-72ee-4b3c-97a3-035c84d8f940: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that may work for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have additional questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves with message: Hello there! I've looked through our catalog and found 3 mechanics gloves that may work for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have additional questions! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:63859 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 033d0b5a-bb9a-46a2-8b7c-1391a9f6b607 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 033d0b5a-bb9a-46a2-8b7c-1391a9f6b607
INFO:root:fast_api_main/ Current chat history for session_id 033d0b5a-bb9a-46a2-8b7c-1391a9f6b607: []
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.023378849029541
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:Attempt 2 failed: timed out
Time for split_process_and_message_from_response: 4.982948303222656e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.0240180492401123
INFO:root:fast_api_main/ Updated chat history for session_id 033d0b5a-bb9a-46a2-8b7c-1391a9f6b607: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:63860 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID e6caf9ad-bfd7-4637-a06c-babe6511daeb to session_store
INFO:root:fast_api_main/ Received question: Work Gloves with session_id: e6caf9ad-bfd7-4637-a06c-babe6511daeb
INFO:root:fast_api_main/ Current chat history for session_id e6caf9ad-bfd7-4637-a06c-babe6511daeb: []
INFO:root:fast_api_main/ Processing question: Work Gloves
Time for extract_customer_attributes: 1.6837611198425293
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
Time for split_process_and_message_from_response: 4.887580871582031e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:fast_api_main/ Message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.6843459606170654
INFO:root:fast_api_main/ Updated chat history for session_id e6caf9ad-bfd7-4637-a06c-babe6511daeb: ["QUESTION: Work Gloves. MESSAGE: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.. CUSTOMER ATTRIBUTES: {'Industry': 'Manufacturing', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: Work Gloves with message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]
INFO:     127.0.0.1:63861 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID b4338245-c688-4e66-910d-2617c7955e54 to session_store
INFO:root:fast_api_main/ Received question: socks with session_id: b4338245-c688-4e66-910d-2617c7955e54
INFO:root:fast_api_main/ Current chat history for session_id b4338245-c688-4e66-910d-2617c7955e54: []
INFO:root:fast_api_main/ Processing question: socks
Time for extract_customer_attributes: 1.8394379615783691
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 3.218650817871094e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.8399379253387451
INFO:root:fast_api_main/ Updated chat history for session_id b4338245-c688-4e66-910d-2617c7955e54: ["QUESTION: socks. MESSAGE: Hello! Based on your interest in socks, I've found 2 options that may work for you:\n\n1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK\n\n2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK\n\nLet me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: socks with message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]
INFO:     127.0.0.1:63862 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 61054222-28a0-406f-8b8a-1e3a791b9656 to session_store
INFO:root:fast_api_main/ Received question: Men's waterproof boots size 14 with session_id: 61054222-28a0-406f-8b8a-1e3a791b9656
INFO:root:fast_api_main/ Current chat history for session_id 61054222-28a0-406f-8b8a-1e3a791b9656: []
INFO:root:fast_api_main/ Processing question: Men's waterproof boots size 14
Time for extract_customer_attributes: 1.749014139175415
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 6.508827209472656e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found two waterproof men's boots in size 14 for you:

1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.

2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. 

Please let me know if you would like any additional details on these boots or if you need help with anything else today!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
INFO:root:fast_api_main/ Message: Hello! I found two waterproof men's boots in size 14 for you:

1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.

2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. 

Please let me know if you would like any additional details on these boots or if you need help with anything else today!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.7495808601379395
INFO:root:fast_api_main/ Updated chat history for session_id 61054222-28a0-406f-8b8a-1e3a791b9656: ["QUESTION: Men's waterproof boots size 14. MESSAGE: Hello! I found two waterproof men's boots in size 14 for you:\n\n1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.\n\n2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. \n\nPlease let me know if you would like any additional details on these boots or if you need help with anything else today!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: Men's waterproof boots size 14 with message: Hello! I found two waterproof men's boots in size 14 for you:

1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.

2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. 

Please let me know if you would like any additional details on these boots or if you need help with anything else today!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]
INFO:     127.0.0.1:63865 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: hammer with session_id: 1addbb6c-75e8-4f25-9895-f383d7a3f087
INFO:root:fast_api_main/ Current chat history for session_id 1addbb6c-75e8-4f25-9895-f383d7a3f087: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 0.8246011734008789
INFO:root:chat_processor/ Chat History passed to processor: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
Time for split_process_and_message_from_response: 4.1961669921875e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 0.8251137733459473
INFO:root:fast_api_main/ Updated chat history for session_id 1addbb6c-75e8-4f25-9895-f383d7a3f087: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}', 'QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:63881 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: gloves with session_id: ca53781a-72ee-4b3c-97a3-035c84d8f940
INFO:root:fast_api_main/ Current chat history for session_id ca53781a-72ee-4b3c-97a3-035c84d8f940: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that may work for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have additional questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 1.811479091644287
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that may work for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have additional questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 4.601478576660156e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.8121209144592285
INFO:root:fast_api_main/ Updated chat history for session_id ca53781a-72ee-4b3c-97a3-035c84d8f940: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that may work for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have additional questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: gloves with message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:63882 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: Men's waterproof boots size 14 with session_id: 61054222-28a0-406f-8b8a-1e3a791b9656
INFO:root:fast_api_main/ Current chat history for session_id 61054222-28a0-406f-8b8a-1e3a791b9656: ["QUESTION: Men's waterproof boots size 14. MESSAGE: Hello! I found two waterproof men's boots in size 14 for you:\n\n1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.\n\n2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. \n\nPlease let me know if you would like any additional details on these boots or if you need help with anything else today!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: Men's waterproof boots size 14
Time for extract_customer_attributes: 1.8414349555969238
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: Men's waterproof boots size 14. MESSAGE: Hello! I found two waterproof men's boots in size 14 for you:\n\n1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.\n\n2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. \n\nPlease let me know if you would like any additional details on these boots or if you need help with anything else today!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 4.291534423828125e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found two waterproof men's boots in size 14 for you:

1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.

2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. 

Please let me know if you would like any additional details on these boots or if you need help with anything else today!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
INFO:root:fast_api_main/ Message: Hello! I found two waterproof men's boots in size 14 for you:

1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.

2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. 

Please let me know if you would like any additional details on these boots or if you need help with anything else today!
INFO:root:fast_api_main/ Response json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 1.8420369625091553
INFO:root:fast_api_main/ Updated chat history for session_id 61054222-28a0-406f-8b8a-1e3a791b9656: ["QUESTION: Men's waterproof boots size 14. MESSAGE: Hello! I found two waterproof men's boots in size 14 for you:\n\n1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.\n\n2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. \n\nPlease let me know if you would like any additional details on these boots or if you need help with anything else today!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}", "QUESTION: Men's waterproof boots size 14. MESSAGE: Hello! I found two waterproof men's boots in size 14 for you:\n\n1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.\n\n2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. \n\nPlease let me know if you would like any additional details on these boots or if you need help with anything else today!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: Men's waterproof boots size 14 with message: Hello! I found two waterproof men's boots in size 14 for you:

1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.

2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. 

Please let me know if you would like any additional details on these boots or if you need help with anything else today!
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]
INFO:     127.0.0.1:63885 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ['Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg, 2DBU1', 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg, 33NT32']
INFO:root:grainger_image_util item.part[-1]: 2DBU1 item.part[0]: Standard Sledge Hammer: Steel
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBU1-A0075-1_v1?$lgmain$ for 2DBU1 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 33NT32 item.part[0]: Standard Sledge Hammer: Steel
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/33NT35-A0075-1_v1?$lgmain$ for 33NT32 in 0.00 seconds
INFO:root:fast_api_main/ Fetching images for products: ['IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359', 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D360', 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362']
INFO:root:grainger_image_util item.part[-1]: 34D359 item.part[0]: IMPACTO Mechanics Gloves: L (9)
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D359 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34D360 item.part[0]: IMPACTO Mechanics Gloves: M (8)
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D360 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34D362 item.part[0]: IMPACTO Mechanics Gloves: XL (10)
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D362 in 0.00 seconds
INFO:root:fast_api_main/ Total time to fetch images: 0.004836320877075195 seconds
INFO:     127.0.0.1:63902 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Total time to fetch images: 0.004787921905517578 seconds
INFO:     127.0.0.1:63897 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721258798.248408
INFO:     ('127.0.0.1', 63943) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Starting reviews at 1721258798.249242
INFO:     ('127.0.0.1', 63942) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721258798.2510028
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D360
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362
INFO:root:fast_api_main/ Sending review at 1721258798.2531462
INFO:root:fast_api_main/ Fetching reviews for product: Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg, 2DBU1
INFO:root:fast_api_main/ Fetching reviews for product: Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg, 33NT32
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg, 33NT32: Message: 
Stacktrace:
0   chromedriver                        0x0000000108592078 chromedriver + 5169272
1   chromedriver                        0x0000000108589f4a chromedriver + 5136202
2   chromedriver                        0x000000010810636c chromedriver + 402284
3   chromedriver                        0x0000000108153740 chromedriver + 718656
4   chromedriver                        0x0000000108153a01 chromedriver + 719361
5   chromedriver                        0x0000000108198bc4 chromedriver + 1002436
6   chromedriver                        0x0000000108176add chromedriver + 862941
7   chromedriver                        0x0000000108195f57 chromedriver + 991063
8   chromedriver                        0x0000000108176853 chromedriver + 862291
9   chromedriver                        0x00000001081465c6 chromedriver + 665030
10  chromedriver                        0x0000000108146e4e chromedriver + 667214
11  chromedriver                        0x0000000108554c90 chromedriver + 4918416
12  chromedriver                        0x0000000108559c8d chromedriver + 4938893
13  chromedriver                        0x000000010855a365 chromedriver + 4940645
14  chromedriver                        0x0000000108535d74 chromedriver + 4791668
15  chromedriver                        0x000000010855a659 chromedriver + 4941401
16  chromedriver                        0x0000000108527544 chromedriver + 4732228
17  chromedriver                        0x000000010857a828 chromedriver + 5072936
18  chromedriver                        0x000000010857a9e7 chromedriver + 5073383
19  chromedriver                        0x0000000108589afe chromedriver + 5135102
20  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721258857.509352
INFO:root:fast_api_main/ Reviews for product 34D359: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Great.']}
INFO:root:fast_api_main/ Reviews for product 34D360: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Great.']}
INFO:root:fast_api_main/ Reviews for product 34D362: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Great.']}
INFO:root:fast_api_main/ Sending review at 1721258858.6796422
INFO:root:fast_api_main/ Sending review at 1721258858.679872
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
INFO:root:fast_api_main/ Reviews for product 2DBU1: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['Great.']}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [9739]
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:root: fast_api_main/ Adding new session ID b00086a1-68c0-46ef-9c25-f9fae3d760c8 to session_store
INFO:root:fast_api_main/ Received question: gloves for working with session_id: b00086a1-68c0-46ef-9c25-f9fae3d760c8
INFO:root:fast_api_main/ Current chat history for session_id b00086a1-68c0-46ef-9c25-f9fae3d760c8: []
INFO:root:fast_api_main/ Processing question: gloves for working
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for extract_customer_attributes: 1.8665142059326172
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.0001800060272216797
INFO:root:chat_processor/ chat_procesing: message: Hello there! Based on your needs for an individual customer not focused on sustainability or inventory management, I recommend the following mechanic gloves from our catalog:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

These full-fingered cowhide gloves with wrist support will protect your hands while allowing dexterity for general maintenance and repair work. Let me know if you need any other recommendations or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:64264 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID ceae6892-5833-4e19-89b2-f6c0072d3966 to session_store
INFO:root:fast_api_main/ Received question: socks with session_id: ceae6892-5833-4e19-89b2-f6c0072d3966
INFO:root:fast_api_main/ Current chat history for session_id ceae6892-5833-4e19-89b2-f6c0072d3966: []
INFO:root:fast_api_main/ Processing question: socks
Time for extract_customer_attributes: 1.6403179168701172
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 4.100799560546875e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in socks, I've found 2 options that may work for you:

1. 22MM16 - Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK

2. 34VH12 - Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK

Let me know if you would like any additional details on these socks! I'm happy to help find the perfect pair for your needs.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]
INFO:     127.0.0.1:64268 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID f95e37cc-eef2-44de-9e95-d31529e769a6 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: f95e37cc-eef2-44de-9e95-d31529e769a6
INFO:root:fast_api_main/ Current chat history for session_id f95e37cc-eef2-44de-9e95-d31529e769a6: []
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 0.920623779296875
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:Attempt 1 failed: timed out
ERROR:root:All 2 attempts failed.
Time for split_process_and_message_from_response: 4.9114227294921875e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:64269 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID f5e37d9a-d823-4f00-b078-016fa9b469d6 to session_store
INFO:root:fast_api_main/ Received question: gloves with session_id: f5e37d9a-d823-4f00-b078-016fa9b469d6
INFO:root:fast_api_main/ Current chat history for session_id f5e37d9a-d823-4f00-b078-016fa9b469d6: []
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 1.7281019687652588
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 3.314018249511719e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:

- IMPACTO Mechanics Gloves size L (code 34D359)
- IMPACTO Mechanics Gloves size M (code 34D360)  
- IMPACTO Mechanics Gloves size XL (code 34D362)

All are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:64273 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 6d3f208b-b89b-4de2-9442-6234d4cb6fc7 to session_store
INFO:root:fast_api_main/ Received question: sledge hammer with session_id: 6d3f208b-b89b-4de2-9442-6234d4cb6fc7
INFO:root:fast_api_main/ Current chat history for session_id 6d3f208b-b89b-4de2-9442-6234d4cb6fc7: []
INFO:root:fast_api_main/ Processing question: sledge hammer
Time for extract_customer_attributes: 2.669301986694336
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 2 failed: timed out
Time for split_process_and_message_from_response: 3.2901763916015625e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:

2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg 
33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg

Both sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]
INFO:     127.0.0.1:64274 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 0cefc1d3-5449-4e04-bc24-0fbcd8ccc06d to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 0cefc1d3-5449-4e04-bc24-0fbcd8ccc06d
INFO:root:fast_api_main/ Current chat history for session_id 0cefc1d3-5449-4e04-bc24-0fbcd8ccc06d: []
INFO:root:fast_api_main/ Processing question: hammer
ERROR:root:All 2 attempts failed.
Invalid JSON: 

Time for extract_customer_attributes: 0.8282151222229004
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 2 failed: timed out
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
Time for split_process_and_message_from_response: 4.506111145019531e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:64275 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID fc2cc8f8-4894-4e32-bc95-da5e02a4e5b3 to session_store
INFO:root:fast_api_main/ Received question: Men's waterproof boots size 14 with session_id: fc2cc8f8-4894-4e32-bc95-da5e02a4e5b3
INFO:root:fast_api_main/ Current chat history for session_id fc2cc8f8-4894-4e32-bc95-da5e02a4e5b3: []
INFO:root:fast_api_main/ Processing question: Men's waterproof boots size 14
Time for extract_customer_attributes: 1.7643589973449707
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 5.5789947509765625e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found two waterproof men's boots in size 14 for you:

1. Product 21A653 - This is a rubber boot that is cold-insulated, has an electrical hazard and oil-resistant sole, plain toe, and is waterproof. It is size 14 and costs $215.31.

2. Product 21A654 - This is also a cold-insulated rubber boot with electrical hazard and oil-resistant sole, plain toe, waterproof, in size 15 for $215.31. 

Please let me know if you would like any additional details on these boots or if you need help with anything else today!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]
INFO:     127.0.0.1:64276 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 8f67c2ac-93dc-44a7-abdc-9ec45f2fe179 to session_store
INFO:root:fast_api_main/ Received question: Work Gloves with session_id: 8f67c2ac-93dc-44a7-abdc-9ec45f2fe179
INFO:root:fast_api_main/ Current chat history for session_id 8f67c2ac-93dc-44a7-abdc-9ec45f2fe179: []
INFO:root:fast_api_main/ Processing question: Work Gloves
Time for extract_customer_attributes: 1.8578681945800781
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 3.4809112548828125e-05
INFO:root:chat_processor/ chat_procesing: message: Hello there! I've taken a look at our catalog and found 5 mechanics gloves that would be great options for small manufacturing businesses like yours. The Impacto and Ironclad brands offer high quality gloves in sizes Large, XL, and 2XL. All are made of durable cowhide leather and provide protection from vibration, dirt, and scrapes. Please let me know if you need any other details on these work gloves! I'm happy to help you find the perfect fit.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]
INFO:     127.0.0.1:64277 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 5c11bbba-6ee5-4221-9f06-86bacf4bde29 to session_store
INFO:root:fast_api_main/ Received question: sledge hammer with session_id: 5c11bbba-6ee5-4221-9f06-86bacf4bde29
INFO:root:fast_api_main/ Current chat history for session_id 5c11bbba-6ee5-4221-9f06-86bacf4bde29: []
INFO:root:fast_api_main/ Processing question: sledge hammer
Time for extract_customer_attributes: 1.7532958984375
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 4.8160552978515625e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:

2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg 
33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg

Both sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]
INFO:     127.0.0.1:64284 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: hammer with session_id: f95e37cc-eef2-44de-9e95-d31529e769a6
INFO:root:fast_api_main/ Current chat history for session_id f95e37cc-eef2-44de-9e95-d31529e769a6: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 1.1629629135131836
INFO:root:chat_processor/ Chat History passed to processor: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
Time for split_process_and_message_from_response: 5.91278076171875e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers! I'm happy to help.
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:64292 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: sledge hammer with session_id: 5c11bbba-6ee5-4221-9f06-86bacf4bde29
INFO:root:fast_api_main/ Current chat history for session_id 5c11bbba-6ee5-4221-9f06-86bacf4bde29: ["QUESTION: sledge hammer. MESSAGE: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:\n\n2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg \n33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg\n\nBoth sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: sledge hammer
Time for extract_customer_attributes: 1.5168499946594238
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: sledge hammer. MESSAGE: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:\n\n2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg \n33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg\n\nBoth sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 3.695487976074219e-05
INFO:root:chat_processor/ chat_procesing: message: Hello! Based on your interest in sledge hammers, I recommend the following two options from our catalog:

2DBU1 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg 
33NT32 Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg

Both sledge hammers have steel heads with fiberglass handles, making them durable demolition tools. The 2DBU1 model has a 33 inch overall length while the 33NT32 model is slightly longer at 36 inches. Please let me know if you have any other questions!
INFO:root:chat_processor/ chat_procesing: product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]
INFO:     127.0.0.1:64299 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ['Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK, 22MM16', "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK, 34VH12"]
INFO:root:grainger_image_util item.part[-1]: 22MM16 item.part[0]: Socks: Crew
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/22MM16_AW01?$lgmain$ for 22MM16 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34VH12 item.part[0]: Socks: Crew
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/34VH12_AW01?$lgmain$ for 34VH12 in 0.00 seconds
INFO:root:fast_api_main/ Fetching images for products: ['IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359', 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D360', 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362']
INFO:root:grainger_image_util item.part[-1]: 34D359 item.part[0]: IMPACTO Mechanics Gloves: L (9)
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D359 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34D360 item.part[0]: IMPACTO Mechanics Gloves: M (8)
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D360 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 34D362 item.part[0]: IMPACTO Mechanics Gloves: XL (10)
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/IMOBG473LGE_AS01?$lgmain$ for 34D362 in 0.00 seconds
INFO:root:fast_api_main/ Total time to fetch images: 0.004687070846557617 seconds
INFO:     127.0.0.1:64312 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Total time to fetch images: 0.003929853439331055 seconds
INFO:     127.0.0.1:64313 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721259004.8792908
INFO:     ('127.0.0.1', 64346) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721259004.9104419
INFO:root:fast_api_main/ Fetching reviews for product: Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK, 22MM16
INFO:root:fast_api_main/ Fetching reviews for product: Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK, 34VH12
INFO:root:fast_api_main/ Starting reviews at 1721259005.0577972
INFO:     ('127.0.0.1', 64348) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721259005.059385
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D362
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D359
INFO:root:fast_api_main/ Fetching reviews for product: IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR, 34D360
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
INFO:root:ChromeDriver initialized successfully.
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
ERROR:root:Attempt 1 failed: [Errno 61] Connection refused
INFO:     Started server process [9863]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:root: fast_api_main/ Adding new session ID 6af767ec-f986-4838-9c5d-fdcb6c03c76f to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 6af767ec-f986-4838-9c5d-fdcb6c03c76f
INFO:root:fast_api_main/ Current chat history for session_id 6af767ec-f986-4838-9c5d-fdcb6c03c76f: []
INFO:root:fast_api_main/ Processing question: hammer
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Invalid JSON: 

Time for extract_customer_attributes: 0.9639692306518555
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.0001709461212158203
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip', 'code': '45RC16'}, {'product': 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC17'}, {'product': 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip', 'code': '45RC18'}, {'product': 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip', 'code': '45RC19'}]
INFO:     127.0.0.1:64648 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID c1324b8c-530c-426e-b131-d9f20bf6c796 to session_store
INFO:root:fast_api_main/ Received question: gloves with session_id: c1324b8c-530c-426e-b131-d9f20bf6c796
INFO:root:fast_api_main/ Current chat history for session_id c1324b8c-530c-426e-b131-d9f20bf6c796: []
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 1.7534189224243164
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 1 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
Time for split_process_and_message_from_response: 7.081031799316406e-05
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:64649 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 26c53b1a-1755-46d3-91a6-b842d1750a2b to session_store
INFO:root:fast_api_main/ Received question: gloves for working with session_id: 26c53b1a-1755-46d3-91a6-b842d1750a2b
INFO:root:fast_api_main/ Current chat history for session_id 26c53b1a-1755-46d3-91a6-b842d1750a2b: []
INFO:root:fast_api_main/ Processing question: gloves for working
Time for extract_customer_attributes: 1.7542781829833984
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
Time for split_process_and_message_from_response: 5.3882598876953125e-05
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L (9), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M (8), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL (10), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:64652 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 4fdb7085-8c4c-4284-8bf0-5324eb34900d to session_store
INFO:root:fast_api_main/ Received question: sledge hammer with session_id: 4fdb7085-8c4c-4284-8bf0-5324eb34900d
INFO:root:fast_api_main/ Current chat history for session_id 4fdb7085-8c4c-4284-8bf0-5324eb34900d: []
INFO:root:fast_api_main/ Processing question: sledge hammer
Time for extract_customer_attributes: 1.7315208911895752
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 4.792213439941406e-05
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 33 in Overall Lg', 'code': '2DBU1'}, {'product': 'Standard Sledge Hammer: Steel, Fiberglass Handle, 10 lb Head Wt, 2 1/2 in Dia, 36 in Overall Lg', 'code': '33NT32'}]
INFO:     127.0.0.1:64653 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID a9dfa367-7253-467f-9bed-f5fe02948d63 to session_store
INFO:root:fast_api_main/ Received question: Men's waterproof boots size 14 with session_id: a9dfa367-7253-467f-9bed-f5fe02948d63
INFO:root:fast_api_main/ Current chat history for session_id a9dfa367-7253-467f-9bed-f5fe02948d63: []
INFO:root:fast_api_main/ Processing question: Men's waterproof boots size 14
Time for extract_customer_attributes: 1.776576042175293
INFO:root:chat_processor/ Chat History passed to processor: []
ERROR:root:Attempt 2 failed: timed out
ERROR:root:Attempt 2 failed: timed out
ERROR:root:All 2 attempts failed.
ERROR:root:All 2 attempts failed.
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
ERROR:root:Failed to process question: No response
Time for split_process_and_message_from_response: 4.76837158203125e-05
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 14, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A653'}, {'product': 'Rubber Boot: Cold-Insulated/Electrical Hazard (EH)/Oil-Resistant Sole/Plain Toe/Waterproof, 15, 1 PR $215.31 These half rubber-dipped neoprene boots are flexible and form-fitting for a snug, secure fit. They have a waterproof rubber coating that covers the bottom half of the outside of the boot. Knee-height boots protect the foot, lower leg, and calf to just below the knee. These insulated boots are worn when users are exposed to cold, wet conditions and below-freezing temperatures.', 'code': '21A654'}]
INFO:     127.0.0.1:64656 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 3424d59c-dc8e-49c9-a3a1-d8172c6bdb46 to session_store
INFO:root:fast_api_main/ Received question: Work Gloves with session_id: 3424d59c-dc8e-49c9-a3a1-d8172c6bdb46
INFO:root:fast_api_main/ Current chat history for session_id 3424d59c-dc8e-49c9-a3a1-d8172c6bdb46: []
INFO:root:fast_api_main/ Processing question: Work Gloves
Time for extract_customer_attributes: 1.9461431503295898
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 4.7206878662109375e-05
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}, {'product': 'IMPACTO Mechanics Gloves: 2XL ( 11 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D364'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG2'}, {'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Slip-On Cuff, 1 PR', 'code': '6WPG1'}]
INFO:     127.0.0.1:64657 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 0a71e9a2-889d-41f6-9413-b3dcedea4846 to session_store
INFO:root:fast_api_main/ Received question: nails with session_id: 0a71e9a2-889d-41f6-9413-b3dcedea4846
INFO:root:fast_api_main/ Current chat history for session_id 0a71e9a2-889d-41f6-9413-b3dcedea4846: []
INFO:root:fast_api_main/ Processing question: nails
Time for extract_customer_attributes: 1.9788169860839844
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 0.0014529228210449219
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU37'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU35'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU36'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU34'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU37'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU35'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU36'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU34'}]
INFO:     127.0.0.1:64658 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID e86e291f-a34f-4b16-a7cc-b04e49c207d2 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: e86e291f-a34f-4b16-a7cc-b04e49c207d2
INFO:root:fast_api_main/ Current chat history for session_id e86e291f-a34f-4b16-a7cc-b04e49c207d2: []
INFO:root:fast_api_main/ Processing question: hammer
Invalid JSON: 

Time for extract_customer_attributes: 0.8423449993133545
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 6.794929504394531e-05
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:64661 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root: fast_api_main/ Adding new session ID 38762713-b642-4738-9ca8-352dedd8c381 to session_store
INFO:root:fast_api_main/ Received question: socks with session_id: 38762713-b642-4738-9ca8-352dedd8c381
INFO:root:fast_api_main/ Current chat history for session_id 38762713-b642-4738-9ca8-352dedd8c381: []
INFO:root:fast_api_main/ Processing question: socks
Time for extract_customer_attributes: 1.619210958480835
INFO:root:chat_processor/ Chat History passed to processor: []
Time for split_process_and_message_from_response: 4.8160552978515625e-05
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Socks: Crew, Unisex, Universal Fits Shoe Size, Black, Cotton, 5.11 TACTICAL, Universal, 3 PK', 'code': '22MM16'}, {'product': "Socks: Crew, Men's, 6 to 12 Fits Shoe Size, Black, Cotton, FRUIT OF THE LOOM, Seamless Design, 6 PK", 'code': '34VH12'}]
INFO:     127.0.0.1:64662 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: gloves with session_id: c1324b8c-530c-426e-b131-d9f20bf6c796
INFO:root:fast_api_main/ Current chat history for session_id c1324b8c-530c-426e-b131-d9f20bf6c796: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: gloves
Time for extract_customer_attributes: 1.8093247413635254
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: gloves. MESSAGE: Hello there! I've looked through our catalog and found 3 mechanics gloves that would be great options for you:\n\n- IMPACTO Mechanics Gloves size L (code 34D359)\n- IMPACTO Mechanics Gloves size M (code 34D360)  \n- IMPACTO Mechanics Gloves size XL (code 34D362)\n\nAll are full finger cowhide gloves with wrist support, perfect for protecting your hands during maintenance and repair work. Let me know if you need any other details on these gloves or have questions! I'm happy to help.. CUSTOMER ATTRIBUTES: {'Industry': 'Other', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 6.008148193359375e-05
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': 'IMPACTO Mechanics Gloves: L ( 9 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D359'}, {'product': 'IMPACTO Mechanics Gloves: M ( 8 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D360'}, {'product': 'IMPACTO Mechanics Gloves: XL ( 10 ), Mechanics Glove, Full Finger, Cowhide, Wrist Support, 1 PR', 'code': '34D362'}]
INFO:     127.0.0.1:64674 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Received question: nails with session_id: 0a71e9a2-889d-41f6-9413-b3dcedea4846
INFO:root:fast_api_main/ Current chat history for session_id 0a71e9a2-889d-41f6-9413-b3dcedea4846: ["QUESTION: nails. MESSAGE: Hello! Based on your interest in nails, I recommend the following Milwaukee ONE-KEY tracking tags to help you keep track of your tools and inventory:\n\n- Tool and Equipment Tracker 61UU37 \n- Tool and Equipment Tracker 61UU35\n- Tool and Equipment Tracker 61UU36\n- Tool and Equipment Tracker 61UU34\n\nThese Bluetooth tags allow you to locate tagged tools using the ONE-KEY app. Let me know if you need any other product recommendations for your retail business!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processing question: nails
Time for extract_customer_attributes: 2.7501559257507324
INFO:root:chat_processor/ Chat History passed to processor: ["QUESTION: nails. MESSAGE: Hello! Based on your interest in nails, I recommend the following Milwaukee ONE-KEY tracking tags to help you keep track of your tools and inventory:\n\n- Tool and Equipment Tracker 61UU37 \n- Tool and Equipment Tracker 61UU35\n- Tool and Equipment Tracker 61UU36\n- Tool and Equipment Tracker 61UU34\n\nThese Bluetooth tags allow you to locate tagged tools using the ONE-KEY app. Let me know if you need any other product recommendations for your retail business!. CUSTOMER ATTRIBUTES: {'Industry': 'Retail', 'Size': 'Individual Customer', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
Time for split_process_and_message_from_response: 7.915496826171875e-05
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU37'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU35'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU36'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU34'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Products retrieved: [{'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU37'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU35'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU36'}, {'product': 'Milwaukee ONE-KEY tracking tags pair with the ONE-KEY app to locate tagged tools and equipment. The attachable tags emit a Bluetooth signal that broadcasts up to 100 ft. and updates tool locations through any app-equipped device within the signal range. The stick-on tags have a QR code that is scanned using the camera on an app-equipped device.', 'code': '61UU34'}]
INFO:     127.0.0.1:64675 - "POST /ask_question HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Fetching images for products: ['Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip, 45RC16', 'Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip, 45RC17', 'Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip, 45RC18', 'Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip, 45RC19']
INFO:root:grainger_image_util item.part[-1]: 45RC16 item.part[0]: Hammer: Fiberglass
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC16 in 0.01 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC17 item.part[0]: Hammer: Fiberglass
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC17 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC18 item.part[0]: Hammer: Fiberglass
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC18 in 0.00 seconds
INFO:root:grainger_image_util item.part[-1]: 45RC19 item.part[0]: Hammer: Fiberglass
Fetched image URL https://static.grainger.com/rp/s/is/image/Grainger/2DBP7_AS02?$lgmain$ for 45RC19 in 0.00 seconds
INFO:root:fast_api_main/ Total time to fetch images: 0.011825323104858398 seconds
INFO:     127.0.0.1:64690 - "POST /fetch_images HTTP/1.1" 200 OK
INFO:root:fast_api_main/ Starting reviews at 1721259145.485955
INFO:     ('127.0.0.1', 64740) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721259145.4873989
INFO:root:fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 16 oz Head Wt, 1 1/8 in Face Dia, 13 in Overall Lg, Textured Grip, 45RC16
INFO:root:fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 40 oz Head Wt, 1 5/8 in Face Dia, 16 in Overall Lg, Textured Grip, 45RC19
INFO:root:fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 24 oz Head Wt, 1 3/8 in Face Dia, 15 in Overall Lg, Textured Grip, 45RC17
INFO:root:fast_api_main/ Fetching reviews for product: Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip, 45RC18
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for Hammer: Fiberglass, Steel, 32 oz Head Wt, 1 1/2 in Face Dia, 15 in Overall Lg, Textured Grip, 45RC18: Message: 
Stacktrace:
0   chromedriver                        0x0000000107729078 chromedriver + 5169272
1   chromedriver                        0x0000000107720f4a chromedriver + 5136202
2   chromedriver                        0x000000010729d36c chromedriver + 402284
3   chromedriver                        0x00000001072ea740 chromedriver + 718656
4   chromedriver                        0x00000001072eaa01 chromedriver + 719361
5   chromedriver                        0x000000010732fbc4 chromedriver + 1002436
6   chromedriver                        0x000000010730dadd chromedriver + 862941
7   chromedriver                        0x000000010732cf57 chromedriver + 991063
8   chromedriver                        0x000000010730d853 chromedriver + 862291
9   chromedriver                        0x00000001072dd5c6 chromedriver + 665030
10  chromedriver                        0x00000001072dde4e chromedriver + 667214
11  chromedriver                        0x00000001076ebc90 chromedriver + 4918416
12  chromedriver                        0x00000001076f0c8d chromedriver + 4938893
13  chromedriver                        0x00000001076f1365 chromedriver + 4940645
14  chromedriver                        0x00000001076ccd74 chromedriver + 4791668
15  chromedriver                        0x00000001076f1659 chromedriver + 4941401
16  chromedriver                        0x00000001076be544 chromedriver + 4732228
17  chromedriver                        0x0000000107711828 chromedriver + 5072936
18  chromedriver                        0x00000001077119e7 chromedriver + 5073383
19  chromedriver                        0x0000000107720afe chromedriver + 5135102
20  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721259192.9185028
INFO:root:fast_api_main/ Reviews for product 45RC16: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['tire removal', 'heavy duty, works good.', 'This a really big hammer. It is perfect for driving post in the ground. Very well made.']}
INFO:root:fast_api_main/ Reviews for product 45RC19: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['tire removal', 'heavy duty, works good.', 'This a really big hammer. It is perfect for driving post in the ground. Very well made.']}
INFO:root:fast_api_main/ Sending review at 1721259193.850841
INFO:root:fast_api_main/ Sending review at 1721259193.851059
INFO:root:fast_api_main/ Reviews for product 45RC17: {'Average Star Rating': 5.0, 'Average Recommendation Percent': 100.0, 'Review Texts': ['tire removal', 'heavy duty, works good.', 'This a really big hammer. It is perfect for driving post in the ground. Very well made.']}
ERROR:root:Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:root:ChromeDriver initialized successfully.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:     Started server process [10036]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / All 2 attempts failed.
ERROR:root:StreamlitInterface / Failed to process question: No response
ERROR:root:StreamlitInterface / Failed to process question: No response
ERROR:root:StreamlitInterface / Failed to process question: No response
ERROR:root:StreamlitInterface / Failed to process question: No response
ERROR:root:StreamlitInterface / Failed to process question: No response
ERROR:root:StreamlitInterface / Failed to process question: No response
ERROR:root:StreamlitInterface / Failed to process question: No response
ERROR:root:StreamlitInterface / Failed to process question: No response
ERROR:root:StreamlitInterface / Failed to process question: No response
ERROR:root:StreamlitInterface / Failed to process question: No response
ERROR:root:StreamlitInterface / Failed to process question: No response
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:WDM:Get LATEST chromedriver version for google-chrome
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:WDM:Get LATEST chromedriver version for google-chrome
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [10146]
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / All 30 attempts failed.
ERROR:root:StreamlitInterface / Failed to process question: No response
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [10231]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [10308]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 31 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 32 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 33 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 34 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 35 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 36 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 37 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 38 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 39 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 40 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 41 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 42 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 43 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 44 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 45 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 46 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 47 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 48 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 49 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 50 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 51 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 52 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 53 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 54 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 55 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 56 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 57 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 58 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 59 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 60 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 61 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 62 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 63 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 64 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 65 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 66 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 67 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 68 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 69 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 70 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 71 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 72 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 73 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 74 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 75 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 76 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 77 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 78 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 79 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 80 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 81 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 82 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 83 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 84 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 85 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 86 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 87 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 88 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 89 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 90 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 91 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 92 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 93 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 94 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 95 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 96 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 97 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 98 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 99 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 100 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 101 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 102 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 103 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 104 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 105 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 106 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 107 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 108 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 109 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 110 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 111 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 112 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 113 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 114 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 115 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 116 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 117 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 118 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 119 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 120 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 121 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 122 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 123 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 124 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 125 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 126 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 127 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 128 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 129 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 130 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 131 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 132 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 133 failed: Request URL is missing an 'http://' or 'https://' protocol.
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [10421]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [10497]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 31 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 32 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 33 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 34 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 35 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 36 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 37 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 38 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 39 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 40 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 41 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 42 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 43 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 44 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 45 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 46 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 47 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 48 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 49 failed: Request URL is missing an 'http://' or 'https://' protocol.
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [10621]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
ERROR:    [Errno 48] error while attempting to bind on address ('0.0.0.0', 8000): address already in use
INFO:     Waiting for application shutdown.
INFO:root:Shutdown complete.
INFO:     Application shutdown complete.
ERROR:root:StreamlitInterface / Attempt 1 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 2 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 3 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 4 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 5 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 6 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 7 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 8 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 9 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 10 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 11 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 12 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 13 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 14 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 15 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 16 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 17 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 18 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 19 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 20 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 21 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 22 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 23 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 24 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 25 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 26 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 27 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 28 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 29 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 30 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 31 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 32 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 33 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 34 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 35 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 36 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 37 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 38 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 39 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 40 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 41 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 42 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 43 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 44 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 45 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 46 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 47 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 48 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 49 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 50 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 51 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 52 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 53 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 54 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 55 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 56 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 57 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 58 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 59 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 60 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 61 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 62 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 63 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 64 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 65 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 66 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 67 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 68 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 69 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 70 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 71 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 72 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 73 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 74 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 75 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 76 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 77 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 78 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 79 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 80 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 81 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 82 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 83 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 84 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 85 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 86 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 87 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 88 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 89 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 90 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 91 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 92 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 93 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 94 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 95 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 96 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 97 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 98 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 99 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 100 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 101 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 102 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 103 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 104 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 105 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 106 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 107 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 108 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 109 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 110 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 111 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 112 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 113 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 114 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 115 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 116 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 117 failed: Request URL is missing an 'http://' or 'https://' protocol.
ERROR:root:StreamlitInterface / Attempt 118 failed: Request URL is missing an 'http://' or 'https://' protocol.
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [10749]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:root: fast_api_main/ Adding new session ID 95d1d1c1-e189-4de7-99f3-441602f38e07 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 95d1d1c1-e189-4de7-99f3-441602f38e07
INFO:root:fast_api_main/ Current chat history for session_id 95d1d1c1-e189-4de7-99f3-441602f38e07: []
INFO:root:fast_api_main/ Processing question: hammer
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Invalid JSON: 

Time for extract_customer_attributes: 1.2490837574005127
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.0001800060272216797
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.2512590885162354
INFO:root:fast_api_main/ Updated chat history for session_id 95d1d1c1-e189-4de7-99f3-441602f38e07: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:49681 - "POST /ask_question HTTP/1.1" 200 OK
ERROR:root:StreamlitInterface / Error fetching images: Request URL is missing an 'http://' or 'https://' protocol.
INFO:root:fast_api_main/ Starting reviews at 1721259865.5128498
INFO:     ('127.0.0.1', 49690) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721259865.5145652
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT48
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT50
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC17
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC16
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC18
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC19
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC19: Message: 
Stacktrace:
0   chromedriver                        0x00000001023d4078 chromedriver + 5169272
1   chromedriver                        0x00000001023cbf4a chromedriver + 5136202
2   chromedriver                        0x0000000101f4836c chromedriver + 402284
3   chromedriver                        0x0000000101f95740 chromedriver + 718656
4   chromedriver                        0x0000000101f95a01 chromedriver + 719361
5   chromedriver                        0x0000000101fdabc4 chromedriver + 1002436
6   chromedriver                        0x0000000101fb8add chromedriver + 862941
7   chromedriver                        0x0000000101fd7f57 chromedriver + 991063
8   chromedriver                        0x0000000101fb8853 chromedriver + 862291
9   chromedriver                        0x0000000101f885c6 chromedriver + 665030
10  chromedriver                        0x0000000101f88e4e chromedriver + 667214
11  chromedriver                        0x0000000102396c90 chromedriver + 4918416
12  chromedriver                        0x000000010239bc8d chromedriver + 4938893
13  chromedriver                        0x000000010239c365 chromedriver + 4940645
14  chromedriver                        0x0000000102377d74 chromedriver + 4791668
15  chromedriver                        0x000000010239c659 chromedriver + 4941401
16  chromedriver                        0x0000000102369544 chromedriver + 4732228
17  chromedriver                        0x00000001023bc828 chromedriver + 5072936
18  chromedriver                        0x00000001023bc9e7 chromedriver + 5073383
19  chromedriver                        0x00000001023cbafe chromedriver + 5135102
20  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721259921.273098
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
INFO:root:fast_api_main/ Reviews for product 53CT48: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Reviews for product 53CT50: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Reviews for product 45RC17: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Reviews for product 45RC16: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Sending review at 1721259923.062343
INFO:root:fast_api_main/ Reviews for product 45RC18: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Sending review at 1721259923.377006
INFO:root:fast_api_main/ Sending review at 1721259923.377145
INFO:root:fast_api_main/ Sending review at 1721259923.3772612
ERROR:root:StreamlitInterface / Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
ERROR:root:StreamlitInterface / Attempt 1 failed: [Errno 61] Connection refused
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [10860]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:root: fast_api_main/ Adding new session ID 52f9c240-aa03-4cff-a5d1-ba9c24813030 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 52f9c240-aa03-4cff-a5d1-ba9c24813030
INFO:root:fast_api_main/ Current chat history for session_id 52f9c240-aa03-4cff-a5d1-ba9c24813030: []
INFO:root:fast_api_main/ Processing question: hammer
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Invalid JSON: 

Time for extract_customer_attributes: 1.1062428951263428
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.0001571178436279297
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.1074402332305908
INFO:root:fast_api_main/ Updated chat history for session_id 52f9c240-aa03-4cff-a5d1-ba9c24813030: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:49942 - "POST /ask_question HTTP/1.1" 200 OK
ERROR:root:StreamlitInterface / Error fetching images: Request URL is missing an 'http://' or 'https://' protocol.
INFO:root:fast_api_main/ Starting reviews at 1721260070.024377
INFO:     ('127.0.0.1', 49950) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721260070.0274
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT48
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 53CT50
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC17
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC16
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC18
INFO:root:fast_api_main/ Fetching reviews for product: Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC19
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it., 45RC19: Message: 
Stacktrace:
0   chromedriver                        0x0000000100c4a078 chromedriver + 5169272
1   chromedriver                        0x0000000100c41f4a chromedriver + 5136202
2   chromedriver                        0x00000001007be36c chromedriver + 402284
3   chromedriver                        0x000000010080b740 chromedriver + 718656
4   chromedriver                        0x000000010080ba01 chromedriver + 719361
5   chromedriver                        0x0000000100850bc4 chromedriver + 1002436
6   chromedriver                        0x000000010082eadd chromedriver + 862941
7   chromedriver                        0x000000010084df57 chromedriver + 991063
8   chromedriver                        0x000000010082e853 chromedriver + 862291
9   chromedriver                        0x00000001007fe5c6 chromedriver + 665030
10  chromedriver                        0x00000001007fee4e chromedriver + 667214
11  chromedriver                        0x0000000100c0cc90 chromedriver + 4918416
12  chromedriver                        0x0000000100c11c8d chromedriver + 4938893
13  chromedriver                        0x0000000100c12365 chromedriver + 4940645
14  chromedriver                        0x0000000100bedd74 chromedriver + 4791668
15  chromedriver                        0x0000000100c12659 chromedriver + 4941401
16  chromedriver                        0x0000000100bdf544 chromedriver + 4732228
17  chromedriver                        0x0000000100c32828 chromedriver + 5072936
18  chromedriver                        0x0000000100c329e7 chromedriver + 5073383
19  chromedriver                        0x0000000100c41afe chromedriver + 5135102
20  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721260125.2253702
INFO:root:fast_api_main/ Reviews for product 53CT48: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Reviews for product 53CT50: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Reviews for product 45RC17: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Reviews for product 45RC16: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
INFO:root:fast_api_main/ Sending review at 1721260126.550999
INFO:root:fast_api_main/ Sending review at 1721260126.551268
INFO:root:fast_api_main/ Sending review at 1721260126.551384
INFO:root:fast_api_main/ Sending review at 1721260126.551496
INFO:root:fast_api_main/ Reviews for product 45RC18: {'Average Star Rating': 3.5, 'Average Recommendation Percent': 0.0, 'Review Texts': ["I've bought 2 of them. Each one lasted less than a month.\nI thought maybe the first one was already damaged so i\nThought I would try it again and the 2nd one broke just \nlike the 1st one. The head breaks off while hammering.\nI have plenty of brass hammers that are worn but never\njust break off like that. You need to make a better hammer."]}
ERROR:root:StreamlitInterface / Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
ERROR:root:StreamlitInterface / Attempt 1 failed: [Errno 61] Connection refused
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
ERROR:root:StreamlitInterface / Attempt 2 failed: [Errno 61] Connection refused
2024-07-17 19:51:18.773 Port 8505 is already in use
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
2024-07-17 19:51:18.790 Port 8505 is already in use
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
ERROR:root:StreamlitInterface / Attempt 3 failed: [Errno 61] Connection refused
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:botocore.credentials:Found credentials in environment variables.
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
INFO:root:Initializing Bedrock clients...
ERROR:root:StreamlitInterface / Attempt 4 failed: [Errno 61] Connection refused
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
ERROR:root:StreamlitInterface / Attempt 5 failed: [Errno 61] Connection refused
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [10980]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:root: fast_api_main/ Adding new session ID 746a678b-1371-4bff-8666-1bbc16dc4a57 to session_store
INFO:root:fast_api_main/ Received question: hammer with session_id: 746a678b-1371-4bff-8666-1bbc16dc4a57
INFO:root:fast_api_main/ Current chat history for session_id 746a678b-1371-4bff-8666-1bbc16dc4a57: []
INFO:root:fast_api_main/ Processing question: hammer
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
Invalid JSON: 

Time for extract_customer_attributes: 1.1416919231414795
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
INFO:root:ChromeDriver initialized successfully.
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [11047]
INFO:     Started server process [11048]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
ERROR:    [Errno 48] error while attempting to bind on address ('0.0.0.0', 8000): address already in use
INFO:     Waiting for application shutdown.
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
ERROR:    [Errno 48] error while attempting to bind on address ('0.0.0.0', 8000): address already in use
INFO:     Waiting for application shutdown.
INFO:root:Shutdown complete.
INFO:root:Shutdown complete.
INFO:     Application shutdown complete.
INFO:     Application shutdown complete.
Time for split_process_and_message_from_response: 0.00017690658569335938
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {}
INFO:root:fast_api_main/ Time to get attributes: 1.1431331634521484
INFO:root:fast_api_main/ Updated chat history for session_id 746a678b-1371-4bff-8666-1bbc16dc4a57: ['QUESTION: hammer. MESSAGE: Hello! I found 6 hammers in our catalog that match your search:\n\n- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length \n- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length\n- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length\n- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  \n- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length\n- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length\n\nLet me know if you need any other details on these hammers or have additional questions!. CUSTOMER ATTRIBUTES: {}']
INFO:root:fast_api_main/ Processed question: hammer with message: Hello! I found 6 hammers in our catalog that match your search:

- 45RC17 Hammer with a 1 3/8 in face diameter and 15 in overall length 
- 45RC19 Hammer with a 1 5/8 in face diameter and 16 in overall length
- 45RC16 Hammer with a 1 1/8 in face diameter and 13 in overall length
- 53CT48 Hammer with a 1 1/4 in face diameter and 13 in overall length  
- 45RC18 Hammer with a 1 1/2 in face diameter and 15 in overall length
- 53CT50 Hammer with a 1 3/8 in face diameter and 14 in overall length

Let me know if you need any other details on these hammers or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC17'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC19'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC16'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT48'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '45RC18'}, {'product': "Standard ball-peen hammers strike objects and shape material in everyday applications where a non-sparking hammer isn't needed. Their peened face is rounded to curve the edges of fasteners and to shape metal without creasing it.", 'code': '53CT50'}]
INFO:     127.0.0.1:50234 - "POST /ask_question HTTP/1.1" 200 OK
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing BedrockEmbeddings from langchain.embeddings is deprecated. Please replace deprecated imports:

>> from langchain.embeddings import BedrockEmbeddings

with new imports of:

>> from langchain_community.embeddings import BedrockEmbeddings
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing FAISS from langchain.vectorstores is deprecated. Please replace deprecated imports:

>> from langchain.vectorstores import FAISS

with new imports of:

>> from langchain_community.vectorstores import FAISS
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain/_api/module_import.py:92: LangChainDeprecationWarning: Importing Bedrock from langchain.llms is deprecated. Please replace deprecated imports:

>> from langchain.llms import Bedrock

with new imports of:

>> from langchain_community.llms import Bedrock
You can use the langchain cli to **automatically** upgrade many imports. Please see documentation here <https://python.langchain.com/v0.2/docs/versions/v0_2/>
  warn_deprecated(
INFO:botocore.credentials:Found credentials in environment variables.
INFO:root:Initializing Bedrock clients...
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `Bedrock` was deprecated in LangChain 0.1.0 and will be removed in 0.2.0. Use BedrockLLM instead.
  warn_deprecated(
INFO:root:Initializing Titan Embeddings Model...
INFO:root:Titan Embeddings Model initialized.
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/web_extraction_tools/processed/grainger_products.parquet
INFO:root:Attempting to load file from: /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl
INFO:root:Serialized documents file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/data_source/documents.pkl already exists. Loading...
INFO:root:Documents file loaded successfully!
INFO:root:Structured documents created:
INFO:root:Document 1 of 11424:
INFO:root:3JKR7 OHAUS Hanging Scale: 5000g/50 N, g, 100g/1 N, +/-3% Scale Accuracy $17.38 <p>Mechanical Hanging Scales include analog dial spring scales, and analog linear models. They are designed to be suspen
INFO:root:Document 2 of 11424:
INFO:root:3EB49 GEORGIA-PACIFIC Paper Towel Dispenser: Hardwound, 10 in Paper Towel Wd, 1 3/4 in, Plastic, Black $69.73 <p>Motion-activated paper towel dispensers offer hands-free dispensing to help improve hyg
INFO:root:Document 3 of 11424:
INFO:root:5PHW9 TOUGH GUY Compostable Trash Bags: 33 gal Capacity, 33 in Wd, 39 in Ht, 1 mil Thick, Green, 100 PK $212.17 <p>Compostable trash bags collect compostable waste for use in commercial composting fac
INFO:root:Document 4 of 11424:
INFO:root:14L589 PELICAN Safety-Rated Flashlight: 183 lm Max. Brightness, 5.45 hr Run Time at Max. Brightness, Yellow $64.20 <p>These safety-rated flashlights set their head in line with their body for a tradit
INFO:root:Document 5 of 11424:
INFO:root:4KN29 TOUGH GUY Trash Bags: 24 in Wd, 33 in Ht, 6 micron Thick, Clear, Coreless Roll, 1,000 PK $64.29 <p>Trash bags for soft refuse are made of HDPE (high-density polyethylene), which is a lightweight
INFO:root:Serialized index file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl
INFO:root:Serialized file /Users/noel_niko/PycharmProjects/grainger_recommendations_chatbot/modules/vector_index/vector_index.pkl already exists. Loading...
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:root:FAISS vector store loaded from pickle file.
INFO:root:Initializing ChromeDriver...
INFO:WDM:====== WebDriver manager ======

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8505
  Network URL: http://192.168.1.73:8505

INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Get LATEST chromedriver version for google-chrome
INFO:WDM:Driver [/Users/noel_niko/.wdm/drivers/chromedriver/mac64/126.0.6478.182/chromedriver-mac-x64/chromedriver] found in cache
INFO:root:ChromeDriver initialized successfully.
INFO:     Started server process [11184]
INFO:     Waiting for application startup.
INFO:root:Startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:root: fast_api_main/ Adding new session ID f28e47c8-e155-41bf-89e7-c3d31cdaf967 to session_store
INFO:root:fast_api_main/ Received question: soap dispensers for my restaurant with session_id: f28e47c8-e155-41bf-89e7-c3d31cdaf967
INFO:root:fast_api_main/ Current chat history for session_id f28e47c8-e155-41bf-89e7-c3d31cdaf967: []
INFO:root:fast_api_main/ Processing question: soap dispensers for my restaurant
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseLLM.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for extract_customer_attributes: 2.2075979709625244
INFO:root:chat_processor/ Chat History passed to processor: []
/opt/anaconda3/envs/grainger_recommendations_chatbot_3-11/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 0.3.0. Use invoke instead.
  warn_deprecated(
Time for split_process_and_message_from_response: 0.0001780986785888672
INFO:root:chat_processor/ product_list_as_json: {'products': [{'product': "Automatic wall dispensers release a premeasured amount of hand soap. They have infrared sensors that detect the presence of hands so users don't have to touch the handle or dispenser opening. These dispensers mount to a wall to free up counter and floor space in restrooms or office break rooms.", 'code': '460K88'}, {'product': 'Automatic wall dispensers release a premeasured amount of hand sanitizer. They have battery-operated infrared sensors that detect the presence of hands for touch-free operation. These dispensers mount to a wall to free up counter and floor space in offices, restrooms, or open areas.', 'code': '53JU89'}]}
INFO:root:chat_processor/ product_list_as_json processed
INFO:root:fast_api_main/ Message: Hello! Based on your request for soap dispensers for a small restaurant business, I would recommend the following touch-free, automatic dispensers to help maintain cleanliness and sanitation:

- The 460K88 soap dispenser mounts to the wall and uses an infrared sensor to release a premeasured amount of hand soap. This frees up counter space.

- The 53JU89 sanitizer dispenser also mounts to the wall and uses a sensor for touch-free dispensing. This is great for placing near doors or in restrooms. 

Both options are designed for commercial use and will help promote hand hygiene in your restaurant. Please let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Response json: {'products': [{'product': "Automatic wall dispensers release a premeasured amount of hand soap. They have infrared sensors that detect the presence of hands so users don't have to touch the handle or dispenser opening. These dispensers mount to a wall to free up counter and floor space in restrooms or office break rooms.", 'code': '460K88'}, {'product': 'Automatic wall dispensers release a premeasured amount of hand sanitizer. They have battery-operated infrared sensors that detect the presence of hands for touch-free operation. These dispensers mount to a wall to free up counter and floor space in offices, restrooms, or open areas.', 'code': '53JU89'}]}
INFO:root:fast_api_main/ Customer attributes retrieved: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}
INFO:root:fast_api_main/ Time to get attributes: 2.208826780319214
INFO:root:fast_api_main/ Updated chat history for session_id f28e47c8-e155-41bf-89e7-c3d31cdaf967: ["QUESTION: soap dispensers for my restaurant. MESSAGE: Hello! Based on your request for soap dispensers for a small restaurant business, I would recommend the following touch-free, automatic dispensers to help maintain cleanliness and sanitation:\n\n- The 460K88 soap dispenser mounts to the wall and uses an infrared sensor to release a premeasured amount of hand soap. This frees up counter space.\n\n- The 53JU89 sanitizer dispenser also mounts to the wall and uses a sensor for touch-free dispensing. This is great for placing near doors or in restrooms. \n\nBoth options are designed for commercial use and will help promote hand hygiene in your restaurant. Please let me know if you need any other recommendations or have additional questions!. CUSTOMER ATTRIBUTES: {'Industry': 'Food and Beverage Distribution', 'Size': 'Small Businesses', 'SustainabilityFocus': False, 'InventoryManager': False, 'Location': ''}"]
INFO:root:fast_api_main/ Processed question: soap dispensers for my restaurant with message: Hello! Based on your request for soap dispensers for a small restaurant business, I would recommend the following touch-free, automatic dispensers to help maintain cleanliness and sanitation:

- The 460K88 soap dispenser mounts to the wall and uses an infrared sensor to release a premeasured amount of hand soap. This frees up counter space.

- The 53JU89 sanitizer dispenser also mounts to the wall and uses a sensor for touch-free dispensing. This is great for placing near doors or in restrooms. 

Both options are designed for commercial use and will help promote hand hygiene in your restaurant. Please let me know if you need any other recommendations or have additional questions!
INFO:root:fast_api_main/ Products retrieved: [{'product': "Automatic wall dispensers release a premeasured amount of hand soap. They have infrared sensors that detect the presence of hands so users don't have to touch the handle or dispenser opening. These dispensers mount to a wall to free up counter and floor space in restrooms or office break rooms.", 'code': '460K88'}, {'product': 'Automatic wall dispensers release a premeasured amount of hand sanitizer. They have battery-operated infrared sensors that detect the presence of hands for touch-free operation. These dispensers mount to a wall to free up counter and floor space in offices, restrooms, or open areas.', 'code': '53JU89'}]
INFO:     127.0.0.1:50372 - "POST /ask_question HTTP/1.1" 200 OK
ERROR:root:StreamlitInterface / Error fetching images: Request URL is missing an 'http://' or 'https://' protocol.
INFO:root:fast_api_main/ Starting reviews at 1721260348.9565818
INFO:     ('127.0.0.1', 50381) - "WebSocket /ws/reviews" [accepted]
INFO:     connection open
INFO:root:fast_api_main/ Sending review at 1721260348.958807
INFO:root:fast_api_main/ Fetching reviews for product: Automatic wall dispensers release a premeasured amount of hand soap. They have infrared sensors that detect the presence of hands so users don't have to touch the handle or dispenser opening. These dispensers mount to a wall to free up counter and floor space in restrooms or office break rooms., 460K88
INFO:root:fast_api_main/ Fetching reviews for product: Automatic wall dispensers release a premeasured amount of hand sanitizer. They have battery-operated infrared sensors that detect the presence of hands for touch-free operation. These dispensers mount to a wall to free up counter and floor space in offices, restrooms, or open areas., 53JU89
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
WARNING:urllib3.connectionpool:Connection pool is full, discarding connection: localhost. Connection pool size: 1
ERROR:root:fast_api_main/ Error navigating to reviews for Automatic wall dispensers release a premeasured amount of hand sanitizer. They have battery-operated infrared sensors that detect the presence of hands for touch-free operation. These dispensers mount to a wall to free up counter and floor space in offices, restrooms, or open areas., 53JU89: Message: 
Stacktrace:
0   chromedriver                        0x0000000100762078 chromedriver + 5169272
1   chromedriver                        0x0000000100759f4a chromedriver + 5136202
2   chromedriver                        0x00000001002d636c chromedriver + 402284
3   chromedriver                        0x0000000100323740 chromedriver + 718656
4   chromedriver                        0x0000000100323a01 chromedriver + 719361
5   chromedriver                        0x0000000100368bc4 chromedriver + 1002436
6   chromedriver                        0x0000000100346add chromedriver + 862941
7   chromedriver                        0x0000000100365f57 chromedriver + 991063
8   chromedriver                        0x0000000100346853 chromedriver + 862291
9   chromedriver                        0x00000001003165c6 chromedriver + 665030
10  chromedriver                        0x0000000100316e4e chromedriver + 667214
11  chromedriver                        0x0000000100724c90 chromedriver + 4918416
12  chromedriver                        0x0000000100729c8d chromedriver + 4938893
13  chromedriver                        0x000000010072a365 chromedriver + 4940645
14  chromedriver                        0x0000000100705d74 chromedriver + 4791668
15  chromedriver                        0x000000010072a659 chromedriver + 4941401
16  chromedriver                        0x00000001006f7544 chromedriver + 4732228
17  chromedriver                        0x000000010074a828 chromedriver + 5072936
18  chromedriver                        0x000000010074a9e7 chromedriver + 5073383
19  chromedriver                        0x0000000100759afe chromedriver + 5135102
20  libsystem_pthread.dylib             0x00007ff8028d1202 _pthread_start + 99
21  libsystem_pthread.dylib             0x00007ff8028ccbab thread_start + 15

INFO:root:fast_api_main/ Sending review at 1721260388.835959
INFO:root:fast_api_main/ Reviews for product 460K88: {'Average Star Rating': None, 'Average Recommendation Percent': None, 'Review Texts': []}
ERROR:root:StreamlitInterface / Missing 'code' in review: {'end_of_reviews': True}
INFO:root:WebSocket disconnected
WARNING:root:WebSocket already closed
INFO:     connection closed
